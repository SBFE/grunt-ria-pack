function $E(a){var b=typeof a=="string"?document.getElementById(a):a;if(b!=null){return b}return null}function $C(a){return document.createElement(a)}function $N(a){return document.getElementsByName(a)}function $T(a,b){return a.getElementsByTagName(b)}function Jobs(a){this.option=a||{};this._jobTable=[[],[],[],[]]}function CustomsDialog(a,b){this.nodesPattern=/[^\{\}]+(?=\})/g;this._dialog=DialogManager.create(a,b);this.entity=this._dialog.entity;this.templateString="";this.nodes={};var c=this;(function(){c._dialog.onDrag=function(){if($IE6){if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left)-document.documentElement.scrollLeft,y:parseInt(this.entity.style.top)-document.documentElement.scrollTop})}}else{if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})}}c.onDrag()};c.updateNodes();if(c.nodes.btnClose){Core.Events.addEvent(c.nodes.btnClose,function(){var a=Core.Events.getEvent();if(a){a.cancelBubble=true}},"mousedown")}})();this._hiddenDialog=function(){c.hidden()};this._closeDialog=function(){c.close()}}function v6SendLog(a,b){}function v7sendLog(a,b,c){if(!a){return false}if(a.split("_").length==3){Lib.checkAuthor();if($isLogin){a+="_"+$UID}}if(typeof scope=="undefined"){window.scope={};scope.$pageid=""}b=b||scope.$pageid;c=c||"";Utils.Io.JsLoad.request("http://hits.sinajs.cn/A2/b.html?type="+a+"&pageid="+b+"&msg="+c,{onComplete:function(){}})}function msnrefreshWindow(){function j(a,c){trace("has Account");if(a){trace("alt:"+a);var d=$C("iframe");d.setAttribute("height",0);d.setAttribute("width",0);document.body.appendChild(d);d.src="https://login.sina.com.cn/sso/login.php?entry=blogmsn&service=blogmsn&alt="+encodeURIComponent(a)+"&savestate=7&returntype=TEXT";(function(){var a=arguments.callee;if(!a.count)a.count=0;if(a.count++>10){trace("放弃获取SUP");d.parentNode.removeChild(d);return}trace("尝试获取SUP, count:"+a.count);if(b("SUP")){trace("获取到 SUP"+b("SUP"));window.location.reload();return}setTimeout(a,1e3)})()}else{window.location.reload()}}function k(){trace("noAccount");window.location.href="http://blog.sina.com.cn/blog_rebuild/msn/interface/connect_user_confirm.php"}function l(a){var b=new Date;b.setTime(b.getTime()-1);document.cookie=a+"=_pass;path=/;domain=.blog.sina.com.cn;expires="+b.toGMTString()}function m(a){if(!a||a==""){return null}try{return window.eval("("+a+")")}catch(b){return null}}var a=Utils.Cookie.setCookie;var b=Utils.Cookie.getCookie;clearTimeout(msnRefreshTimer);var c=b("reg_token");if(c){trace("token find out...");a("reg_token","","","/",".blog.sina.com.cn")}else{trace("no token...");msnRefreshTimer=setTimeout(msnrefreshWindow,1e3);return}var d;var e;var f;var g=b("c_uid");var h=b("msnLinkCB");var i=b("AlT");a("msnLoginComeFrom",window.location.href,1,"/",".blog.sina.com.cn");if(h){d=h.split("_");e=d[0];f=d[1]}if(g!=e)return;switch(f){case"noCid":break;case"loginError":break;case"unlink":l("msnLinkCB");k(c);break;case"done":l("msnLinkCB");a("loginFromMsn","msn",24,"/",".blog.sina.com.cn");j(i,c);break;case"pass":break}}function main(){var a=new Jobs;a.add("blog7thCount");a.add("suda");a.add("loginStatus");a.start()}if(typeof Sina=="undefined"){Sina={}}Sina.pkg=function(a){if(!a||!a.length){return null}var b=a.split(".");var c=Sina;for(var d=b[0]=="Sina"?1:0;d<b.length;++d){c[b[d]]=c[b[d]]||{};c=c[b[d]]}return c};try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}(function(){var a=function(a,b){var c=a;return function(){return c.apply(b,arguments)}};var b="Debug";if(window[b]==null||typeof window[b].log=="undefined"){window[b]={cacheData:[],base_url:"http://sjs.sinajs.cn/bind2/",product:scope.$PRODUCT_NAME,baseColor:{1:{color:"#FFF",bgcolor:"#E00"},2:{color:"#F00"},3:{color:"#FFF000"},4:{color:"#0F0"},5:{color:"#FFF"}},fatal:function(a){this.addData(a,1)},error:function(a){this.addData(a,2)},warning:function(a){this.addData(a,3)},info:function(a){this.addData(a,4)},log:function(a){this.addData(a,5)},dir:function(a){this.addData(a,5)},addData:function(a,b,c,d){if(a==null){return}if(typeof a!="object"){a=a.toString()}var e={type:b||"5",color:c||this.baseColor[b].color,bgcolor:d||this.baseColor[b].bgcolor};this.cacheData.push([a,e]);if(this.initFinished==true){this.showCurrentData([a,e])}}};window.trace=a(window[b].log,window[b]);window.traceError=a(window[b].error,window[b])}})();Sina.pkg("Core");if(typeof Core=="undefined"){Core=Sina.Core}Sina.pkg("Core.Array");Core.Array.foreach=function(a,b){if(a==null&&a.constructor!=Array){return[]}var c=0,d=a.length,e=[];while(c<d){var f=b(a[c],c);if(f!==null){e[e.length]=f}c++}return e};Sina.pkg("Core.Events");(function(a){function j(a,b){var c;for(c in b){a[c]=b[c]}}var b=navigator.userAgent.toLowerCase();var c={$winXP:/windows nt 5.1/.test(b),$winVista:/windows nt 6.0/.test(b),$win7:/windows nt 6.1/.test(b),$macOS:/mac/.test(b)};var d={$OPERA:false,$IE6:false,$IE7:false,$IE8:false,$IE9:false,$SAFARI:false,$FF2:false,$FF3:false,$FF4:false,$FF:false,$CHROME:false,$TT:false,$360:false,$SOGO:false,$Maxthon:false};var e={$IE:0,$MOZ:false,$WEBKIT:false,$KHTML:false};if(/opera/.test(b)||a.opera){d.$OPERA=true}else if(/chrome\/(\S+)/.test(b)){d.$CHROME=true}else if(/safari\/(\S+)/.test(b)){d.$SAFARI=true}else if(/msie/.test(b)){e.$IE=true;if(/360se/.test(b)){d.$360=true}else if(/tencenttraveler/.test(b)){d.$TT=true}else if(/se\s\S+\smetasr\s\d+\.\d+/.test(b)){d.$SOGO=true}var f=b.match(/msie (\d+)/);var g=parseInt(f[1]);e.$IE=g;if(g===8){d.$IE8=true}else if(g===6){d.$IE6=true}else if(g===9){d.$IE9=true}else if(g===7){d.$IE7=true}else if(g===10){d.$IE10=true}}else if(/firefox/.test(b)){var f=b.match(/firefox\/(\d+)/);d.$FF=parseInt(f[1]);if(/firefox\/3/.test(b)){d.$FF3=true}else if(/firefox\/4/.test(b)){d.$FF4=true}else if(/firefox\/2/.test(b)){d.$FF2=true}}try{var h=window.external;d.$Maxthon=h.max_version?true:false}catch(i){}if(/applewebkit\/(\S+)/.test(b)){e.$WEBKIT=true}else if(/khtml\/(\S+)/.test(b)){e.$KHTML=true}else if(/rv:([^\)]+)\) gecko\/\d{8}/.test(b)){e.$MOZ=true}d.$MOBILE=/mobile/i.test(b);if(!d.$MOBILE){d.$MOBILE=/HTC/.test(b)}j(a,d);j(a,e);j(a,c)})(window);Core.Events.addEvent=function(a,b,c,d){var e=typeof a=="string"?$E(a):a;if(e==null){trace("addEvent 找不到对象："+a);return}if(typeof d=="undefined"){d=false}if(typeof c=="undefined"){c="click"}if(e.addEventListener){if(c=="mousewheel"&&$FF){c="DOMMouseScroll"}e.addEventListener(c,b,d);return true}else if(e.attachEvent){var f=e.attachEvent("on"+c,b);return true}else{e["on"+c]=b}};Core.Events.removeEvent=function(a,b,c){var d=$E(a);if(d==null){trace("removeEvent 找不到对象："+a);return}if(typeof b!="function"){return}if(typeof c=="undefined"){c="click"}if(d.addEventListener){d.removeEventListener(c,b,false)}else if(d.attachEvent){d.detachEvent("on"+c,b)}b[c]=null};Sina.pkg("Core.Function");Core.Function.bind3=function(a,b,c){c=c==null?[]:c;var d=a;return function(){return d.apply(b,c)}};Core.Array.findit=function(a,b){var c=-1;Core.Array.foreach(a,function(a,d){if(b==a){c=d}});return c};window.onerror=function(a,b,c){trace("Error occured:"+a+"<br/>file:"+b+"<br/>line:"+c+"<br/>");return true};Jobs.prototype={_registedJobTable:{},errorMsg:[],_registJob:function(a,b){this._registedJobTable[a]=b},error:function(a){Debug.error(a);this.errorMsg.push(a)},add:function(a,b){b=b||1;if(Core.Array.findit(this._jobTable[b],a)==-1){this._jobTable[b].push(a)}else{this.error("Error: Job <b>"+a+"</b> is existed now.")}},start:function(){if(this.option.onStart!=null){this.option.onStart()}var a=this._registedJobTable;var b=this._jobTable[1].concat(this._jobTable[2]);var c=this;this.fe=Core.Function.bind3(c.focus,c,[]);var d=function(){if(c._jobTable[3].length==0){if(c.option.onEnd!=null){c.option.onEnd()}return}Core.Events.addEvent(document.body,c.fe,"focus");Core.Events.addEvent(window,c.fe,"scroll");Core.Events.addEvent(document.body,c.fe,"mousemove");Core.Events.addEvent(document.body,c.fe,"mouseover")};this.queue(b,d)},focus:function(){var a=this;if(this.focusdown){Core.Events.removeEvent(document.body,a.fe,"focus");Core.Events.removeEvent(window,a.fe,"scroll");Core.Events.removeEvent(document.body,a.fe,"mousemove");Core.Events.removeEvent(document.body,a.fe,"mouseover");a.fe=null;return}this.focusdown=true;var b=this._jobTable[3];this.queue(b,this.option.onEnd)},queue:function(a,b){var c=this;var d=function(){return(new Date).valueOf()};var e=this._registedJobTable;var f=a.length;var g=0;var h=window.setInterval(function(){if(g>=f){clearInterval(h);h=null;if(b!=null){b()}return}var j=a[g];var k=e[j];g++;if(typeof k=="undefined"){c.error("<b>Job["+j+"] is undefiend!!!</b>");return}var l=true;var m=d();try{k.call()}catch(n){c.error("<b>Job["+j+"] failed!!!</b>"+n.message+"");if(b!=null){b()}l=false;throw n}finally{if(l){var o=d();Debug.info("<b>Job["+j+"] done in "+(o-m)+"ms.</b>")}}},10)},call:function(a,b){if(typeof this._registedJobTable[a]!="undefined"){this._registedJobTable[a].apply(this,b)}else{trace("<b>Job["+a+"] is undefined!!!</b>",{color:"#900",bgColor:"#FFF;"})}}};$registJob=function(a,b){Jobs.prototype._registJob(a,b)};$callJob=function(a){var b=[];if(arguments.length>1){Core.Array.foreach(arguments,function(a,c){b[c]=a});b.shift()}Jobs.prototype.call(a,b)};Sina.pkg("Utils");if(typeof Utils=="undefined"){Utils=Sina.Utils}Sina.pkg("Utils.Io");Sina.pkg("Core.System");(function(){var a=function(a,b){var c;try{if(typeof b!="undefined"){for(c in a){if(b[c]!=null){a[c]=b[c]}}}}finally{c=null;return a}};Core.System.parseParam=a})();Sina.pkg("Core.String");Utils.Url=function(a){a=a||"";this.url=a;this.query={};this.parse()};Utils.Url.prototype={parse:function(a){if(a){this.url=a}this.parseAnchor();this.parseParam()},parseAnchor:function(){var a=this.url.match(/\#(.*)/);a=a?a[1]:null;this._anchor=a;if(a!=null){this.anchor=this.getNameValuePair(a);this.url=this.url.replace(/\#.*/,"")}},parseParam:function(){var a=this.url.match(/\?([^\?]*)/);a=a?a[1]:null;if(a!=null){this.url=this.url.replace(/\?([^\?]*)/,"");this.query=this.getNameValuePair(a)}},getNameValuePair:function(a){var b={};a.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(a,c,d){if(c==""){return}b[c]=d||""});return b},getParam:function(a){return this.query[a]||""},clearParam:function(){this.query={}},setParam:function(a,b){if(a==null||a==""||typeof a!="string"){throw new Error("no param name set")}this.query=this.query||{};this.query[a]=b},setParams:function(a){this.query=a},serialize:function(a){var b=[];for(var c in a){if(a[c]==null||a[c]==""){b.push(c+"=")}else{b.push(c+"="+a[c])}}return b.join("&")},toString:function(){var a=this.serialize(this.query);return this.url+(a.length>0?"?"+a:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(a){return this.anchor?"#"+this.serialize(this.anchor):a?"#":""}};Core.String.encodeDoubleByte=function(a){if(typeof a!="string"){return a}return encodeURIComponent(a)};Utils.Io.JsLoad={};(function(){function a(a,c){b(a,c);var d=a.urls;var e,f=d.length;for(e=0;e<f;e++){var g=$C("script");g.src=d[e].url;g.charset=d[e].charset;g.onload=g.onerror=g.onreadystatechange=function(){if(g&&g.readyState&&g.readyState!="loaded"&&g.readyState!="complete"){return}c.script_loaded_num++;g.onload=g.onreadystatechange=g.onerror=null;if(!1!==a.isRemove){g.src="";g.parentNode.removeChild(g)}g=null};document.getElementsByTagName("head")[0].appendChild(g)}}function b(a,b){var c=a.urls;var d=a.GET;var e,f=c.length;var g,h,i,j;for(e=0;e<f;e++){j=window.parseInt(Math.random()*1e8);h=new Utils.Url(c[e].url);for(g in d){if(a.noencode==true){h.setParam(g,d[g])}else{h.setParam(g,Core.String.encodeDoubleByte(d[g]))}}i=h.getParam("varname")||"requestId_"+j;if(a.noreturn!=true){h.setParam("varname",i)}b.script_var_arr.push(i);c[e].url=h.toString();c[e].charset=c[e].charset||a.charset}}function c(b,c){var d={isRemove:!0,urls:[],charset:"utf-8",noreturn:false,noencode:false,timeout:-1,POST:{},GET:{},onComplete:null,onException:null};var e={script_loaded_num:0,is_timeout:false,is_loadcomplete:false,script_var_arr:[]};d.urls=typeof b=="string"?[{url:b}]:b;Core.System.parseParam(d,c);a(d,e);(function(){if(d.noreturn==true&&d.onComplete==null){return}var a,b=[];if(e.script_loaded_num==d.urls.length){e.is_loadcomplete=true;if(d.onComplete!=null){for(a=0;a<e.script_var_arr.length;a++){b.push(window[e.script_var_arr[a]])}if(e.script_var_arr.length<2){d.onComplete(b[0])}else{d.onComplete(b)}}return}if(e.is_timeout==true){return}setTimeout(arguments.callee,50)})();if(d.timeout>0){setTimeout(function(){if(e.is_loadcomplete!=true){if(d.onException!=null){d.onException()}e.is_timeout=true}},d.timeout)}}Utils.Io.JsLoad.request=function(a,b){new c(a,b)}})();Core.System.winSize=function(a){var b,c;if(a){target=a.document}else{target=document}if(self.innerHeight){if(a){target=a.self}else{target=self}b=target.innerWidth;c=target.innerHeight}else if(target.documentElement&&target.documentElement.clientHeight){b=target.documentElement.clientWidth;c=target.documentElement.clientHeight}else if(target.body){b=target.body.clientWidth;c=target.body.clientHeight}return{width:b,height:c}};Core.Events.getEvent=function(){return window.event};if(!$IE||$IE>8){Core.Events.getEvent=function(){if(!$IE&&window.event){return window.event}var a=arguments.callee.caller;var b;var c=0;while(a!=null&&c<40){b=a.arguments[0];if(b&&(b.constructor==Event||b.constructor==MouseEvent)){return b}c++;a=a.caller}return b}}Core.Events.stopEvent=function(a){var b=a?a:Core.Events.getEvent();if(b!=null){b.cancelBubble=true;b.returnValue=false}};if(!$IE||$IE>8){Core.Events.stopEvent=function(a){var b=a?a:Core.Events.getEvent();if(b!=null){b.preventDefault();b.stopPropagation()}}}Sina.pkg("Core.Dom");Core.Dom.setStyle=function(a,b,c){switch(b){case"opacity":a.style.filter="alpha(opacity="+c*100+")";if(!a.currentStyle||!a.currentStyle.hasLayout){a.style.zoom=1}break;case"float":b="styleFloat";default:a.style[b]=c}};if(!$IE||!($IE<9)){Core.Dom.setStyle=function(a,b,c){if(b=="float"){b="cssFloat"}a.style[b]=c}}Sina.pkg("Ui");if(typeof Ui=="undefined"){Ui=Sina.Ui}Core.Function.bind2=function(a,b){var c=a;return function(){return c.apply(b,arguments)}};Function.prototype.bind2=function(a){var b=this;return function(){return b.apply(a,arguments)}};Ui.Template=function(a){this.tmpl=a;this.pattern=/(#\{(.*?)\})/g};Ui.Template.prototype={evaluate:function(a){return this.tmpl.replace(this.pattern,function(){return a[arguments[2]]||""})},evaluateMulti:function(a,b){var c=[];Core.Array.foreach(a,Core.Function.bind2(function(d,e){e=b?a.length-e:e;c[e]=this.evaluate(d)},this));return c.join("")}};var Layer=function(a){this.entity=null;this.ifm=null;var b=this;var c={width:0,height:0,x:0,y:0,isFixed:false,uniqueID:"",entityID:"",contentID:"",template:a,templateString:"",nodes:{}};this.getProperty=function(){return c};(function(){var c=b.getProperty();c.uniqueID="_"+b.getUniqueID();c.entityID=c.uniqueID+"_entity";c.contentID=c.uniqueID+"_content";b.setTemplate(c.template);c.width=parseInt(b.entity.style.width);if($IE6){b.addIframe()}document.body.appendChild(b.entity);b.hidden()})();this._ie6Fixed=function(){b.entity.style.left=document.documentElement.scrollLeft+b.getProperty().x+"px";b.entity.style.top=document.documentElement.scrollTop+b.getProperty().y+"px";if(b.ifm){b.ifm.style.left=document.documentElement.scrollLeft+b.getProperty().x+"px";b.ifm.style.top=document.documentElement.scrollTop+b.getProperty().y+"px"}}};Layer.prototype={setTemplate:function(a){var b=this.getProperty();if(this.entity){this.entity.parentNode.removeChild(this.entity);this.entity=null}if(typeof a=="object"){b.nodes=a;if(this.entity){this.entity.parentNode.removeChild(this.entity);this.entity=null}this.entity=b.nodes.entity;document.body.appendChild(this.entity);if(!b.nodes.entity||!b.nodes.content){throw new Error("[layer.js] missing entity or content in layer nodes")}else{this.entity.style.position="absolute";this.entity.style.zIndex="1024";this.entity.style.left=b.x+"px";this.entity.style.top=b.y+"px"}return}var c=/[^\{\}]+(?=\})/g;b.template=a;b.templateString=b.template.match(c);this.entity=$C("div");var d=$C("div");var e=new Ui.Template(b.template);d.innerHTML=e.evaluate(this.getNodes("i"));document.body.appendChild(d);if(!$E(b.entityID)||!$E(b.contentID)){throw new Error("[layer.js] there missing #{entityID} or #{contentID} in layer template")}else{this.entity=$E(b.entityID);this.entity.style.position="absolute";this.entity.style.zIndex="1024";this.entity.style.left=b.x+"px";this.entity.style.top=b.y+"px";document.body.replaceChild(this.entity,d);d=null}b.nodes=this.getNodes()},setSize:function(a){var b=this.getProperty();Core.System.parseParam(b,a);if(a.width){b.nodes.content.style.width=b.width+"px"}if(a.height){b.nodes.content.style.height=b.height+"px"}this.updateIfmSize()},setPosition:function(a){var b=this.getProperty();Core.System.parseParam(b,a);this.entity.style.left=b.x+"px";this.entity.style.top=b.y+"px";if($IE6&&b.isFixed){this.entity.style.left=b.x+document.documentElement.scrollLeft+"px";this.entity.style.top=b.y+document.documentElement.scrollTop+"px"}if(this.ifm){this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top}},getWidth:function(){var a=this.entity.style.display;var b=this.entity.style.visibility;this.entity.style.visibility="hidden";this.entity.style.display="";w=this.entity.offsetWidth;this.entity.style.display=a;this.entity.style.visibility=b;return w},getHeight:function(){var a=this.entity.style.display;var b=this.entity.style.visibility;this.entity.style.visibility="hidden";this.entity.style.display="";h=this.entity.offsetHeight;this.entity.style.display=a;this.entity.style.visibility=b;return h},getX:function(){return parseInt(this.entity.style.left)},getY:function(){return parseInt(this.entity.style.top)},updateIfmSize:function(){if(this.ifm){var a=this;a.ifm.style.width=a.entity.offsetWidth+"px";a.ifm.style.height=a.entity.offsetHeight+"px"}},setFixed:function(a){var b=this.getProperty();b.isFixed=a;var c=this;if($IE6){c.entity.style.position="absolute";if(b.isFixed){c._ie6Fixed();Core.Events.addEvent(window,c._ie6Fixed,"scroll")}else{Core.Events.removeEvent(window,c._ie6Fixed,"scroll")}return}if(b.isFixed&&$FF2){c.updateFixed();return}this.entity.style.position=b.isFixed?"fixed":"absolute"},updateFixed:function(){var a=this.getProperty();if(a.isFixed&&$FF2){var b=this;var c=a.x,d=a.y;b.entity.style.position="absolute";b.setPosition({x:a.x+document.documentElement.scrollLeft,y:a.y+document.documentElement.scrollTop});b.entity.style.position="fixed";b.setPosition({x:c,y:d})}},show:function(){this.entity.style.display="";if(this.ifm){this.ifm.style.display="";this.updateIfmSize()}},hidden:function(){this.entity.style.display="none";if(this.ifm){this.ifm.style.display="none"}},addIframe:function(){this.ifm=$C("iframe");this.ifm.style.position="absolute";this.ifm.style.zIndex="1024";this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top;document.body.appendChild(this.ifm);Core.Dom.setStyle(this.ifm,"opacity",0)},getNodes:function(a){var b=this.getProperty();var c=a||"o";var d;var e={};var f=b.templateString;if(f){for(d=0;d<f.length;d++){var g=f[d];switch(c){case"o":e[g]=$E(b.uniqueID+"_"+g);break;case"i":e[g]=b.uniqueID+"_"+g;break}}}return"entity"in e?e:b.nodes},getUniqueID:function(){return parseInt(Math.random()*1e4).toString()+(new Date).getTime().toString()},setContent:function(a){var b=this.getProperty();if(a){b.nodes.content.innerHTML=a}}};Core.Dom.getStyle=function(a,b){switch(b){case"opacity":var c=100;try{c=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(d){try{c=a.filters("alpha").opacity}catch(d){}}return c/100;case"float":b="styleFloat";default:var e=a.currentStyle?a.currentStyle[b]:null;return a.style[b]||e}};if(!$IE||$IE>8){Core.Dom.getStyle=function(a,b){if(b=="float"){b="cssFloat"}try{var c=document.defaultView.getComputedStyle(a,"")}catch(d){traceError(d)}return a.style[b]||c?c[b]:null}}(function(){function c(a){try{var b=a.constructor.toString().toLowerCase();return b.slice(b.indexOf("function")+9,b.indexOf("()"))}finally{b=null}}function d(a,b){var c,d,e=[];d=b.length;for(c=0;c<d;c++){e[e.length]=parseFloat(Core.Dom.getStyle(a,b[c]))}return e}function e(a){return c(a)!="array"?[a]:a}function f(a,b){try{var d=c(a);var e=[],f=[],h,i,j;if(d!="array"){j=g(a);j[1]=b=="opacity"?"":j[1];e=[j[0]];f=[j[1]]}else{i=a.length;for(h=0;h<i;h++){j=g(a[h]);j[1]=b[h]=="opacity"?"":j[1];e[e.length]=j[0];f[f.length]=j[1]}}return[e,f]}finally{d=e=f=h=i=j=null}}function g(a){try{var b=/(-?\d.?\d*)([a-z%]*)/i.exec(a);return[b[1],b[2]?b[2]:"px"]}finally{b=null}}function j(a){try{var c=b(a);var d;if(h[c]!=true){d=new k;i[c]={node:a,func:d};h[c]=true;return d}else{return i[c].func}}finally{c=d=null}}function k(){this._timer=null}function l(a,b,c,d,e,f){var g=j(a);g.start.apply(g,arguments)}var a={simple:function(a,b,c,d){return c*a/d+b},backEaseIn:function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},backEaseOut:function(a,b,c,d,e,f){var g=1.70158;return c*((a=a/d-1)*a*((g+1)*a+g)+1)+b},backEaseInOut:function(a,b,c,d,e,f){var g=1.70158;if((a/=d/2)<1){return c/2*a*a*(((g*=1.525)+1)*a-g)+b}return c/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b},bounceEaseOut:function(a,b,c,d){if((a/=d)<1/2.75){return c*7.5625*a*a+b}else if(a<2/2.75){return c*(7.5625*(a-=1.5/2.75)*a+.75)+b}else if(a<2.5/2.75){return c*(7.5625*(a-=2.25/2.75)*a+.9375)+b}else{return c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}},bounceEaseIn:function(b,c,d,e){return d-a.bounceEaseOut(e-b,0,d,e)+c},bounceEaseInOut:function(b,c,d,e){if(b<e/2){return a.bounceEaseIn(b*2,0,d,e)*.5+c}else{return a.bounceEaseOut(b*2-e,0,d,e)*.5+d*.5+c}},strongEaseInOut:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},regularEaseIn:function(a,b,c,d){return c*(a/=d)*a+b},regularEaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},regularEaseInOut:function(a,b,c,d){if((a/=d/2)<1){return c/2*a*a+b}return-c/2*(--a*(a-2)-1)+b},strongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},strongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},strongEaseInOut:function(a,b,c,d){if((a/=d/2)<1){return c/2*a*a*a*a*a+b}return c/2*((a-=2)*a*a*a*a+2)+b},elasticEaseIn:function(a,b,c,d,e,f){if(a==0){return b}if((a/=d)==1){return b+c}if(!f){f=d*.3}if(!e||e<Math.abs(c)){e=c;var g=f/4}else{var g=f/(2*Math.PI)*Math.asin(c/e)}return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f))+b},elasticEaseOut:function(a,b,c,d,e,f){if(a==0){return b}if((a/=d)==1){return b+c}if(!f){f=d*.3}if(!e||e<Math.abs(c)){e=c;var g=f/4}else{var g=f/(2*Math.PI)*Math.asin(c/e)}return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+c+b},elasticEaseInOut:function(a,b,c,d,e,f){if(a==0){return b}if((a/=d/2)==2){return b+c}if(!f){var f=d*.3*1.5}if(!e||e<Math.abs(c)){var e=c;var g=f/4}else{var g=f/(2*Math.PI)*Math.asin(c/e)}if(a<1){return-.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b}return e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)*.5+c+b}};var b=function(a){return a.uniqueID};if(!$IE){b=function(a){try{var b;if(a.getAttribute("uniqueID")==null){b="moz__id"+parseInt(Math.random()*100)+"_"+(new Date).getTime();a.setAttribute("uniqueID",b);return b}return a.getAttribute("uniqueID")}finally{b=null}}}var h={};var i={};k.prototype.start=function(b,c,g,h,i,j){this.reset();j=j||{};if(j.before){this._func.before=j.before}if(j.end){this._func.end=j.end}if(j.tween){this._func.tween=j.tween}var k=e(c);var l=d(b,k);var m=f(g,k);this._node=b;this._property=k;this._endingvalue=m[0];this._suffixvalue=m[1];this._startvalue=l;this._end=false;this._fps=0;if(h!=null){this._seconds=h}if(a[i]!=null){this._animation=a[i]}this._starttime=(new Date).getTime();this._func.before();this._timer=setInterval(Core.Function.bind3(this.play,this),10)};k.prototype.play=function(){var a=((new Date).getTime()-this._starttime)/1e3;var b,c,d=this._property.length;if(a>this._seconds){a=this._seconds}for(b=0;b<d;b++){c=this._animation(a,this._startvalue[b],this._endingvalue[b]-this._startvalue[b],this._seconds);Core.Dom.setStyle(this._node,this._property[b],c+this._suffixvalue[b])}this._fps++;this._func.tween();if(a==this._seconds){this.stop()}};k.prototype.stop=function(){clearInterval(this._timer);this._end=true;this._func.end()};k.prototype.reset=function(){clearInterval(this._timer);this._end=false;this._node=null;this._property=[];this._startvalue=[];this._endingvalue=[];this._suffixvalue=[];this._fps=0;this._seconds=.5;this._animation=a.simple;this._func={end:function(){},tween:function(){},before:function(){}}};l.stop=function(a){j(a).stop()};l.isTween=function(a){return!j(a)._end};Ui.tween=l})();var DialogDisplaySet={alpha1:{show:function(a,b,c){var d=0,e=0,f=parseInt(a.style.top)-b;a.style.top=f;Core.Dom.setStyle(a,"opacity",d);a.style.display="";var g=window.setInterval(function(){if(d<=1){Core.Dom.setStyle(a,"opacity",d)}if(e<=f+b){a.style.top=f+e+"px"}e+=1.5;d+=.05;if(d>.9&&parseInt(a.style.top)>=f+b){window.clearInterval(g);if(c){c()}}},10)},hidden:function(a,b,c){var d=1;var e=parseInt(a.style.top);var f=e-b;var g=e;var h=window.setInterval(function(){if(d>=0){Core.Dom.setStyle(a,"opacity",d)}if(g>=f){a.style.top=g+"px"}g-=1.5;d-=.05;if(d<=0&&g<f){window.clearInterval(h);if(c){c()}}},10)}},alpha:{show:function(a,b,c){Core.Dom.setStyle(a,"opacity",.3);a.style.display="";a.style.top=parseInt(a.style.top)-b+"px";var d=parseInt(a.style.top)+b;Ui.tween(a,["top","opacity"],[d,.9],.4,"simple",{end:c})},hidden:function(a,b,c){var d=parseInt(a.style.top)-b;Ui.tween(a,["top","opacity"],[d,0],.2,"simple",{end:c})}},fallDown:{show:function(a,b,c,d){a.style.display="";a.style.top=b+"px";Ui.tween(a,"top",c,.6,"bounceEaseOut",{end:d})},hidden:function(a,b,c,d){a.style.display="";a.style.top=b+"px";Ui.tween(a,"top",c,.6,"strongEaseIn",{end:d})}}};Core.Events.fixEvent=function(a){if(typeof a=="undefined")a=window.event;if(!a.target){a.target=a.srcElement;a.pageX=a.x;a.pageY=a.y}if(typeof a.layerX=="undefined")a.layerX=a.offsetX;if(typeof a.layerY=="undefined")a.layerY=a.offsetY;return a};var Drag3=function(a,b,c){var d=this;this.beDragObj=a;this.movedObjs=b||this.beDragObj;this.dragMode=c||"normal";this.canDrag=true;this.isLock=false;this.lockArea={left:0,right:0,top:0,bottom:0};this.dragSet={normal:function(){d.normalDrag()},border:function(){d.borderDrag()},opacity:function(){d.opacityDrag()}};this.dragObjsFunc=function(){d.onDrag();d.dragObjs()};(function(){d.beDragObj.style.MozUserSelect="none";Core.Events.addEvent(d.beDragObj,function(){return false},"selectstart");Core.Events.addEvent(d.beDragObj,function(){return false},"drag");for(var b=0;b<d.movedObjs.length;b++){if(d.movedObjs[b]!=d.beDragObj){d.movedObjs[b].style.position="absolute";if(!d.movedObjs[b].style.left){d.movedObjs[b].style.left=d.movedObjs[b].offsetLeft+"px"}if(!d.movedObjs[b].style.top){d.movedObjs[b].style.top=d.movedObjs[b].offsetTop+"px"}}}Core.Events.addEvent(d.beDragObj,d.dragSet[d.dragMode],"mousedown");if($IE){Core.Events.addEvent(d.beDragObj,function(){Core.Events.removeEvent(d.beDragObj,d.dragObjsFunc,"mousemove");d.beDragObj.releaseCapture();d.onDragEnd()},"mouseup")}else{Core.Events.addEvent(document,function(){Core.Events.removeEvent(document,d.dragObjsFunc,"mousemove");d.onDragEnd()},"mouseup")}})()};Drag3.prototype={capture:function(){this.canDrag=true},release:function(){this.canDrag=false},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},dragObjs:function(){e=Core.Events.getEvent();for(var a=0;a<this.movedObjs.length;a++){if(this.isLock){if(e.clientX-this.movedObjs[a].deltaX<this.lockArea.left){this.movedObjs[a].style.left=this.lockArea.left+"px"}else{if(e.clientX-this.movedObjs[a].deltaX>this.lockArea.right-this.movedObjs[a].offsetWidth){this.movedObjs[a].style.left=this.lockArea.right-this.movedObjs[a].offsetWidth+"px"}else{this.movedObjs[a].style.left=e.clientX-this.movedObjs[a].deltaX+"px"}}if(e.clientY-this.movedObjs[a].deltaY<this.lockArea.top){this.movedObjs[a].style.top=this.lockArea.top+"px"}else{if(e.clientY-this.movedObjs[a].deltaY>this.lockArea.bottom-this.movedObjs[a].offsetHeight){this.movedObjs[a].style.top=this.lockArea.bottom-this.movedObjs[a].offsetHeight+"px"}else{this.movedObjs[a].style.top=e.clientY-this.movedObjs[a].deltaY+"px"}}}else{this.movedObjs[a].style.left=e.clientX-this.movedObjs[a].deltaX+"px";this.movedObjs[a].style.top=e.clientY-this.movedObjs[a].deltaY+"px"}}},normalDrag:function(){var a=this;e=Core.Events.getEvent();for(var b=0;b<a.movedObjs.length;b++){a.movedObjs[b].deltaX=e.clientX-parseInt(a.movedObjs[b].style.left);a.movedObjs[b].deltaY=e.clientY-parseInt(a.movedObjs[b].style.top)}if(a.canDrag){if($IE){a.beDragObj.setCapture();Core.Events.addEvent(a.beDragObj,a.dragObjsFunc,"mousemove")}else{Core.Events.addEvent(document,a.dragObjsFunc,"mousemove")}}a.onDragStart()},borderDrag:function(a,b){},opacityDrag:function(a,b){}};Ui.Drag3=Drag3;var Dialog=function(a){var b=this;b.entity=null;b.ifm=null;var c={id:"",x:0,y:0,width:0,height:0,isFixed:false,layer:new Layer(a),template:a,canDrag:false,dragEntity:null,name:"",uniqueID:"",isShow:false,nodes:{},focusNode:null,displayMode:"normal",_modeDisplayRuning:false,enabled:true};this.getProperty=function(){return c};(function(){var c=b.getProperty();var d;c.uniqueID=c.layer.getProperty().uniqueID;c.id=c.uniqueID+"_dialog";c.nodes=b.getNodes();b.entity=c.layer.entity;b.ifm=c.layer.ifm;c.width=parseInt(b.entity.style.width);if(c.nodes.titleBar){c.dragEntity=new Ui.Drag3(c.nodes.titleBar,b.ifm?[b.ifm,b.entity]:[b.entity]);c.nodes.titleBar.style.cursor="move";Core.Events.addEvent(c.nodes.titleBar,function(){return false},"selectstart");c.dragEntity.onDrag=function(){b.onDrag()}}Core.Events.addEvent(window,function(){if(c.isShow&&c.isFixed){var a=Core.System.winSize();var d=a.width/2-b.getWidth()/2;var e=a.height/2-b.getHeight()/2;d=d<0?0:d;e=e<0?0:e;b.setPosition({x:d,y:e})}},"resize")})()};Dialog.prototype={setPosition:function(a){var b=this.getProperty();Core.System.parseParam(b,a);this.getProperty().layer.setPosition(a)},setSize:function(a){var b=this.getProperty();Core.System.parseParam(b,a);b.layer.setSize(a)},setFixed:function(a){var b=this.getProperty();b.isFixed=a;this.getProperty().layer.setFixed(b.isFixed)},setContent:function(a){var b=this.getProperty();this.getProperty().layer.setContent(a)},setTemplate:function(a){var b=this.getProperty();b.template=a;b.layer.setTemplate(b.template)},setDrag:function(a){var b=this.getProperty();b.canDrag=a;if(b.canDrag){b.dragEntity.capture()}else{b.dragEntity.release()}},getWidth:function(){return this.getProperty().layer.getWidth()},getHeight:function(){return this.getProperty().layer.getHeight()},getX:function(){return this.getProperty().layer.getX()},getY:function(){return this.getProperty().layer.getY()},show:function(a){var b=this.getProperty();var c=this;b.isShow=true;if(this.ifm){this.ifm.style.display=""}this.onShow();if(b.displayMode=="normal"||a=="normal"){this.entity.style.display=""}else{b._modeDisplayRuning=true;b.enabled=false;this._showWithMode(function(){b._modeDisplayRuning=false;b.enabled=true;if(c.onDisplaied){c.onDisplaied()}})}},close:function(a){var b=this;var c=this.getProperty();if(c.displayMode=="normal"||a=="normal"){c.isShow=false;c.layer.hidden();this.destroy();this.onClose();if(b.onDisplayFinished){b.onDisplayFinished()}}else if(!c._modeDisplayRuning){c._modeDisplayRuning=true;c.enabled=false;this._hiddenWithMode(function(){c.isShow=false;c.layer.hidden();c._modeDisplayRuning=false;c.enabled=true;b.destroy();b.onClose();if(b.onDisplayFinished){b.onDisplayFinished()}})}},hidden:function(a){var b=this;var c=this.getProperty();if(c.displayMode=="normal"||a=="normal"){c.isShow=false;c.layer.hidden();this.onHidden();if(b.onDisplayFinished){b.onDisplayFinished()}}else if(!c._modeDisplayRuning){c._modeDisplayRuning=true;c.enabled=false;this._hiddenWithMode(function(){c.isShow=false;c.layer.hidden();b.onHidden();c._modeDisplayRuning=false;c.enabled=true;if(b.onDisplayFinished){b.onDisplayFinished()}})}},_showWithMode:function(a){var b=this.getProperty();var c=Core.System.winSize();var d=this;switch(b.displayMode){case"alpha":DialogDisplaySet["alpha"].show(this.entity,20,a);break}},_hiddenWithMode:function(a){var b=this.getProperty();var c=this;var d=Core.System.winSize();switch(b.displayMode){case"alpha":DialogDisplaySet["alpha"].hidden(this.entity,20,a);break}},destroy:function(){try{if(this.getProperty().nodes.iframe){this.getProperty().nodes.iframe.src=""}}catch(a){}this.entity&&this.entity.parentNode.removeChild(this.entity);this.entity=null;if(this.ifm){this.ifm.parentNode.removeChild(this.ifm);this.ifm=null}},onShow:function(){},onClose:function(){},onHidden:function(){},onDrag:function(){},onDisplaied:function(){},onDisplayFinished:function(){},setAreaLocked:function(a){var b=this.getProperty();b.dragEntity.isLock=a;var c=this;if(a){c._updateLockArea();Core.Events.addEvent(window,function(){c._updateLockArea()},"resize")}},_updateLockArea:function(){var a=this.getProperty();var b=Core.System.winSize();if(a.isFixed){if($IE6){a.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+b.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+b.height};Core.Events.addEvent(window,function(){a.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+b.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+b.height}},"scroll");Core.Events.addEvent(window,function(){a.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+b.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+b.height}},"resize")}else{a.dragEntity.lockArea={left:0,right:b.width,top:0,bottom:b.height}}}else{a.dragEntity.lockArea={left:0,right:document.documentElement.scrollWidth,top:0,bottom:document.documentElement.scrollHeight}}},updateFixed:function(){this.getProperty().layer.updateFixed()},getNodes:function(a){return this.getProperty().layer.getNodes(a)},setFocus:function(){var a=this.getProperty();if(a.focusNode&&a.focusNode.style.display!="none"){try{a.focusNode.focus()}catch(b){}}else if(this.entity.style.display!="none"){this.entity.focus()}},getUniqueID:function(){return this.getProperty().layer.getUniqueID()}};var DialogManager={dialogs:[],activeDialog:{},backShadow:null,create:function(a,b){var c=this;var d=new Dialog(a);this.dialogs.push(d);this.activeDialog=d;d.name=b||d.getUniqueID();d.entity.style.zIndex=1024;d.onDrag=function(){if($IE6){if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left)-document.documentElement.scrollLeft,y:parseInt(this.entity.style.top)-document.documentElement.scrollTop})}}else{if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})}}};d.onClose=function(){c.removeDialog(this.name);c.updateActiveDialog();c.updateShadow();if(c.activeDialog){c.activeDialog.setFocus()}};d.onHidden=function(){this.isHidden=true;if(this==c.activeDialog){c.activeDialog=null}c.updateActiveDialog();c.updateShadow();if(c.activeDialog){c.activeDialog.setFocus()}};d.onShow=function(){if(this.isHidden){this.isHidden=false;var a,b=c.dialogs.length;for(a=0;a<b;a++){if(c.dialogs[a]==this){document.body.appendChild(c.dialogs[a].entity);c.dialogs.push(c.dialogs[a]);c.dialogs.splice(a,1)}}c.activeDialog=this;c.backShadow.show();c.updateShadow()}};if(this.backShadow.isShow){this.updateShadow()}else{this.backShadow.show()}d.hidden();return d},getDialog:function(a){var b=0,c=this.dialogs.length;for(b=0;b<c;b++){if(this.dialogs[b].name==a){return this.dialogs[b]}}},removeDialog:function(a){var b=0,c=this.dialogs.length;for(b=c-1;b>=0;b--){if(this.dialogs[b].name==a){this.dialogs.splice(b,1);this.activeDialog=this.dialogs[this.dialogs.length-1];break}}},updateActiveDialog:function(){var a,b=this.dialogs.length;for(a=b-1;a>=0;a--){if(!this.dialogs[a].isHidden){this.activeDialog=this.dialogs[a];break}}},updateShadow:function(){if(this.activeDialog&&!this.activeDialog.isHidden){this.backShadow.insertBefore(this.activeDialog.entity);this.activeDialog.updateFixed()}else{this.backShadow.hidden()}},close:function(a){if(!a){if(this.activeDialog){this.activeDialog.close()}return}var b,c=this.dialogs.length;for(b=c-1;b>=0;b--){if(this.dialogs[b].name==a){this.dialogs[b].close();break}}}};var BackShadow=function(a){this.entity=null;this.isShow=false;this._ie6Fixed=function(){if(b.entity){b.entity.style.top=document.documentElement.scrollTop+"px";b.entity.style.left=document.documentElement.scrollLeft+"px";if(b.ifm){b.ifm.style.top=b.entity.style.top;b.ifm.style.left=b.entity.style.left}b.updateSize()}};var b=this;(function(){b.entity=$C("div");b.entity.style.position="absolute";b.entity.style.width=b.getAreaWidth()+"px";b.entity.style.height=b.getAreaHeight()+"px";b.entity.style.left="0px";b.entity.style.top="0px";b.entity.style.zIndex=1024;b.entity.style.backgroundColor="black";document.body.appendChild(b.entity);b._setOpacity(b.entity,isNaN(a)?.5:a);if($IE6){b.entity.style.top=document.documentElement.scrollTop+"px";b.addIframe()}Core.Events.addEvent(window,function(){if(b.entity){if($IE6&&b.isShow){document.documentElement.scrollLeft=0;b._ie6Fixed()}setTimeout(function(){b.updateSize()},1)}},"resize");b.setFixed(true);b.hidden()})()};BackShadow.prototype={show:function(){this.entity.style.display="";if(this.ifm){this.ifm.style.display=""}this.isShow=true;this.onShow()},hidden:function(){this.entity.style.display="none";if(this.ifm){this.ifm.style.display="none"}this.isShow=false;this.onHidden()},close:function(){this.hidden();this.destroy()},destroy:function(){Core.Events.removeEvent(window,this._ie6Fixed,"scroll");this.entity.parentNode.removeChild(this.entity);this.entity=null;if(this.ifm){this.ifm.parentNode.removeChild(this.ifm);this.ifm=null}},addIframe:function(){this.ifm=$C("iframe");this._setOpacity(this.ifm,0);this.ifm.style.position="absolute";this.ifm.style.zIndex=this.entity.style.zIndex;this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top;this.ifm.style.width=this.entity.style.width;this.ifm.style.height=this.entity.style.height;document.body.insertBefore(this.ifm,this.entity)},insertBefore:function(a){document.body.insertBefore(this.entity,a);if(this.ifm){document.body.insertBefore(this.ifm,this.entity)}},updateSize:function(){this.entity.style.width=this.getAreaWidth()+"px";this.entity.style.height=this.getAreaHeight()+"px";if(this.ifm){this.ifm.style.width=this.getAreaWidth()+"px";this.ifm.style.height=this.getAreaHeight()+"px"}},getAreaHeight:function(){return document.documentElement.clientHeight},getAreaWidth:function(){return document.documentElement.clientWidth},setFixed:function(a){if($IE6){var b=this;if(a){b._ie6Fixed();Core.Events.addEvent(window,b._ie6Fixed,"scroll")}else{Core.Events.removeEvent(window,b._ie6Fixed,"scroll")}}else{this.entity.style.position=a?"fixed":"absolute"}},_setOpacity:function(a,b){if($IE&&$IE<=9){a.style.filter="alpha(opacity="+b*100+")"}else{a.style.opacity=b}},onShow:function(){},onHidden:function(){}};CustomsDialog.prototype={isSetMiddle:false,setContent:function(a){var b=a;this.templateString=b.match(this.nodesPattern);var c=new Ui.Template(b);this.nodes.content.innerHTML=c.evaluate(this.getContentNodes("i"));this.updateNodes()},setTitle:function(a){if(this.nodes.titleName){this.nodes.titleName.innerHTML=a}},setHelp:function(a){if(this.nodes.btnHelp){if(a){this.nodes.btnHelp.href=a}else{this.nodes.btnHelp.innerHTML=""}}},setClose:function(a){var b=this;if(b.nodes.btnClose){a=a||"hidden";switch(a){case"hidden":Core.Events.addEvent(b.nodes.btnClose,b._hiddenDialog,"click");break;case"close":Core.Events.addEvent(b.nodes.btnClose,b._closeDialog,"click");break}}},setPosition:function(a,b){this._dialog.setPosition({x:a,y:b})},setMiddle:function(){var a=Core.System.winSize();var b,c;var d=this._dialog.entity.style.display;this._dialog.setPosition({x:-1e4});this._dialog.entity.style.display="";var e=this.nodes.titleBar?this.nodes.titleBar.offsetHeight:0;var f=a.height-this.nodes.content.offsetHeight-e;var g=(Math.sqrt(5)-1)/2;var h=1;var i=f*g/(g+h);b=a.width/2-this.nodes.content.offsetWidth/2;b=b<0?0:b;c=i<0?0:i;if(!this._dialog.getProperty().isFixed){b=b+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);c=c+Math.max(document.documentElement.scrollTop,document.body.scrollTop)}this._dialog.entity.style.display=d;this._dialog.setPosition({x:b,y:c});this.isSetMiddle=true},setSize:function(a,b){this._dialog.setSize({width:a,height:b})},setFixed:function(a){this._dialog.setFixed(a)},setAreaLocked:function(a){this._dialog.setAreaLocked(a)},setFocusNode:function(a){this._dialog.getProperty().focusNode=a},setDisplayMode:function(a){this._dialog.getProperty().displayMode=a||"normal"},getWidth:function(){return this._dialog.getProperty().width},getHeight:function(){return this._dialog.getProperty().height},getX:function(){return this._dialog.getProperty().x},getY:function(){return this._dialog.getProperty().y},show:function(){if(this.isSetMiddle){this.setMiddle()}this._dialog.show();this.onShow()},hidden:function(){this._dialog.hidden();this.onHidden()},close:function(){var a=this;a._dialog.close();a.onClose();if(a.nodes.btnClose){Core.Events.removeEvent(a.nodes.btnClose,a._hiddenDialog,"click");Core.Events.removeEvent(a.nodes.btnClose,a._CloseDialog,"click")}},updateNodes:function(){this.nodes=this._dialog.getNodes();var a=this.getContentNodes();for(k in a){this.nodes[k]=a[k]}},getContentNodes:function(a){var b=a||"o";var c;var d={};var e=this.templateString;if(e){for(c=0;c<e.length;c++){var f=e[c];switch(b){case"o":d[f]=$E(this.nodes.content.id+"_"+f);break;case"i":d[f]=this.nodes.content.id+"_"+f;break}}}return d},setOnDisplaied:function(a){this._dialog.onDisplaied=a},setOnDisplayFinished:function(a){this._dialog.onDisplayFinished=a},onDrag:function(){},onShow:function(){},onHidden:function(){},onClose:function(){}};var LayerTemplate={alert:'<table id="#{entity}"  class="gModLy">'+'<thead id="#{titleBar}">'+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div>'+'<div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</thead>"+"<tfoot>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tfoot>"+"<tbody>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain" id="layer_2">'+'<div id="#{content}" class="gModLyCont">'+"<!-- 内容区域 -->"+'<div class="gDialogDoc">'+'<div class="diaBd">'+'<div class="gDiaC1"><img id="#{icon}" width="50" height="50" class="" src="http://simg.sinajs.cn/tiezi/images/icon/icon.gif" alt=""/></div>'+'<div class="gDiaC2">'+'<h5 id="#{text}"></h5>'+'<div id="#{subText}"></div>'+"<p/>"+"</div>"+"</div>"+'<div class="btnRow"><a class="gBtnb gBtnbClr" id="#{linkOk}" href="javascript:;"><cite id="#{btnOk}"><em id="#{ok}"></em></cite></a></div>'+"</div>"+"<!-- 内容区域 -->"+"</div>"+"</td>"+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tbody>"+"</table>",confirm:'<table id="#{entity}"  class="gModLy">'+'<thead id="#{titleBar}">'+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div>'+'<div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</thead>"+"<tfoot>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tfoot>"+"<tbody>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain" id="layer_2">'+'<div id="#{content}" class="gModLyCont">'+"<!-- 内容开始 -->"+'<div class="gDialogDoc">'+'<div class="diaBd">'+'<div class="gDiaC1"><img id="#{icon}" width="50" height="50" class="" src="http://simg.sinajs.cn/tiezi/images/icon/icon.gif" alt=""/></div>'+'<div class="gDiaC2">'+'<h5 id="#{text}"></h5>'+'<div id="#{subText}"></div>'+"<p/>"+"</div>"+"</div>"+'<div class="btnRow">'+'<a class="gBtnb gBtnbClr" id="#{linkOk}" href="javascript:;"><cite id="#{btnOk}"><em id="#{ok}"></em></cite></a>'+'<a class="gBtnb gBtnbClr" id="#{linkCancel}" href="javascript:;"><cite id="#{btnCancel}"><em id="#{cancel}"></em></cite></a>'+"</div>"+"</div>"+"<!-- 内容结束 -->"+"</div>"+"</td>"+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tbody>"+"</table>",iframe:'<table id="#{entity}"  class="gModLy">'+'<thead id="#{titleBar}">'+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div>'+'<div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</thead>"+"<tfoot>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tfoot>"+"<tbody>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain" id="layer_2">'+'<div id="#{content}" class="gModLyCont">'+'<div id="#{loadState}">Loading...</div>'+'<iframe style="width:100%;height:500px;" id="#{iframe}" src="#{iframeURL}"></iframe>'+"</div>"+"</td>"+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tbody>"+"</table>",customs:'<table id="#{entity}"  class="gModLy">'+'<thead id="#{titleBar}">'+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div>'+'<div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</thead>"+"<tfoot>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain"></td>'+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tfoot>"+"<tbody>"+"<tr>"+'<td class="tbgleft"><div></div></td>'+'<td class="tdmain" id="layer_2">'+'<div id="#{content}" class="gModLyCont">'+"<!-- 内容区域 -->"+"<!-- 内容区域 -->"+"</div>"+"</td>"+'<td class="tbgright"><div></div></td>'+"</tr>"+"</tbody>"+"</table>"};(function(){var a=function(a,b){this.template=b||{};DialogManager.backShadow=a};a.prototype={iconSet:{"01":{"class":"SG_icon SG_icon201",alt:"警告"},"02":{"class":"SG_icon SG_icon202",alt:"失败"},"03":{"class":"SG_icon SG_icon203",alt:"成功"},"04":{"class":"SG_icon SG_icon204",alt:"询问"},"06":{"class":"SG_icon SG_icon148",alt:"警告"}},alert:function(a,b,c){b=b||{};var d=DialogManager.create(b.template||this.template.alert||LayerTemplate.alert,c);var e=Core.System.winSize();var f=d.getNodes();d.onDisplaied=b["funcDisplaied"];d.onDisplayFinished=b["funcDisplayFinished"];d.setSize({width:b["width"],height:b["height"]});d.setFixed(true);this._setDialogMiddle(d);d.show();d.setAreaLocked(true);f.linkOk.focus();f.text.innerHTML=a;if(f.titleName){f.titleName.innerHTML=b["title"]||"提示"}if(f.icon){f.icon.className=b["icon"]?this.iconSet[b["icon"]]["class"]:this.iconSet["01"]["class"];f.icon.alt=b["icon"]?this.iconSet[b["icon"]]["alt"]:this.iconSet["01"]["alt"]}f.ok.innerHTML=b["textOk"]||"确定";if(f.subText){f.subText.innerHTML=b["subText"]||""}d.getProperty().focusNode=f.linkOk;Core.Events.addEvent(f.btnOk,function(){if(b["funcOk"]&&d.getProperty().enabled){b["funcOk"]();Core.Events.stopEvent()}d.close();return false},"click");Core.Events.addEvent(f.linkOk,function(){var a=Core.Events.getEvent();if(a.keyCode=="13"){if(b["funcOk"]&&d.getProperty().enabled){b["funcOk"]()}d.close()}},"keydown");Core.Events.addEvent(f.btnClose,function(){if(b["funcClose"]&&d.getProperty().enabled){b["funcClose"]()}d.close()},"click");Core.Events.addEvent(f.btnClose,function(){var a=Core.Events.getEvent();a.cancelBubble=true},"mousedown")},newAlert:function(a,b,c){b.template=this.template.newAlert;this.alert(a,b,c)},confirm:function(a,b,c){b=b||{};var d=DialogManager.create(b.template||this.template.confirm||LayerTemplate.confirm,c);var e=Core.System.winSize();var f=d.getNodes();d.onDisplaied=b["funcDisplaied"];d.onDisplayFinished=b["funcDisplayFinished"];d.setSize({width:b["width"],height:b["height"]});d.setFixed(true);this._setDialogMiddle(d);d.show();d.setAreaLocked(true);if(b["defaultButton"]==0){f.linkCancel.focus();d.getProperty().focusNode=f.linkCancel}else{f.linkOk.focus();d.getProperty().focusNode=f.linkOk}f.text.innerHTML=a;if(f.titleName){f.titleName.innerHTML=b["title"]||"提示"}if(f.icon){f.icon.className=b["icon"]?this.iconSet[b["icon"]]["class"]:this.iconSet["04"]["class"];f.icon.alt=b["icon"]?this.iconSet[b["icon"]]["alt"]:this.iconSet["04"]["alt"]}f.ok.innerHTML=b["textOk"]||"确定";f.cancel.innerHTML=b["textCancel"]||"取消";if(f.subText){f.subText.innerHTML=b["subText"]||""}Core.Events.addEvent(f.btnOk,function(){if(b["funcOk"]&&d.getProperty().enabled){b["funcOk"]();Core.Events.stopEvent()}d.close();return false},"click");Core.Events.addEvent(f.linkOk,function(){var a=Core.Events.getEvent();if(a.keyCode=="13"){if(b["funcOk"]&&d.getProperty().enabled){b["funcOk"]()}d.close()}},"keydown");Core.Events.addEvent(f.btnCancel,function(){if(b["funcCancel"]&&d.getProperty().enabled){b["funcCancel"]();Core.Events.stopEvent()}d.close();return false},"click");Core.Events.addEvent(f.linkCancel,function(){var a=Core.Events.getEvent();if(a.keyCode=="13"){if(b["funcCancel"]&&d.getProperty().enabled){b["funcCancel"]()}d.close()}},"keydown");Core.Events.addEvent(f.btnClose,function(){if(b["funcClose"]&&d.getProperty().enabled){b["funcClose"]();Core.Events.stopEvent()}d.close();return false},"click");Core.Events.addEvent(f.btnClose,function(){var a=Core.Events.getEvent();a.cancelBubble=true},"mousedown")},newConform:function(a,b,c){b.template=this.template.newConfirm;this.confirm(a,b,c)},showIframe:function(a,b){a=a||{};var c=DialogManager.create(this.template.iframe||LayerTemplate.iframe,b);var d=Core.System.winSize();var e=c.getNodes();c.setSize({width:a["width"]||320,height:a["height"]||150});var f=d.width/2-c.getProperty().width/2<0?0:d.width/2-c.getProperty().width/2;var g=d.height/2-c.getProperty().height/2<0?0:d.height/2-c.getProperty().height/2;if(a["fixed"]){c.setPosition({x:f,y:g})}else{c.setPosition({x:f+document.documentElement.scrollLeft,y:g+document.documentElement.scrollTop})}if(!$IE6){c.getProperty().displayMode="alpha"}c.setFixed(!!a.fixed);c.show();c.setAreaLocked(true);e.titleName.innerHTML=a["title"]||"";e.iframe.src=a["url"]||"about:blank";Core.Events.addEvent(e.iframe,function(){e.iframe.style.display="";e.loadState.style.display="none"},"load");Core.Events.addEvent(e.btnClose,function(){c.close()},"click");Core.Events.addEvent(e.btnClose,function(){var a=Core.Events.getEvent();a.cancelBubble=true},"mousedown")},createCustomsDialog:function(a,b){a=a||{};var c=new CustomsDialog(a.tpl||this.template.customs||LayerTemplate.customs,b);a.content&&c.setContent(a.content);c.setTitle(a.title||"提示");c.setHelp(a.help||"");c.setClose("hidden");c.setOnDisplaied(a["funcDisplaied"]);c.setOnDisplayFinished(a["funcDisplayFinished"]);return c},getDialog:function(a){return DialogManager.getDialog(a)},close:function(a){DialogManager.close(a)},_setDialogMiddle:function(a){var b=Core.System.winSize();var c=a.getNodes();var d,e;var f=a.entity.style.display;a.setPosition({x:-1e4});a.entity.style.display="";var g=c.titleBar?c.titleBar.offsetHeight:0;var h=b.height-c.content.offsetHeight-g;var i=(Math.sqrt(5)-1)/2;var j=1;var k=h*i/(i+j);d=b.width/2-c.content.offsetWidth/2;d=d<0?0:d;e=k<0?0:k;if(!a.getProperty().isFixed){d=d+document.documentElement.scrollLeft;e=e+document.documentElement.scrollTop}a.entity.style.display=f;a.setPosition({x:d,y:e})}};Sina.Ui.WindowDialog=a})();Sina.pkg("Utils.Cookie");Utils.Cookie.getCookie=function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i");var c=document.cookie+";";var d=c.match(b);if(d){return d[1]||""}else{return""}};Utils.Cookie.setCookie=function(a,b,c,d,e,f){var g=[];g.push(a+"="+escape(b));if(c){var h=new Date;var i=h.getTime()+c*36e5;h.setTime(i);g.push("expires="+h.toGMTString())}if(d){g.push("path="+d)}if(e){g.push("domain="+e)}if(f){g.push(f)}document.cookie=g.join(";")};Core.Events.stopDefaultEvent=function(a){var b=a?a:Core.Events.getEvent();if(b!=null){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}}};if(typeof Lib=="undefined"){Lib={}}Lib.pkg=function(a){if(!a||!a.length){return null}var b=a.split(".");var c=Lib;for(var d=b[0]=="Lib"?1:0;d<b.length;++d){c[b[d]]=c[b[d]]||{};c=c[b[d]]}return c};Core.System.keyValue=function(a,b){var c=a.match(new RegExp("(\\?|&)"+b+"=([^&]*)(&|$)"));if(c!=null)return c[2];return null};Lib.checkAuthor=function(){var a=unescape(Utils.Cookie.getCookie("SUP"));if(a&&a!=""){$UID=Core.System.keyValue(a,"uid");$nick=decodeURIComponent(Core.System.keyValue(a,"nick"));$isLogin=!!$UID;if(typeof scope.$uid=="undefined"){$isAdmin=false}else{$isAdmin=scope.$uid==$UID}}else{a=Utils.Cookie.getCookie("SU");if(a&&a!=""){var b=a.match(/^([^:]*:){2}(\d{5,11})/);$UID=b&&b[2]||null;window.$isLogin=!!$UID;if(typeof scope.$uid=="undefined"){window.$isAdmin=false}else{window.$isAdmin=scope.$uid==$UID}}else{$UID=null;$isLogin=false;$isAdmin=false}}};Sina.pkg("Core.Class");Core.Class.AsPrototype={};Core.Class.create=function(){return function(a){if(a!=Core.Class.AsPrototype){this.initialize.apply(this,arguments)}}};Core.String.trimHead=function(a){return a.replace(/^(\u3000|\s|\t)*/gi,"")};Core.String.trimTail=function(a){return a.replace(/(\u3000|\s|\t)*$/gi,"")};Core.String.trim=function(a){return Core.String.trimHead(Core.String.trimTail(a))};String.prototype.format=function(){var a=!arguments[0]||typeof arguments[0]=="undefined"?"":arguments[0].toString();var b=/(.*?)({(\d+)(:([0-9a-z]+))?})/ig;var c=this.match(b);if(c){for(var d=0,e=c.length;d<e;d++){c[d]=c[d].replace(b,function(){return RegExp.$1});c[d]=RegExp.$1;switch(typeof arguments[parseInt(RegExp.$3)]){case"undefined":c[d]+=RegExp.$2;break;case"number":c[d]+=isNaN(RegExp.$5)||RegExp.$5==""?arguments[parseInt(RegExp.$3)]:arguments[parseInt(RegExp.$3)].toString(Math.max(Math.min(Math.round(RegExp.$5),36),2));break;default:c[d]+=arguments[parseInt(RegExp.$3)]}}c.push(this.replace(b,""));return c.join("")}return this};Sina.pkg("Core.Math");Core.Math.getUniqueId=function(a,b){return parseInt(Math.random()*1e4).toString()+(new Date).getTime().toString()};Lib.pkg("Login");Lib.Login.info=function(){var a;if(window["sinaSSOController"]&&(a=sinaSSOController.getLoginInfo())){return a}else{return{}}};(function(){function a(a){function b(){}b.prototype=a;return new b}Function.prototype.$define=function(a){var b;for(b in a){this.prototype[b]=a[b]}if(this.__interface__){for(b in this.prototype){if(this.prototype[b]==="NI"){throw new Error("类定义错误，接口方法["+b+"]未实现")}}}this.prototype.constructor=this;this.$extends=this.$define=this.$implements=function(){throw new Error("$define语句定义后面不能再作其它定义")};return this};Function.prototype.$extends=function(){var b=this,c=arguments.length,d,e;if(c===0){throw new Error("$extends语句错误：未指定父类")}d=arguments[0];e=function(){d.apply(this,arguments);b.apply(this,arguments)};e.prototype=a(d.prototype);e.prototype.constructor=e;e.$super=d.prototype;return e};Function.prototype.$implements=function(){var a=Array.prototype.slice.call(arguments,0),b,c=a.length,d;while(c--){if(typeof a[c]!=="object"){throw new Error("$implements语句错误：参数必须为object类型")}for(d in a[c]){typeof this.prototype[d]==="undefined"&&(this.prototype[d]="NI")}}this.__interface__=true;this.$extends=function(){throw new Error("$extends语句错误:$extends语句不能出现在$implements定义之后")};return this}})();(function(){function a(a){return typeof a!=="string"&&String.prototype.slice.call(a,0,8)=="function"}function b(a,b){var c=b.call(a);return typeof c==="string"||typeof c==="number"?c:null}Core.Function.defineGetter=function(c,d,e){if(d instanceof Array&&e instanceof Array){var f=Math.min(d.length,e.length);while(f--){if(typeof d[f]==="string"&&a(e[f])){c[d[f]]={valueOf:function(a){return function(){return b(c,e[a])}}(f),toString:this.valueOf}}}}else if(typeof d==="string"&&a(e)){c[d]={valueOf:function(){return b(c,e)},toString:this.valueOf}}}})();Ui.IE6FixedController=function(){var a=this;this.node=null;this.iframeNode=null;this.__orgX=0;this.__orgY=0;this.__isBindScroll=false;this.__fixedHandle=function(){if(a.node){a.node.style.left=document.documentElement.scrollLeft+a.__orgX+"px";a.node.style.top=document.documentElement.scrollTop+a.__orgY+"px"}if(a.iframeNode){a.iframeNode.style.left=a.node.style.left;a.iframeNode.style.top=a.node.style.top}}}.$define({setFixed:function(a,b){this.updateOrgPosition();if(b&&!this.__isBindScroll){Core.Events.addEvent(window,this.__fixedHandle,"scroll");this.__isBindScroll=true}if(!b&&this.__isBindScroll){Core.Events.removeEvent(window,this.__fixedHandle,"scroll");this.__isBindScroll=false}},setPosition:function(a,b,c){if(typeof c.x!=="undefined"){if(b){a.style.left=c.x+document.documentElement.scrollLeft+"px";this.__orgX=parseInt(this.node.style.left)-document.documentElement.scrollLeft}else{a.style.left=c.x+"px"}}if(typeof c.y!=="undefined"){if(b){a.style.top=c.y+document.documentElement.scrollTop+"px";this.__orgY=parseInt(this.node.style.top)-document.documentElement.scrollTop}else{a.style.top=c.y+"px"}}typeof c.z!=="undefined"&&(a.style.zIndex=c.z)},getX:function(a,b){if(b){return parseInt(a.style.left)-document.documentElement.scrollLeft}else{return parseInt(a.style.left)}},getY:function(a,b){if(b){return parseInt(a.style.top)-document.documentElement.scrollTop}else{return parseInt(a.style.top)}},updateIframe:function(a){this.setFixed(this.iframeNode,a);a&&this.__fixedHandle()},updateOrgPosition:function(){if(!this.node){return}this.__orgX=parseInt(this.node.style.left)-document.documentElement.scrollLeft;this.__orgY=parseInt(this.node.style.top)-document.documentElement.scrollTop},destroy:function(){Core.Events.removeEvent(window,this.__fixedHandle,"scroll");this.__isBindScroll=false;this.node=null;this.iframeNode=null}});Core.Events.EventDispatcher=function(a){this.__target=a;this.__events={}}.$define({addEventListener:function(a,b){if(!this.__checkFunction(b)){return}var c=this.__events;a=a.toLowerCase();!c[a]&&(c[a]=[]);c[a].push(b)},removeEventListener:function(a,b){var c=this.__events[a];a=a.toLowerCase();if(!this.__checkFunction(b)||!c||!c.length){return}for(var d=c.length-1;d>=0;d--){c[d]==b&&c.splice(d,1)}},dispatchEvent:function(a){a=a.toLowerCase();var b=this.__events[a];if(!b||!b.length){return}var c=Array.prototype.slice.call(arguments,0);c.shift();for(var d=0,e=b.length;d<e;d++){b[d].apply(this.__target,c)}},__checkFunction:function(a){return typeof a!=="string"&&String.prototype.slice.call(a,0,8)=="function"}});Ui.IRenderer={setCanShow:function(a){},setCanHidden:function(a){},show:function(a){},hidden:function(a){},addEventListener:function(a,b){},removeEventListener:function(a,b){}};Ui.SimpleRenderer=function(){this.__canShow=true;this.__canHidden=true;this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IRenderer).$define({setCanShow:function(a){this.__canShow=!!a},setCanHidden:function(a){this.__canHidden=!!a},show:function(a){this.__eventDispatcher.dispatchEvent("beforeShow");if(this.__canShow){a.style.display="";this.__eventDispatcher.dispatchEvent("show")}return this},hidden:function(a){this.__eventDispatcher.dispatchEvent("beforeHidden");if(this.__canHidden){a.style.display="none";this.__eventDispatcher.dispatchEvent("hidden")}return this},addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this}});Ui.DisplayObject=function(a,b){Core.Function.defineGetter(this,["x","y","z","width","height"],[this.__getX,this.__getY,this.__getZ,this.__getWidth,this.__getHeight]);this.__renderer=null;this.__entity=b;this.__isInited=false;this.__parent=a||document.body;this.__eventDispatcher=new Core.Events.EventDispatcher(this);var c=this.__eventDispatcher;this.__onBeforeShow=function(){c.dispatchEvent("beforeShow")};this.__onShow=function(){c.dispatchEvent("show")};this.__onBeforeHidden=function(){c.dispatchEvent("beforeHidden")};this.__onHidden=function(){c.dispatchEvent("hidden")};this.__updateRenderer(Ui.SimpleRenderer)}.$define({isShow:!1,isHidden:!0,setPosition:function(a){!this.__isInited&&this.__initEntity();typeof a.x!=="undefined"&&(this.__entity.style.left=a.x+"px");typeof a.y!=="undefined"&&(this.__entity.style.top=a.y+"px");typeof a.z!=="undefined"&&(this.__entity.style.zIndex=a.z);return this},setSize:function(a){!this.__isInited&&this.__initEntity();typeof a.width!=="undefined"&&(this.__entity.style.width=a.width+"px");typeof a.height!=="undefined"&&(this.__entity.style.height=a.height+"px");return this},setRenderer:function(a){!this.__isInited&&this.__initEntity();this.__updateRenderer(a);return this},show:function(a){this.isHidden=!1;this.isShow=!0;!this.__isInited&&this.__initEntity();this.__updateRenderer(a);this.__renderer.show(this.__entity);return this},hidden:function(a){return this.hide(a)},hide:function(a){this.isHidden=!0;this.isShow=!1;!this.__isInited&&this.__initEntity();this.__updateRenderer(a);this.__renderer.hidden(this.__entity);return this},setCanShow:function(a){this.__renderer.setCanShow(a);return this},setCanHidden:function(a){this.__renderer.setCanHidden(a);return this},addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},destroy:function(){if(!this.__entity){return}!this.__isInited&&this.__initEntity();this.__entity.parentNode&&this.__entity.parentNode.removeChild(this.__entity);this.__entity=null},__initEntity:function(){var a;!this.__entity&&(this.__entity=$C("div"));a=this.__entity.style;a.position="absolute";a.left=0;a.top=0;!this.__entity.parentNode&&this.__parent.appendChild(this.__entity);this.__isInited=true},__updateRenderer:function(a){if(!a){return}var b=function(){this.__renderer.addEventListener("beforeShow",this.__onBeforeShow).addEventListener("show",this.__onShow).addEventListener("beforeHidden",this.__onBeforeHidden).addEventListener("hidden",this.__onHidden)};if(!this.__renderer){this.__renderer=new a;b.call(this)}else if(this.__renderer.constructor!==a){this.__renderer.removeEventListener("beforeShow",this.__onBeforeShow).removeEventListener("show",this.__onShow).removeEventListener("beforeHidden",this.__onBeforeHidden).removeEventListener("hidden",this.__onHidden);this.__renderer=new a;b.call(this)}},__getX:function(){!this.__isInited&&this.__initEntity();return parseInt(this.__entity.style.left)},__getY:function(){!this.__isInited&&this.__initEntity();return parseInt(this.__entity.style.top)},__getZ:function(){!this.__isInited&&this.__initEntity();return parseInt(this.__entity.style.zIndex)},__getWidth:function(){!this.__isInited&&this.__initEntity();return this.__getSize(this.__entity,"offsetWidth")},__getHeight:function(){!this.__isInited&&this.__initEntity();return this.__getSize(this.__entity,"offsetHeight")},__getSize:function(a,b){var c=a,d,e=c.style.visibility;if(c.style.display=="none"){c.style.visibility="hidden";c.style.display="";d=c[b];c.style.display="none";c.style.visibility=e}else{d=c[b]}return d}});Ui.Panel=function(a,b){this.nodes={};this.uniqueID=this.__getUniqueID();this.entity=null;this.__iframe=null;this.__isSetAdamant=false;this.__templateNodesIDs=[];this.__isFixed=false;$IE6&&(this.__ie6FixedController=new Ui.IE6FixedController)}.$extends(Ui.DisplayObject).$define({setTemplate:function(a){var b=$C("div");b.innerHTML=(new Ui.Template(a)).evaluate(this.__getNodes(a,"i"));b.style.display="none";this.__parent.appendChild(b);this.__updateTemplate(b);this.nodes=this.__getNodes(a);this.entity=this.__entity;this.nodes.panel=this.entity;return this},setFixed:function(a){!this.__isInited&&this.__initEntity();var b=parseInt(this.__entity.style.left),c=parseInt(this.__entity.style.top);if($IE6){this.__ie6FixedController.setFixed(this.__entity,a);this.__isSetAdamant&&this.__ie6FixedController.setFixed(this.__iframe,a)}else{if(a&&!this.__isFixed){this.setPosition({x:b-Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),y:c-Math.max(document.documentElement.scrollTop,document.body.scrollTop)});this.__entity.style.position="fixed"}if(!a&&this.__isFixed){this.setPosition({x:b+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),y:c+Math.max(document.documentElement.scrollTop,document.body.scrollTop)});this.__entity.style.position="absolute"}}this.__isFixed=!!a;this.__updateIframe();return this},setAdamant:function(a){this.__isSetAdamant=!!a;this.__isSetAdamant&&!this.__iframe&&this.__createIframe();this.__updateIframe();return this},destroy:function(){if(!this.__entity){return}Ui.Panel.$super.destroy.call(this);this.__ie6FixedController&&this.__ie6FixedController.destroy();this.__iframe&&this.__iframe.parentNode.removeChild(this.__iframe)},setPosition:function(a){!this.__isInited&&this.__initEntity();if($IE6){this.__ie6FixedController.setPosition(this.__entity,this.__isFixed,a)}else{Ui.Panel.$super.setPosition.call(this,a)}this.__updateIframe();return this},setSize:function(a){Ui.Panel.$super.setSize.call(this,a).__updateIframe();return this},show:function(a){Ui.Panel.$super.show.call(this,a).__updateIframe();return this},hidden:function(a){Ui.Panel.$super.hidden.call(this,a).__updateIframe();return this},__getX:function(){!this.__isInited&&this.__initEntity();if($IE6){return this.__ie6FixedController.getX(this.__entity,this.__isFixed)}else{return parseInt(this.__entity.style.left)}},__getY:function(){!this.__isInited&&this.__initEntity();if($IE6){return this.__ie6FixedController.getY(this.__entity,this.__isFixed)}else{return parseInt(this.__entity.style.top)}},__createIframe:function(){this.__iframe=$C("iframe");this.__iframe.frameBorder="none";this.__parent.insertBefore(this.__iframe,this.__entity);Core.Dom.setStyle(this.__iframe,"opacity",0);this.__ie6FixedController&&(this.__ie6FixedController.iframeNode=this.__iframe);this.__updateIframe()},__updateIframe:function(){if(this.__iframe){var a=this.__iframe.style;a.backgroundColor="#ffffff";a.left=this.x+"px";a.top=this.y+"px";a.width=this.width+"px";a.height=this.height+"px";a.position=this.__entity.style.position;a.display=this.__entity.style.display;a.zIndex=this.__entity.style.zIndex;$IE6&&this.__ie6FixedController.updateIframe(this.__isFixed)}},__updateIE6FCOrgPosition:function(){this.__ie6FixedController&&this.__ie6FixedController.updateOrgPosition()},__updateTemplate:function(a){var b,c,d,e,f,g=this.__entity;if(g){g.parentNode&&g.parentNode.removeChild(g);b=g.style.left;c=g.style.top;d=g.style.zIndex;e=g.style.position;f=g.style.display}else{f="none"}g=this.__entity=$E("_"+this.uniqueID+"_panel");if(!g){g=this.__entity=$E("_"+this.uniqueID+"_entity")}if(!g){throw new Error("[Panel Error]there missing identifier #{panel} in panel template")}g.style.left=b||0;g.style.top=c||0;g.style.zIndex=d||0;g.style.position=e||"absolute";g.style.display=f;this.__parent.replaceChild(g,a);this.__ie6FixedController&&(this.__ie6FixedController.node=this.__entity)},__getNodes:function(a,b){var c=b||"o",d=/\{[^\}]+(?=\})/g,e,f={},g,h;this.__templateNodesIDs=a.match(d);g=this.__templateNodesIDs;if(g){e=g.length;while(e--){h=g[e].replace("{","");switch(c){case"o":f[h]=$E("_"+this.uniqueID+"_"+h);break;case"i":f[h]="_"+this.uniqueID+"_"+h;break}}}return f},__getUniqueID:function(){return parseInt(Math.random()*1e3).toString()+(new Date).getTime().toString()},setContent:function(a){this.nodes.content&&(this.nodes.content.innerHTML=a)},getNodes:function(){return this.nodes}});Ui.Drag=function(a,b,c){var d=this;this.canDrag=true;this.isLock=false;this.lockArea={left:0,right:0,top:0,bottom:0};this.__captureNode=a;this.__dragNodes=[];this.__deltaX=[];this.__deltaY=[];this.__eventDispatcher=new Core.Events.EventDispatcher(this);this.__isDraging=false;this.__canDragX=true;this.__canDragY=true;this.__dragHandle=function(){d.__drag()};this.__mouseDownHandle=function(){d.__isDraging=true;d.__eventDispatcher.dispatchEvent("beforeDrag");d.__setCapture(true)};this.__mouseUpHandle=function(){d.__isDraging&&d.__eventDispatcher.dispatchEvent("afterDrag");d.__isDraging=false;d.__setCapture(false)};this.__initNodes(a,b,c);this.__initCaputerNode()}.$define({addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},destroy:function(){Core.Events.removeEvent(this.__captureNode,this.__mouseDownHandle,"mousedown");Core.Events.removeEvent(document,this.__mouseUpHandle,"mouseup");this.__captureNode=null;this.__dragNodes=null},__initNodes:function(a,b,c){if(b){b instanceof Array?this.__dragNodes=b:this.__dragNodes.push(b);(typeof c==="undefined"||c)&&this.__dragNodes.push(this.__captureNode)}else{this.__dragNodes.push(this.__captureNode)}var d=this.__dragNodes,e=d.length;while(e--){!d[e].style.position&&(d[e].style.position="absolute");!d[e].style.left&&(d[e].style.left=0);!d[e].style.top&&(d[e].style.top=0)}},__initCaputerNode:function(){var a=this.__captureNode,b=this;Core.Events.addEvent(a,this.__mouseDownHandle,"mousedown");Core.Events.addEvent(document,this.__mouseUpHandle,"mouseup")},__setCapture:function(a){var b=this.__captureNode,c=this.__dragNodes,d=Core.Events.getEvent(),e=c.length;while(e--){this.__deltaX[e]=d.clientX-parseInt(c[e].style.left);this.__deltaY[e]=d.clientY-parseInt(c[e].style.top)}if(a){if($IE){b.setCapture();Core.Events.addEvent(b,this.__dragHandle,"mousemove")}else{Core.Events.addEvent(document,this.__dragHandle,"mousemove")}}else{if($IE){b.releaseCapture();Core.Events.removeEvent(b,this.__dragHandle,"mousemove")}else{Core.Events.removeEvent(document,this.__dragHandle,"mousemove")}}},__drag:function(){if(!this.canDrag){return}var a=this.__dragNodes,b=Core.Events.getEvent(),c=a.length,d=this.lockArea,e=0,f=0;this.__eventDispatcher.dispatchEvent("drag");while(c--){e=b.clientX-this.__deltaX[c];f=b.clientY-this.__deltaY[c];if(this.isLock){e=Math.min(Math.max(e,d.left),d.right);f=Math.min(Math.max(f,d.top),d.bottom)}a[c].style.left=e+"px";a[c].style.top=f+"px"}}});Ui.IDragger={addEventListener:function(a,b){},removeEventListener:function(a,b){},setDrag:function(a,b,c){},setLock:function(a){},setArea:function(a){},destroy:function(){}};Ui.SimpleDragger=function(){this.__drag=null;this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IDragger).$define({addEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.addEventListener(a,b)}else{this.__drag.addEventListener(a,b)}return this},removeEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.removeEventListener(a,b)}else{this.__drag.removeEventListener(a,b)}return this},setDrag:function(a,b,c){var d=this;this.__drag=new Ui.Drag(a,b,c);this.__drag.addEventListener("afterDrag",function(){d.__eventDispatcher.dispatchEvent("afterDrag")});return this},setLock:function(a){this.__drag.isLock=!!a;return this},setArea:function(a){this.__drag.lockArea=a;return this},destroy:function(){this.__drag.destroy()}});Ui.Dialog=function(a,b){var c=this;this.__dragger=null;this.__isBindUpadateAreaEvent=false;this.__isBindUpdateIE6AreaEvent=false;this.__beforeDragHandle=function(){c.__updateDraggerArea();c.__eventDispatcher.dispatchEvent("beforedrag")};this.__dragHandle=function(){c.__isSetAdamant&&c.__updateIframe();c.__eventDispatcher.dispatchEvent("drag")};this.__afterDragHandle=function(){c.__isFixed&&$IE6&&c.__updateIE6FCOrgPosition();c.__eventDispatcher.dispatchEvent("afterdrag")};this.__updateDraggerAreaHandle=function(){setTimeout(function(){c.__updateDraggerArea()},1)};this.__setMiddleHandle=function(){c.setMiddle()}}.$extends(Ui.Panel).$define({setTemplate:function(a){Ui.Dialog.$super.setTemplate.call(this,a);this.__initTitleBar();this.setDragger(Ui.SimpleDragger);return this},setContent:function(a){if(!this.nodes.content){return this}this.nodes.content.innerHTML=(new Ui.Template(a)).evaluate(this.__getNodes(a,"i"));this.__addContentNodes(this.__getNodes(a));return this},setFixed:function(a){Ui.Dialog.$super.setFixed.call(this,a);if(a){Core.Events.addEvent(window,this.__setMiddleHandle,"resize")}else{Core.Events.removeEvent(window,this.__setMiddleHandle,"resize")}this.__updateDraggerArea();return this},setMiddle:function(){var a=this.__getDocumentSize().height-this.height,b=(Math.sqrt(5)-1)/2,c=1,d=a*b/(b+c),e=this.__getDocumentSize().width/2-this.width/2;if(!this.__isFixed){d+=Math.max(document.documentElement.scrollTop,document.body.scrollTop);e+=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)}this.setPosition({x:Math.max(e,0),y:Math.max(d,0)});return this},setAreaLocked:function(a){if(!this.__dragger){return this}this.__dragger.setLock(a);return this},setSize:function(a){!this.__isInited&&this.__initEntity();if(this.nodes.content){typeof a.width!=="undefined"&&(this.nodes.content.style.width=a.width+"px");typeof a.height!=="undefined"&&(this.nodes.content.style.height=a.height+"px")}else{typeof a.width!=="undefined"&&(this.__entity.style.width=a.width+"px");typeof a.height!=="undefined"&&(this.__entity.style.height=a.height+"px")}return this},setDragger:function(a){if(!this.nodes.titleBar||!a){return this}if(!this.__dragger){this.__dragger=new a}else if(this.__dragger.constructor===a){return this}this.__updateDragger(a);return this},destroy:function(){if(!this.__entity){return}Ui.Dialog.$super.destroy.call(this);Core.Events.removeEvent(window,this.__updateDraggerAreaHandle,"resize");Core.Events.removeEvent(window,this.__setMiddleHandle,"resize")},__addContentNodes:function(a){var b=this.nodes,c;for(c in a){b[c]=a[c]}},__updateDragger:function(a){if(this.__dragger.constructor!==a){this.__dragger.removeEventListener("beforedrag",this.__beforeDragHandle).removeEventListener("drag",this.__dragHandle).removeEventListener("afterdrag",this.__afterDragHandle);this.__dragger.destroy();this.__dragger=new a}this.__dragger.setDrag(this.nodes.titleBar,this.__entity,false);this.__dragger.addEventListener("beforedrag",this.__beforeDragHandle).addEventListener("drag",this.__dragHandle).addEventListener("afterdrag",this.__afterDragHandle)},__updateDraggerArea:function(){var a,b,c,d;if(this.__isFixed){a=$IE6?document.documentElement.scrollLeft:0;b=$IE6?document.documentElement.scrollTop:0;c=$IE6?document.documentElement.scrollLeft+this.__getDocumentSize().width-this.width:this.__getDocumentSize().width-this.width;d=$IE6?document.documentElement.scrollTop+this.__getDocumentSize().height-this.height:this.__getDocumentSize().height-this.height}else{a=0;b=0;c=document.documentElement.scrollWidth-this.width;d=document.documentElement.scrollHeight-this.height}this.__dragger.setArea({left:a,top:b,right:c,bottom:d})},__initTitleBar:function(){if(!this.nodes.titleBar){return}var a=this.nodes.titleBar;a.style.cursor="move";if($IE){Core.Events.addEvent(a,function(){return false},"selectstart")}else{a.style.MozUserSelect="none"}},__getDocumentSize:function(){var a=document.documentElement.clientWidth||document.body.clientWidth,b=document.documentElement.clientHeight||document.body.clientHeight;return{width:a,height:b}}});Ui.ModuleDialog=function(a,b,c){this.__bgShadow=null;this.__dialog=null;this.__isInitBgShadow=false;this.__tplConfig=a;this.__iconSet=b;this.__dialogQueue=[];this.__zIndex=c&&c.zIndex||5e3;this.__cfg=c||{};this.__initDialogEvent()}.$define({alert:function(a,b){b=b||{};var c=this.__createMessageDialog(b.tplConfig||this.__tplConfig.alert,b);c.nodes.text&&(c.nodes.text.innerHTML=a||"");c.show(b.renderer||this.__cfg.renderer).addEventListener("hidden",function(){this.destroy()});c.nodes.linkOk&&c.nodes.linkOk.style.display!=="none"&&c.nodes.linkOk.focus();return c},newAlert:function(a,b,c){b.tplConfig=this.__tplConfig.newAlert;this.alert(a,b,c)},confirm:function(a,b){b=b||{};var c=this.__createMessageDialog(b.tplConfig||this.__tplConfig.confirm,b),d=this;c.nodes.text&&(c.nodes.text.innerHTML=a||"");if(c.nodes.btnCancel){c.nodes.btnCancel.innerHTML=b.textCancel||"取消";Core.Events.addEvent(c.nodes.btnCancel,function(){b.funcCancel&&b.funcCancel.call(c);c.hidden(b.renderer||d.__cfg.renderer);Core.Events.stopEvent()},"click");c.nodes.linkCancel&&Core.Events.addEvent(c.nodes.linkCancel,function(){var a=Core.Events.getEvent();if(a.keyCode=="13"){b.funcCancel&&b.funcCancel.call(c);c.hidden(b.renderer||d.__cfg.renderer)}},"keydown")}c.show(b.renderer||d.__cfg.renderer).addEventListener("hidden",function(){this.destroy()});if(b.defaultButton==0){c.nodes.linkCancel&&c.nodes.linkCancel.style.display!=="none"&&c.nodes.linkCancel.focus()}else{c.nodes.linkOk&&c.nodes.linkOk.style.display!=="none"&&c.nodes.linkOk.focus()}return c},newConfirm:function(a,b,c){b.tplConfig=this.__tplConfig.newConfirm;this.confirm(a,b,c)},create:function(a){var b=this;a=a||{};var c=new Ui.Dialog;c.setTemplate(a.tpl||this.__tplConfig.customs);a.content&&c.setContent(a.content);a.width&&!isNaN(a.width)&&c.setSize({width:a.width});a.height&&!isNaN(a.height)&&c.setSize({height:a.height});return this.__initDialog(c,a)},__initDialogEvent:function(){var a=this.__dialogQueue;Core.Events.addEvent(document,function(){var b=Core.Events.getEvent();if(a.length&&b.keyCode=="27"){a[a.length-1].hidden()}},"keydown")},__createMessageDialog:function(a,b){var c=new Ui.Dialog,d=this,e;c.setTemplate(a);b.width&&!isNaN(b.width)&&c.setSize({width:b.width});b.height&&!isNaN(b.height)&&c.setSize({height:b.height});c.nodes.subText&&(c.nodes.subText.innerHTML=b.subText||"");if(c.nodes.icon){c.nodes.icon.className=this.__iconSet[b.icon||"01"]["class"];c.nodes.icon.alt=this.__iconSet[b.icon||"01"]["alt"]}if(c.nodes.btnOk){c.nodes.btnOk.innerHTML=b.textOk||"确定";Core.Events.addEvent(c.nodes.btnOk,function(){c.hidden(b.renderer||d.__cfg.renderer);b.funcOk&&b.funcOk.call(c);Core.Events.stopEvent()},"click")}c.nodes.linkOk&&Core.Events.addEvent(c.nodes.linkOk,function(){var a=Core.Events.getEvent();if(a.keyCode=="13"){c.hidden(b.renderer||d.__cfg.renderer);b.funcOk&&b.funcOk.call(c)}},"keydown");c.setDragger(b.dragger||d.__cfg.dragger).setFixed(true).setAreaLocked(true);return this.__initDialog(c,b)},__initDialog:function(a,b){var c=this;b.zIndex&&(c.__zIndex=b.zIndex);a.nodes.titleName&&(a.nodes.titleName.innerHTML=b.title||"提示");if(a.nodes.btnClose){Core.Events.addEvent(a.nodes.btnClose,function(){var c=true;b.funcBeforeClose&&(c=b.funcBeforeClose.call(a)!==false);b.funcClose&&b.funcClose.call(a);c&&a.hidden()},"click");Core.Events.addEvent(a.nodes.btnClose,function(){Core.Events.stopEvent()},"mousedown")}a.setPosition({z:b.zIndex||c.__zIndex});a.setRenderer(b.renderer||this.__cfg.renderer);a.setDragger(b.dragger||this.__cfg.dragger);a.setMiddle();a.addEventListener("beforeHidden",function(){c.__updateDialogQueue(this,"remove")});a.addEventListener("beforeShow",function(){this.nodes.panel.parentNode.appendChild(this.nodes.panel);var a=this;if(!c.__isInitBgShadow){c.__initBGShadow(this,b.isAdamant||c.__cfg.isAdamant)}c.__setBGShadowOpacity(b.bgShadowOpacity!==0?b.bgShadowOpacity||.4:b.bgShadowOpacity);window.setTimeout(function(){c.__bgShadow.show();c.__updateDialogQueue(a,"add")},1)});a.setTitle=function(a){this.nodes.titleName&&(this.nodes.titleName.innerHTML=a)};a.setHelp=function(a){this.nodes.btnHelp&&(this.nodes.btnHelp.href=a)};a.close=function(){this.hidden()};a.getNodes=function(){return this.nodes};a.getX=function(){return this.x};a.getY=function(){return this.y};a.getWidth=function(){return this.width};a.getHeight=function(){return this.height};return a},__initBGShadow:function(a,b){var c=this.__getDocumentSize().width,d=this.__getDocumentSize().height,e=this;this.__bgShadow=new Ui.Panel;this.__bgShadow.setTemplate('<div id="#{panel}" style="background-color:black"></div>').setSize({width:c,height:d}).setAdamant(b).setFixed(true).setPosition({x:0,y:0,z:e.__zIndex});Core.Events.addEvent(window,function(){e.__bgShadow.setPosition({x:0,y:0}).setSize({width:e.__getDocumentSize().width,height:e.__getDocumentSize().height})},"resize");this.__isInitBgShadow=true},__updateDialogQueue:function(a,b){var c,d;if(b==="add"){this.__dialogQueue.push(a)}else if(b==="remove"){c=this.__dialogQueue.length;while(c--){this.__dialogQueue[c]===a&&this.__dialogQueue.splice(c,1)}}if(this.__dialogQueue.length===0){this.__bgShadow.hidden()}else{d=this.__dialogQueue[this.__dialogQueue.length-1];this.__bgShadow.nodes.panel.parentNode.insertBefore(this.__bgShadow.nodes.panel,d.nodes.panel);this.__bgShadow.__iframe&&this.__bgShadow.__iframe.parentNode.insertBefore(this.__bgShadow.__iframe,this.__bgShadow.nodes.panel);d.nodes.linkOk&&d.nodes.linkOk.style.display!=="none"&&d.nodes.linkOk.focus()}},__setBGShadowOpacity:function(a){a=isNaN(a)?0:Math.max(Math.min(a,1),0);Core.Dom.setStyle(this.__bgShadow.nodes.panel,"opacity",a)},__getDocumentSize:function(){var a=document.documentElement.clientWidth||document.body.clientWidth,b=document.documentElement.clientHeight||document.body.clientHeight;return{width:a,height:b}}});Ui.Transition={simple:function(a,b,c,d){return c*a/d+b},backEaseIn:function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},backEaseOut:function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backEaseInOut:function(a,b,c,d){var e=1.70158;if((a/=d/2)<1){return c/2*a*a*(((e*=1.525)+1)*a-e)+b}return c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bounceEaseOut:function(a,b,c,d){if((a/=d)<1/2.75){return c*7.5625*a*a+b}else if(a<2/2.75){return c*(7.5625*(a-=1.5/2.75)*a+.75)+b}else if(a<2.5/2.75){return c*(7.5625*(a-=2.25/2.75)*a+.9375)+b}else{return c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}},bounceEaseIn:function(a,b,c,d){return c-Transition.bounceEaseOut(d-a,0,c,d)+b},bounceEaseInOut:function(a,b,c,d){if(a<d/2){return Transition.bounceEaseIn(a*2,0,c,d)*.5+b}else{return Transition.bounceEaseOut(a*2-d,0,c,d)*.5+c*.5+b}},regularEaseIn:function(a,b,c,d){return c*(a/=d)*a+b},regularEaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},regularEaseInOut:function(a,b,c,d){if((a/=d/2)<1){return c/2*a*a+b}return-c/2*(--a*(a-2)-1)+b},strongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},strongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},strongEaseInOut:function(a,b,c,d){if((a/=d/2)<1){return c/2*a*a*a*a*a+b}return c/2*((a-=2)*a*a*a*a+2)+b},elasticEaseIn:function(a,b,c,d){var e,f;if(a==0){return b}if((a/=d)==1){return b+c}f=d*.3;if(!e||e<Math.abs(c)){e=c;var g=f/4}else{var g=f/(2*Math.PI)*Math.asin(c/e)}return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f))+b},elasticEaseOut:function(a,b,c,d){var e,f;if(a==0){return b}if((a/=d)==1){return b+c}if(!f){f=d*.3}if(!e||e<Math.abs(c)){e=c;var g=f/4}else{var g=f/(2*Math.PI)*Math.asin(c/e)}return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+c+b},elasticEaseInOut:function(a,b,c,d){var e,f;if(a==0){return b}if((a/=d/2)==2){return b+c}if(!f){var f=d*.3*1.5}if(!e||e<Math.abs(c)){var e=c;var g=f/4}else{var g=f/(2*Math.PI)*Math.asin(c/e)}if(a<1){return-.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b}return e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)*.5+c+b}};Ui.TweenStrategy=function(a,b,c,d){this.startValue=a||0;this.endValue=b||0;this.duration=c||0;this.motion=d||Ui.Transition.simple;this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$define({motion:null,duration:0,startValue:0,endValue:0,_itvID:0,_isTweenning:false,addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},start:function(){if(this._isTweenning){return}this._isTweenning=true;var a=this,b,c=this.startValue,d=this.endValue,e=this.duration,f,g=(new Date).getTime();this._itvID=window.setInterval(function(){b=((new Date).getTime()-g)/1e3;b>a.duration&&(b=a.duration);f=a.motion(b,c,d-c,e);a.onTween&&a.onTween(f);a.__eventDispatcher.dispatchEvent("tween",f);b==a.duration&&a.stop()},25);return this},stop:function(){window.clearInterval(this._itvID);this._isTweenning=false;this.onEnd&&this.onEnd();this.__eventDispatcher.dispatchEvent("end");return this},onTween:function(a){},onEnd:function(){}});Ui.OpacityRenderer=function(){this.__canShow=true;this.__canHidden=true;this.__node=null;this.__tween=new Ui.TweenStrategy(0,0,.6,Ui.Transition.strongEaseOut);this.__state="";this.__lastState="";this.__value=0;this.__node=null;this.__eventDispatcher=new Core.Events.EventDispatcher(this);this.__initTweenEvent()}.$implements(Ui.IRenderer).$define({setCanShow:function(a){this.__canShow=!!a},setCanHidden:function(a){this.__canHidden=!!a},show:function(a){var b=this.__tween;b.stop();Core.Dom.setStyle(a,"opacity",this.__value);a.style.display="";this.__node=a;this.__state="show";this.__eventDispatcher.dispatchEvent("beforeShow");if(this.__canShow){b.startValue=this.__value;b.endValue=1;b.start()}return this},hidden:function(a){var b=this.__tween;b.stop();this.__node=a;this.__state="hidden";this.__eventDispatcher.dispatchEvent("beforeHidden");if(this.__canHidden){b.startValue=this.__value;b.endValue=0;b.start()}return this},addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},__initTweenEvent:function(){var a=this;this.__tween.addEventListener("tween",function(b){a.__value=b;Core.Dom.setStyle(a.__node,"opacity",b)});this.__tween.addEventListener("end",function(){a.__node&&a.__node.style.filter&&(a.__node.style.filter="");if(a.__state!==""&&a.__state!==a.__lastState){a.__lastState=a.__state;a.__eventDispatcher.dispatchEvent(a.__state)}a.__state==="hidden"&&(a.__node.style.display="none")})}});Ui.BorderDragger=function(){this.__drag=null;this.__isBindEvent=false;this.__border=null;this.__dragNode=null;this.__isCreated=false;this.__tweenX=new Ui.TweenStrategy(0,0,.5,Ui.Transition.strongEaseOut);this.__tweenY=new Ui.TweenStrategy(0,0,.5,Ui.Transition.strongEaseOut);this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IDragger).$define({addEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.addEventListener(a,b)}else{this.__drag.addEventListener(a,b)}return this},removeEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.removeEventListener(a,b)}else{this.__drag.removeEventListener(a,b)}return this},setDrag:function(a,b,c){if(!this.__isCreated){this.__createBorder(b);this.__initTweenEvent(b)}this.__drag=new Ui.Drag(a,this.__border,c);this.__dragNode=b;this.__initDragEvent();return this},setLock:function(a){this.__drag.isLock=!!a;return this},setArea:function(a){this.__drag.lockArea=a;return this},destroy:function(){this.__drag.destroy()},__createBorder:function(a){this.__border=$C("div");var b=this.__border.style;b.border="2px dashed #BCC4D0";b.position="absolute";b.display="none";b.backgroundColor="transparent";b.MozUserSelect="none";document.body.appendChild(this.__border);this.__isCreated=true},__initDragEvent:function(){if(this.__isBindEvent){return}var a=this,b=this.__border.style,c=this.__dragNode.style,d=this.__tweenX,e=this.__tweenY;this.__drag.addEventListener("beforeDrag",function(){b.zIndex=c.zIndex+1;b.position=c.position;b.width=a.__dragNode.offsetWidth-4+"px";b.height=a.__dragNode.offsetHeight-4+"px";b.left=parseInt(c.left)+"px";b.top=parseInt(c.top)+"px";b.display=""});this.__drag.addEventListener("afterDrag",function(){if($IE6){c.left=parseInt(b.left)+"px";c.top=parseInt(b.top)+"px";b.display="none";a.__eventDispatcher.dispatchEvent("afterDrag")}else{d.startValue=parseInt(c.left);d.endValue=parseInt(b.left);e.startValue=parseInt(c.top);e.endValue=parseInt(b.top);d.start();e.start()}});this.__isBindEvent=true},__initTweenEvent:function(a){var b=a.style,c=this.__border.style,d=this;this.__tweenX.addEventListener("tween",function(a){b.left=a+"px"});this.__tweenY.addEventListener("tween",function(a){b.top=a+"px"});this.__tweenX.addEventListener("end",function(){c.display="none";d.__eventDispatcher.dispatchEvent("afterDrag")})}});var winDialog={};var DialogTemplate={};(function(){var a={alert:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示标题</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div id="#{content}" class="CP_layercon1">','<div class="CP_prompt">','<img id="#{icon}" class="SG_icon SG_icon201" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="50" height="50" align="absmiddle"/>','<table class="CP_w_ttl"><tr><td id="#{text}"></td></tr></table>','<div id="#{subText}" class="CP_w_cnt SG_txtb"></div>','<p class="CP_w_btns_Mid"><a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnOk}"> </cite></a></p>',"</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),newAlert:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div class="CP_layercon2 pop_v">','<div class="v_prompt">','<img id="#{icon}" class="SG_icon SG_icon148" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="20" height="20" align="absmiddle" />','<div id="#{text}" class="v_cnt SG_txtb"></div>','<div id="#{subText}"></div>','<p class="v_btns">','<a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#"><cite id="#{btnOk}">确定</cite></a>',"</p>","</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),confirm:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示标题</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div id="#{content}" class="CP_layercon1">','<div class="CP_prompt">','<img id="#{icon}" class="SG_icon SG_icon201" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="50" height="50" align="absmiddle"/>','<table class="CP_w_ttl"><tr><td id="#{text}"></td></tr></table>','<div id="#{subText}" class="CP_w_cnt SG_txtb"></div>','<p class="CP_w_btns">','<a  id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnOk}"></cite></a>','<a style="margin-left:5px;" id="#{linkCancel}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnCancel}"> <span id="#{cancel}"></span> </cite></a></p>',"</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),newConfirm:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div class="CP_layercon2 pop_v">','<div class="v_prompt">','<img id="#{icon}" class="SG_icon SG_icon148" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="20" height="20" align="absmiddle" />','<div id="#{text}" class="v_cnt SG_txtb"></div>','<div id="#{subText}"></div>','<p class="v_btns">','<a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#"><cite id="#{btnOk}">确定</cite></a>&nbsp;&nbsp;','<a id="#{linkCancel}" class="SG_aBtn SG_aBtnB SG_aBtn_g" href="#"><cite id="#{btnCancel}">取消</cite></a>',"</p>","</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),customs:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid">','<div class="bLyTop">','<strong id="#{titleName}">提示标题</strong>','<cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite>',"</div>","</th>",'<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid" id="#{content}">',"</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join("")};var b={"01":{"class":"SG_icon SG_icon201",alt:"警告"},"02":{"class":"SG_icon SG_icon202",alt:"失败"},"03":{"class":"SG_icon SG_icon203",alt:"成功"},"04":{"class":"SG_icon SG_icon204",alt:"询问"},"05":{"class":"SG_icon SG_bigLoading",alt:"正在加载"},"06":{"class":"SG_icon SG_icon148",alt:"警告"}};var c={};var d=new Ui.ModuleDialog(a,b,{renderer:Ui.OpacityRenderer,dragger:Ui.BorderDragger,isAdamant:$IE6});winDialog.create=winDialog.createCustomsDialog=function(a,b){if(b&&typeof b==="string"){c[b]=d.create(a);return c[b]}else{return d.create(a)}};winDialog.alert=function(a,b,e){if(e&&typeof e==="string"){c[e]=d.alert(a,b);return c[e]}else{return d.alert(a,b)}};winDialog.newAlert=function(a,b,e){if(e&&typeof e==="string"){c[e]=d.newAlert(a,b);return c[e]}else{return d.newAlert(a,b)}};winDialog.confirm=function(a,b,e){if(e&&typeof e==="string"){c[e]=d.confirm(a,b);return c[e]}else{return d.confirm(a,b)}};winDialog.newConfirm=function(a,b,e){if(e&&typeof e==="string"){c[e]=d.newConfirm(a,b);return c[e]}else{return d.newConfirm(a,b)}};winDialog.getDialog=function(a){if(a&&typeof a==="string"){return c[a]}};DialogTemplate=a})();Lib.Login.LoginPost=Core.Class.create();Lib.Login.LoginPost.prototype={url:"http://i.sso.sina.com.cn/js/ssologin.js",callback:null,initialize:function(a,b,c){window.sinaSSOConfig=new function(){if(c){this.from=c}this.pageCharset="utf-8";this.noActiveTime=14400;this.setDomain=true;this.entry="boke";this.customInit=function(){};this.customLoginCallBack=a;this.customLogoutCallBack=function(a){};this.useIframe=true}},login:function(a,b,c){function e(){if(typeof c=="undefined"){sinaSSOController.login(a,b)}else{sinaSSOController.login(a,b,c)}}var d=this;if(typeof sinaSSOController=="undefined"||!sinaSSOController){trace("no sso");Utils.Io.JsLoad.request(this.url,{onComplete:function(){e()},onException:function(){},timeout:3e4,isRemove:false})}else{trace("has sso");sinaSSOController.init();if(typeof sinaSSOController.setLoginType=="function"){sinaSSOController.setLoginType(2)}if(typeof sinaSSOController.getServerTime=="function"){sinaSSOController.getServerTime(a)}trace("init ok");e()}},parse:function(a){this.callback.call(a)}};Core.System.getScrollPos=function(a){a=a||document;var b=a.documentElement;var c=a.body;return[Math.max(b.scrollTop,c.scrollTop),Math.max(b.scrollLeft,c.scrollLeft),Math.max(b.scrollWidth,c.scrollWidth),Math.max(b.scrollHeight,c.scrollHeight)]};Core.Dom.getXY=function(a){if((a.parentNode==null||a.offsetParent==null||Core.Dom.getStyle(a,"display")=="none")&&a!=document.body){return false}var b=null;var c=[];var d;var e=a.ownerDocument;d=a.getBoundingClientRect();var f=Core.System.getScrollPos(a.ownerDocument);return[d.left+f[1],d.top+f[0]];b=a.parentNode;while(b.tagName&&!/^body|html$/i.test(b.tagName)){if(Core.Dom.getStyle(b,"display").search(/^inline|table-row.*$/i)){c[0]-=b.scrollLeft;c[1]-=b.scrollTop}b=b.parentNode}return c};if(!$IE){Core.Dom.getXY=function(a){if((a.parentNode==null||a.offsetParent==null||Core.Dom.getStyle(a,"display")=="none")&&a!=document.body){return false}var b=null;var c=[];var d;var e=a.ownerDocument;c=[a.offsetLeft,a.offsetTop];b=a.offsetParent;var f=Core.Dom.getStyle(a,"position")=="absolute";if(b!=a){while(b){c[0]+=b.offsetLeft;c[1]+=b.offsetTop;if($SAFARI&&!f&&Core.Dom.getStyle(b,"position")=="absolute"){f=true}b=b.offsetParent}}if($SAFARI&&f){c[0]-=a.ownerDocument.body.offsetLeft;c[1]-=a.ownerDocument.body.offsetTop}b=a.parentNode;while(b.tagName&&!/^body|html$/i.test(b.tagName)){if(Core.Dom.getStyle(b,"display").search(/^inline|table-row.*$/i)){c[0]-=b.scrollLeft;c[1]-=b.scrollTop}b=b.parentNode}return c}}(function(){var a;var b=parseInt(Math.random()*100);var c=[];var d=-1;var e="";var f="#userPosition {padding: 0;margin: 0;border: 0;position: absolute;z-index: 999;}				#sinaNote {position: absolute;z-index: 999999;width: auto;overflow: hidden;padding: 0;margin: 0;				border: 1px solid #CCCCCC;background: #ffffff;text-align:left;}				#sinaNote li {font-size: 12px;list-style: none;margin: 0 1px;height: 20px;padding: 0 5px;clear: both;				line-height: 20px;cursor: pointer;color: #999999;}				#sinaNote li.note {text-align: left;color: #999999;}";var g=window;var h={overfcolor:"#999",overbgcolor:"#e8f4fc",outfcolor:"#000000",outbgcolor:"",menuStatus:{"sina.com":true,"sina.cn":true,"vip.sina.com":true,"qq.com":true,"163.com":true,"126.com":true,"hotmail.com":true,"yahoo.com.cn":true,"gmail.com":true}};h.createNode=function(){var a=g.document;var b=a.createElement("div");b.innerHTML='<ul id="sinaNote" style="display:none;"></ul>';var c=a.createElement("style");c.setAttribute("type","text/css");try{if($IE){c.styleSheet.cssText=f}else{c.innerHTML=f}}catch(d){trace(d.message)}var e=a.createElement("div");e.appendChild(b);e.appendChild(c);a.body.appendChild(e)};h.arrowKey=function(a){if(a==38){if(d<=0){d=c.length}d--;h.selectLi(d)}if(a==40){if(d>=c.length-1){d=-1}d++;h.selectLi(d)}};h.showList=function(a){e="";var f=Core.Events.getEvent().keyCode;if(f==38||f==40){h.arrowKey(f);return false}if(!$E("sinaNote")){h.createNode()}var i=$E(a).value;var j={};var k=i.indexOf("@");var l="";var m="";if(k>-1){l=i.substr(k+1);m=i.substr(0,k)}c=[];d=0;c[c.length]="sinaNote_MenuItem_Title_"+b;for(var n in this.menuStatus){this.menuStatus[n]=true;if(l!=""&&l!=n.substr(0,l.length)){this.menuStatus[n]=false}else{c[c.length]="sinaNote_MenuItem_"+n+"_"+b}}var o='<li class="note">请选择登录类型</li>';o+='<li id="sinaNote_MenuItem_Title_'+b+'">'+i+"</li>";var p;for(var q in this.menuStatus){if(this.menuStatus[q]==true){if(m==""){p=i+"@"+q}else{p=m+"@"+q}o+='<li id="sinaNote_MenuItem_'+q+"_"+b+'" title="'+p+'">'+p+"</li>"}}$E("sinaNote").innerHTML=o;for(var r=0;r<i.length;r++){if(i.charCodeAt(r)<160){$E("sinaNote").style.display="";this.selectList(a)}else{this.hideList()}}var s=$E(a);var t=$E("sinaNote");var u=0;var v=0;var w;if(g!=window){w=Core.Dom.getXY(window.frameElement);u=w[0];v=w[1]}var x=s.offsetWidth;if(x<200){x=200}t.style.width=x-2+"px";var y=Core.Dom.getXY(s);t.style.left=y[0]-($IE?2:-1)+u+"px";t.style.top=y[1]+s.offsetHeight-($IE?2:-1)+v+"px"};h.selectList=function(a){var b=$E("sinaNote").getElementsByTagName("li");for(var c=1;c<b.length;c++){b[1].style.backgroundColor=h.overbgcolor;b[1].style.color=h.outfcolor;b[c].onmousedown=function(){var b=this.innerHTML;if(b.indexOf("非新浪邮箱")>-1){var c=b.split("@");$E(a).value=c[0]}else{$E(a).value=this.innerHTML}if(Core.Events.getEvent()!=null){Core.Events.stopEvent()}};b[c].onmouseover=function(){if(c!=1){b[1].style.backgroundColor=h.outbgcolor;b[1].style.color=h.overfcolor}this.style.backgroundColor=h.overbgcolor;this.style.color=h.outfcolor};b[c].onmouseout=function(){this.style.backgroundColor=h.outbgcolor;this.style.color=h.overfcolor;b[1].style.backgroundColor=h.overbgcolor;b[1].style.color=h.outfcolor}}};h.selectLi=function(a){var d;$E("sinaNote_MenuItem_Title_"+b).style.backgroundColor=h.outbgcolor;$E("sinaNote_MenuItem_Title_"+b).style.color=h.overfcolor;for(var f=0;f<c.length;f++){d=$E(c[f]);d.style.backgroundColor=h.outbgcolor;d.style.color=h.overfcolor}$E(c[a]).style.backgroundColor=h.overbgcolor;$E(c[a]).style.color=h.outfcolor;e=$E(c[a]).innerHTML};h.hideList=function(){if(!$E("sinaNote")){h.createNode()}$E("sinaNote").style.display="none"};h.init=function(a,b,c,d){d=d||window;if(d.document.body==null){setTimeout(Core.Function.bind3(function(){this.init(a,b,c,d)},this),100)}for(var f in b){this[f]=b[f]}Core.Events.addEvent(document,h.hideList,"click");Core.Events.addEvent(a,h.hideList,"blur");Core.Events.addEvent(a,Core.Function.bind3(h.showList,this,[a]),"keyup");Core.Events.addEvent(a,function(b){var d=Core.Events.getEvent().keyCode;var f;if(d==13||d==9){if(e!=""){var g=e;if(g.indexOf("非新浪邮箱")>-1){var h=g.split("@");a.value=h[0]+"@";f=false}else{a.value=e;f=true}}if(f){if(c!=null){setTimeout(function(){c.focus()},0)}}else{if(a){a.focus()}}}},"keydown");if(d){g=d}};Lib.passcardOBJ=h})();Lib.Login.Ui=Core.Class.create();var msnRefreshTimer=0;Lib.Login.Ui.prototype={dialog:null,isInit:false,request:null,callback:null,initialize:function(){},login:function(a,b,c){this.callback=a||null;this.clearDomain=b||false;this.from=c||null;this.initDom();this.initEvent();this.dialog.show();this.dialog.setAreaLocked(true);this.reloadName();this.onShow();this.focus();if(scope.$pageid==="blogMove"){$E("login_move_tip").style.display=""}if($IE6){this.initAD()}Lib.passcardOBJ.init($E("login_name_d"),{overfcolor:"#999",overbgcolor:"#e8f4fc",outfcolor:"#000000",outbgcolor:""},$E("login_pass_d"))},reloadName:function(){var a=Lib.Login.info();var b=a.ln;if(b){$E("login_name_d").value=b}var c=Utils.Cookie.getCookie("ALF");if(c!=""&&$E("login_save")){$E("login_save").checked=true;$E("login_save_tips").style.display="none"}c=Utils.Cookie.getCookie("LiRe");if(c!=""&&$E("login_save")){$E("login_save").checked=true;$E("login_save_tips").style.display="none"}},initDom:function(){var a=this;this.dialog=winDialog.createCustomsDialog({tpl:a.tpl});this.dialog.addEventListener("hidden",function(){this.destroy()});this.dialog.setContent(this.struc);this.dialog.setTitle("登录新浪博客");this.dialog.setMiddle()},initEvent:function(){var a=this.parse.bind2(this);this.request=new Lib.Login.LoginPost(a,this.clearDomain,this.from);Core.Events.addEvent("login_button",this.doLogin.bind2(this));Core.Events.addEvent("login_name_d",function(a){var b=a.keyCode;if(b==13){this.doLogin()}}.bind2(this),"keydown");Core.Events.addEvent("login_pass_d",function(a){var b=a.keyCode;if(b==13){this.doLogin()}}.bind2(this),"keydown");var b=1;Core.Events.addEvent("login_save",function(){if($E("login_save").checked){$E("login_save_tips").style.display=""}else{$E("login_save_tips").style.display="none"}if(b){var a="http://control.blog.sina.com.cn/blog_rebuild/riaapi/padblog/padInfo.php?ck_login=A00001&rnd="+Math.random();Utils.Io.JsLoad.request(a,{onComplete:function(){},onException:function(){}});b=null}})},doLogin:function(){Core.Events.stopEvent();var a=$E("login_name_d").value;var b=$E("login_pass_d").value;a=Core.String.trim(a);b=b;if(a==""){this.error("请输入登录名");return false}if(b==""){this.error("请输入密码");return false}if(typeof sinaSSOController!="undefined"&&typeof sinaSSOController.loginExtraQuery!="undefined"){if(typeof sinaSSOController.loginExtraQuery.door!="undefined"){var c=$E("login_vcode").value;sinaSSOController.loginExtraQuery.door=c||1}}if($E("login_save").checked){v7sendLog("48_01_38_1");this.request.login(a,b,60)}else{v7sendLog("48_01_38_0");this.request.login(a,b)}return false},parse:function(a){if(a.result){Lib.checkAuthor();if($E("login_save").checked){Utils.Cookie.setCookie("LiRe",true,2400,"/",".blog.sina.com.cn")}else{Utils.Cookie.setCookie("LiRe","",2400,"/",".blog.sina.com.cn")}var b=new Date,c=b.getFullYear(),d=b.getMonth(),e=b.getDate();var f=(new Date(c,d,e,24)).getTime();Utils.Cookie.setCookie("onceloggedonblog",f,720,"/",".blog.sina.com.cn");var g=this;function h(){if(this.callback){try{$tray.renderLogin()}catch(a){}this.callback.call()}else{window.location=window.location.toString().replace(/#.*/,"")}}var i=false;Utils.Io.JsLoad.request("http://login.sina.com.cn/bindmail/checkmailuser.php?entry=blog&name="+encodeURIComponent($E("login_name_d").value)+"&utf82gbk=1&callback=scope.$bindEmailAlert",{noreturn:true,timeout:5e3,onException:function(){if(!i){h.call(g)}}});scope.$bindEmailAlert=function(a){i=true;if(a.ret!="y"&&a.errcode!="not_verify"||Utils.Cookie.getCookie("sbr_noTBE")==1){h.call(g)}else{var b=winDialog.createCustomsDialog({content:['<div id="#{entityID} style="width:358px;height:144px" class="CP_layercon2 unilayer">','<div id="#{contentID}" class="CP_prompt">','<img height="50" align="absmiddle" width="50" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" class="SG_icon SG_icon201">','<table class="CP_w_ttl"><tbody><tr><td>经检测您的帐号存在一定的安全隐患！<br>建议绑定邮箱</td></tr></tbody></table>','<p class="CP_w_btns_Mid"><a href="javascript:;" class="SG_aBtn SG_aBtnB" id="#{bindit}" target="_blank"><cite> 绑定 </cite></a>&nbsp;&nbsp;<a href="javascript:;" class="SG_aBtn SG_aBtnB" id="#{nobind}"><cite> 暂不绑定 </cite></a></p>',"</div>",'<div class="unilayerB SG_j_linedot1">','<p class="SG_txtb"><input type="checkbox" id="#{noalertbind}"><label for="#{noalertbind}">一周内不提醒</label></p>',"</div>","</div>"].join(""),shadow:1},"bindEmail");b.setMiddle();b.show();b.nodes["btnClose"].onclick=function(){h.call(g);b.hidden()};b.nodes["nobind"].onclick=function(){setTimeout(function(){h.call(g);b.hidden()},100)};b.nodes["bindit"].href="http://login.sina.com.cn/bindmail/bindmail.php?entry=blog";b.nodes["bindit"].onclick=function(){h.call(g)};b.nodes["noalertbind"].onclick=function(){if(this.checked){Utils.Cookie.setCookie("sbr_noTBE","1",24*7,"/",".blog.sina.com.cn")}else{Utils.Cookie.setCookie("sbr_noTBE","",0,"/",".blog.sina.com.cn")}}}};this.dialog.hidden()}else{if(a.errno==="4049"){sinaSSOController.loginExtraQuery={door:0};$E("login_ckimg").style.display="";$E("login_vcode").value="";$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0";Core.Events.addEvent($E("reloadCode"),function(){$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0";$E("login_vcode").value="";$E("login_div_error").innerHTML=""});this.error("");return}if(a.errno==="2070"){Core.Events.fireEvent($E("reloadCode"),"click");this.error(a.reason);return}if(a.errno=="4047"){this.error(a.reason);return}else if(a.errno=="4057"){this.error(a.reason);return}else if(a.errno=="4040"){this.error(a.reason);return}this.error("登录名或密码错误");$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0";$E("login_vcode").value=""}},friendlyTip:function(a){var b=a;var c=$E("login_name_d");var d=c.value;var e=this;if(!/[\u0391-\uFFE5]+/.test(d)&&!/^\d+$/.test(d)&&!/^@/.test(d)){var f="你的登录名可能是 ";var g='<a href="#" class="underline" onclick="$_RENAME(/@.*/, \'{1}\');return false">{0}{1}</a>';var h=["@sina.com","@sina.cn"];var i="";if(/@sina\.cn$/.test(d)){i=g.format("{0}",h[0])}else if(/@sina\.com$/.test(d)){i=g.format("{0}",h[1])}else{i=g.format("{0}",h[0])+" 或 "+g.format("{0}",h[1])}b=(f+i).format(d.replace(/@.*/,""))}return b},rename:function(){window.$_RENAME=function(a,b){var c=$E("login_name_d");c.value=c.value.replace(a,"")+b;$E("login_pass_d").focus();$E("login_div_error").innerHTML=""};return window.$_RENAME}(),focus:function(){var a=$E("login_name_d");if(a.value==""){a.focus()}else{$E("login_pass_d").focus()}},initAD:function(){$E("login_ad").src="http://blog.sina.com.cn/lm/iframe/71/2008/0731/21.html"},onShow:function(){},error:function(a){$E("login_div_error").innerHTML=a;$E("login_pass_d").value="";this.focus()},tpl:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid">','<div class="bLyTop">','<strong id="#{titleName}">提示标题</strong>','<cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite>',"</div>","</th>",'<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid" id="#{content}">',"</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),struc:'		<div class="CP_layercon2 passLoginItem">			<div>				<div id="login_move_tip" style="display:none;margin-bottom:12px">可以使用新浪微博、邮箱、通行证的帐号进行登录</div>				<div class="boxA">登录名：					<input tabIndex="201" type="text" class="fm1" style="width:215px;" name="login_name" id="login_name_d" tabIndex=1/>  <a style="font-size: 12px;" href="http://login.sina.com.cn/signup/signupmail.php?entry=blog&srcuid='+scope.$uid+'&src=blogicp" target="_blank">立即注册</a>				</div>				<div class="boxA">密　码：					<input tabIndex="202" type="password" class="fm1" style="width:215px;" name="login_pass" maxlength="16" id="login_pass_d" tabIndex=2/>  <a style="font-size: 12px;" href="http://login.sina.com.cn/getpass.html" target="_blank">找回密码</a>				</div>				<div id="login_ckimg" class="boxA" style="display:none"> <p class="p_img">验证码：                  	<input type="text" id="login_vcode" name="login_vcode" class="fm1" size="10" maxlength="5" />                  	<img width="100" align="absmiddle" id="checkImg" src="http://login.sina.com.cn/cgi/pin.php?r='+Core.Math.getUniqueId()+'&s=0" /> <a href="javascript:;" onclick="return false;" style="font-size: 12px;"><span id="reloadCode">换一换</span></a></p> 			    </div>				<div class="ErrTips" id="login_div_error"></div>				<div class="boxB"><p><input tabIndex="203" type="checkbox" value="" id="login_save" checked="checked" /><label for="login_save"> 记住登录状态</label></p><p id="login_save_tips" style="color:#999;display:none;">建议在网吧/公用电脑上取消该选项</p><p style="margin-top: 8px;"><a id="login_button" class="SG_aBtn SG_aBtnB SG_aBtn_sub" href="javascript:;" tabIndex=204><cite>登录<input type="text"/></cite></a> </p></div>			</div>			<div class="connect_msn" id="connect_msn" style="position:relative;">				<span>使用 MSN 帐号登录博客</span>				<a href="#" onclick="Lib.checkAuthor();v7sendLog(\'48_01_36\'); window.open(\'https://login.live.com/oauth20_authorize.srf?client_id=0000000040046F08&redirect_uri=http%3A%2F%2Fcontrol.blog.sina.com.cn%2Fblog_rebuild%2Fmsn%2FmsnLoginCallBack.php&response_type=code&scope=wl.basic%20wl.signin%20wl.offline_access%20wl.share%20wl.emails\',\'neww\',\'left='+(screen.width-440)/2+",top="+(screen.height-400)/2+',height=400,width=440\');msnrefreshWindow();" style="background:transparent url(http://simg.sinajs.cn/blog7style/images/msn_login01.gif) no-repeat left top; width:70px; height:22px; line-height:22px; display:inline-block; text-align:left; text-indent:2em; text-decoration:none; color:white; font-weight:bold; font-size:14px;">登录</a>			</div>			<a href="http://blog.sina.com.cn/s/blog_4b0f52990100miil.html" target="_blank"style="left:308px;position:relative;top:-24px;">如何登录？</a>			<div class="CP_lg_ad SG_j_linedot1">				<iframe id="login_ad" src="http://blog.sina.com.cn/lm/iframe/71/2008/0731/21.html" frameborder="0" scrolling="no" height="25" width="auto"></iframe>			</div>		</div>'};$registJob("blog7thCount",function(){function o(a){var b;a=""+a;if(a.length<8){b=8-a.length}var c="";for(var d=0;d<b;d++){c+="0"}return c+a}function p(){Utils.Io.JsLoad.request("http://control.blog.sina.com.cn/blog_7years/videoNum.php",{onComplete:function(a){if(a.code=="A00006"){l.innerHTML=o(a.data.message);m=a.data.message;Utils.Cookie.setCookie("blog7Thx","true")}else{}},GET:{type:1,n:Math.random()}})}Lib.checkAuthor();var a="新浪博客七周年视频  博客七周年 感谢有你";var b="http://www.sinaimg.cn/blog/qing/image/luoyimei/video.jpg";var c="http://blog.sina.com.cn/blog_7years/blogvideo.html";var d="#新浪博客七周年#新浪博客七周年视频——《感谢有你》！感谢所有生活在新浪博客的博主们！:http://blog.sina.com.cn/blog_7years/blogvideo.html";var e="#新浪博客七周年#新浪博客七周年视频——《感谢有你》！感谢所有生活在新浪博客的博主们！http://video.sina.com.cn/v/b/84691108-2264489285.html";if($E("share_db")){$E("share_db").href="javascript:void((function(){var%20u='http://shuo.douban.com/!service/share?image=&href="+encodeURIComponent(c)+"&name="+encodeURIComponent(a)+"';window.open(u,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330');return%200;})());"}if($E("share_kx")){$E("share_kx").href="javascript:void(kaixin=window.open('http://www.kaixin001.com/~repaste/share.php?&rurl="+escape(c)+"&rtitle="+escape(a)+"&rcontent="+escape(d)+"','kaixin'));kaixin.focus();"}var f="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=2264489285&ralateUid=2264489285"+(scope.$ralateUid?"&ralateUid="+scope.$ralateUid:"")+"',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();scope.weiboLog();})(screen,document,encodeURIComponent,'','','"+b+"','"+e+"','"+c+"','utf-8'));";if($E("share_weibo")){$E("share_weibo").href=f}scope.weiboLog=function(){v7sendLog("50_01_07")};if($E("share_rr")){$E("share_rr").href="javascript:void(function(){var renren=window.open('http://share.renren.com/share/buttonshare.do?link="+encodeURIComponent(c)+"&title="+a+"&content="+encodeURIComponent(d)+"');}())"}var g=$E("userLoginDiv");var h=$E("userLogin");if(g){if($isLogin){var i='你好，<a target="_blank" href="http://blog.sina.com.cn/u/'+$UID+'" class="nikename">'+$nick.substring(0,6)+'</a><a href="http://login.sina.com.cn/cgi/login/logout.php">退出</a>';g.innerHTML=i}if(h){h.onclick=function(){(new Lib.Login.Ui).login(function(){location.reload()});return}}}var j=$E("myThx");var k=$E("didThx");var l=$E("thxCount");var m=0;var n=Utils.Cookie.getCookie("blog7Thx");if(n){k.style.display="";j.style.display="none"}p();if(j){j.onclick=function(a){if(n)return;Core.Events.stopDefaultEvent(a);v7sendLog("50_01_11");Utils.Io.JsLoad.request("http://control.blog.sina.com.cn/blog_7years/videoNum.php",{onComplete:function(a){if(a.code=="A00006"){j.style.display="none";k.style.display="";l.innerHTML=o(parseInt(a.data.message)+parseInt(m))}else{var b=winDialog.alert(a.data.message,{funcOk:function(){},textOk:"确定",title:"提示",icon:"01"})}},GET:{n:Math.random()}})}}var q=setInterval(p,5e3)});$registJob("loginStatus",function(){Lib.checkAuthor();var a=Utils.Cookie.getCookie;var b=Utils.Cookie.setCookie;var c=a("_s_loginStatus");var d=a("_s_loginuid");if($isLogin){if(d===$UID){return}}else{if(!c||c===d){return}}b("_s_loginuid",$UID||c,24-(new Date).getHours(),"","blog.sina.com.cn");var e="http://control.blog.sina.com.cn/blog_rebuild/riaapi/padblog/padInfo.php?rnd="+Math.random();Utils.Io.JsLoad.request(e,{onComplete:function(){},onException:function(){}})});Utils.Io.loadCss=function(a,b){if(a==null){return false}b=b||window;var c=b.document;a.id=a.id||"";var d;if(a.url){d=c.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",a.url)}else if(a.text){d=c.createElement("style");d.setAttribute("type","text/css");if($IE){d.styleSheet.cssText=a.text}else{d.innerHTML=a.text}}d.setAttribute("id",a.id);c.getElementsByTagName("head")[0].appendChild(d)};Lib.register=function(a,b){var c=a.split(".");var d={},e,f=Lib;while(e=c.shift()){if(c.length){if(f[e]===undefined){f[e]={}}f=f[e]}else{if(f[e]===undefined){f[e]=b(Lib)}}}};Lib.register("util.loadScript",function(){var a=!0,b=!1,c={};var d=function(d,e){Utils.Io.JsLoad.request(d,{isRemove:b,noreturn:a,onComplete:function(a){c[d].isLoading=b;var e=c[d].cb;for(var f=0,g=e.length;f<g;f++){e[f](a)}c[d].cb=null}})};return function(b,e){var f=c[b];var g=f&&f["cb"];if(!f){g=[e];f={isLoading:a,cb:g};c[b]=f;d(b,f)}else if(f.isLoading){g.push(e)}else{e()}}});Lib.register("sendSuda",function(a){var b="http://www.sinaimg.cn/unipro/pub/suda_s_v851c.js";return function(c){a.util.loadScript(b,c)}});$registJob("suda",function(){function e(a,b,d,e,f){if(c){v7sendLog(f)}switch(a){case"index":case"indexM":v7sendLog(b);break;case"editor":v7sendLog(d);break;case"articletj":v7sendLog(e);break}}var a=scope&&scope.$pageid;var b=window.location.href;var c=b.indexOf("tj=1")>-1;var d=a&&(a==="articletj"||a==="index"||a==="indexM"||a==="editor"||c);if(d){var f=encodeURIComponent(b);var g=encodeURIComponent(document.referrer)}if(typeof _S_pSt=="function"){if(d){v7sendLog("42_01_03_"+(new Date).getTime()+"_"+f+"_"+g)}return}if(d){if(!$isLogin){var h="42_01_01_"+(new Date).getTime()+"_"+f+"_"+g}else{var h="42_01_01_"+$UID+"_"+(new Date).getTime()+"_"+f+"_"+g}e(a,"42_01_08","42_01_14",h,"42_01_05")}Lib.sendSuda(function(){try{_S_pSt("")}catch(b){}if(d){if(!$isLogin){var c="42_01_02_"+(new Date).getTime()+"_"+f+"_"+g}else{var c="42_01_02_"+$UID+"_"+(new Date).getTime()+"_"+f+"_"+g}e(a,"42_01_09","42_01_15",c,"42_01_06")}})});

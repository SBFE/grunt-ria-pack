function $E(t){var e="string"==typeof t?document.getElementById(t):t;return null!=e?e:null}function $C(t){return document.createElement(t)}function $N(t){return document.getElementsByName(t)}function $T(t,e){return t.getElementsByTagName(e)}function Jobs(t){this.option=t||{},this._jobTable=[[],[],[],[]]}function CustomsDialog(t,e){this.nodesPattern=/[^\{\}]+(?=\})/g,this._dialog=DialogManager.create(t,e),this.entity=this._dialog.entity,this.templateString="",this.nodes={};var i=this;!function(){i._dialog.onDrag=function(){$IE6?this.getProperty().isFixed&&this.setPosition({x:parseInt(this.entity.style.left)-document.documentElement.scrollLeft,y:parseInt(this.entity.style.top)-document.documentElement.scrollTop}):this.getProperty().isFixed&&this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)}),i.onDrag()},i.updateNodes(),i.nodes.btnClose&&Core.Events.addEvent(i.nodes.btnClose,function(){var t=Core.Events.getEvent();t&&(t.cancelBubble=!0)},"mousedown")}(),this._hiddenDialog=function(){i.hidden()},this._closeDialog=function(){i.close()}}function v6SendLog(){}function v7sendLog(t,e,i){return t?(3==t.split("_").length&&(Lib.checkAuthor(),$isLogin&&(t+="_"+$UID)),"undefined"==typeof scope&&(window.scope={},scope.$pageid=""),e=e||scope.$pageid,i=i||"",void Utils.Io.JsLoad.request("http://hits.sinajs.cn/A2/b.html?type="+t+"&pageid="+e+"&msg="+i,{onComplete:function(){}})):!1}function msnrefreshWindow(){function t(t){if(trace("has Account"),t){trace("alt:"+t);var e=$C("iframe");e.setAttribute("height",0),e.setAttribute("width",0),document.body.appendChild(e),e.src="https://login.sina.com.cn/sso/login.php?entry=blogmsn&service=blogmsn&alt="+encodeURIComponent(t)+"&savestate=7&returntype=TEXT",function(){var t=arguments.callee;return t.count||(t.count=0),t.count++>10?(trace("放弃获取SUP"),void e.parentNode.removeChild(e)):(trace("尝试获取SUP, count:"+t.count),o("SUP")?(trace("获取到 SUP"+o("SUP")),void window.location.reload()):void setTimeout(t,1e3))}()}else window.location.reload()}function e(){trace("noAccount"),window.location.href="http://blog.sina.com.cn/blog_rebuild/msn/interface/connect_user_confirm.php"}function i(t){var e=new Date;e.setTime(e.getTime()-1),document.cookie=t+"=_pass;path=/;domain=.blog.sina.com.cn;expires="+e.toGMTString()}var n=Utils.Cookie.setCookie,o=Utils.Cookie.getCookie;clearTimeout(msnRefreshTimer);var s=o("reg_token");if(!s)return trace("no token..."),void(msnRefreshTimer=setTimeout(msnrefreshWindow,1e3));trace("token find out..."),n("reg_token","","","/",".blog.sina.com.cn");var r,a,l,d=o("c_uid"),c=o("msnLinkCB"),h=o("AlT");if(n("msnLoginComeFrom",window.location.href,1,"/",".blog.sina.com.cn"),c&&(r=c.split("_"),a=r[0],l=r[1]),d==a)switch(l){case"noCid":break;case"loginError":break;case"unlink":i("msnLinkCB"),e(s);break;case"done":i("msnLinkCB"),n("loginFromMsn","msn",24,"/",".blog.sina.com.cn"),t(h,s);break;case"pass":}}function main(){var t=new Jobs;t.add("blog7thCount"),t.add("suda"),t.add("loginStatus"),t.start()}"undefined"==typeof Sina&&(Sina={}),Sina.pkg=function(t){if(!t||!t.length)return null;for(var e=t.split("."),i=Sina,n="Sina"==e[0]?1:0;n<e.length;++n)i[e[n]]=i[e[n]]||{},i=i[e[n]];return i};try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}!function(){var t=function(t,e){var i=t;return function(){return i.apply(e,arguments)}},e="Debug";(null==window[e]||"undefined"==typeof window[e].log)&&(window[e]={cacheData:[],base_url:"http://sjs.sinajs.cn/bind2/",product:scope.$PRODUCT_NAME,baseColor:{1:{color:"#FFF",bgcolor:"#E00"},2:{color:"#F00"},3:{color:"#FFF000"},4:{color:"#0F0"},5:{color:"#FFF"}},fatal:function(t){this.addData(t,1)},error:function(t){this.addData(t,2)},warning:function(t){this.addData(t,3)},info:function(t){this.addData(t,4)},log:function(t){this.addData(t,5)},dir:function(t){this.addData(t,5)},addData:function(t,e,i,n){if(null!=t){"object"!=typeof t&&(t=t.toString());var o={type:e||"5",color:i||this.baseColor[e].color,bgcolor:n||this.baseColor[e].bgcolor};this.cacheData.push([t,o]),1==this.initFinished&&this.showCurrentData([t,o])}}},window.trace=t(window[e].log,window[e]),window.traceError=t(window[e].error,window[e]))}(),Sina.pkg("Core"),"undefined"==typeof Core&&(Core=Sina.Core),Sina.pkg("Core.Array"),Core.Array.foreach=function(t,e){if(null==t&&t.constructor!=Array)return[];for(var i=0,n=t.length,o=[];n>i;){var s=e(t[i],i);null!==s&&(o[o.length]=s),i++}return o},Sina.pkg("Core.Events"),function(t){function e(t,e){var i;for(i in e)t[i]=e[i]}var i=navigator.userAgent.toLowerCase(),n={$winXP:/windows nt 5.1/.test(i),$winVista:/windows nt 6.0/.test(i),$win7:/windows nt 6.1/.test(i),$macOS:/mac/.test(i)},o={$OPERA:!1,$IE6:!1,$IE7:!1,$IE8:!1,$IE9:!1,$SAFARI:!1,$FF2:!1,$FF3:!1,$FF4:!1,$FF:!1,$CHROME:!1,$TT:!1,$360:!1,$SOGO:!1,$Maxthon:!1},s={$IE:0,$MOZ:!1,$WEBKIT:!1,$KHTML:!1};if(/opera/.test(i)||t.opera)o.$OPERA=!0;else if(/chrome\/(\S+)/.test(i))o.$CHROME=!0;else if(/safari\/(\S+)/.test(i))o.$SAFARI=!0;else if(/msie/.test(i)){s.$IE=!0,/360se/.test(i)?o.$360=!0:/tencenttraveler/.test(i)?o.$TT=!0:/se\s\S+\smetasr\s\d+\.\d+/.test(i)&&(o.$SOGO=!0);var r=i.match(/msie (\d+)/),a=parseInt(r[1]);s.$IE=a,8===a?o.$IE8=!0:6===a?o.$IE6=!0:9===a?o.$IE9=!0:7===a?o.$IE7=!0:10===a&&(o.$IE10=!0)}else if(/firefox/.test(i)){var r=i.match(/firefox\/(\d+)/);o.$FF=parseInt(r[1]),/firefox\/3/.test(i)?o.$FF3=!0:/firefox\/4/.test(i)?o.$FF4=!0:/firefox\/2/.test(i)&&(o.$FF2=!0)}try{var l=window.external;o.$Maxthon=l.max_version?!0:!1}catch(d){}/applewebkit\/(\S+)/.test(i)?s.$WEBKIT=!0:/khtml\/(\S+)/.test(i)?s.$KHTML=!0:/rv:([^\)]+)\) gecko\/\d{8}/.test(i)&&(s.$MOZ=!0),o.$MOBILE=/mobile/i.test(i),o.$MOBILE||(o.$MOBILE=/HTC/.test(i)),e(t,o),e(t,s),e(t,n)}(window),Core.Events.addEvent=function(t,e,i,n){var o="string"==typeof t?$E(t):t;if(null==o)return void trace("addEvent 找不到对象："+t);if("undefined"==typeof n&&(n=!1),"undefined"==typeof i&&(i="click"),o.addEventListener)return"mousewheel"==i&&$FF&&(i="DOMMouseScroll"),o.addEventListener(i,e,n),!0;if(o.attachEvent){{o.attachEvent("on"+i,e)}return!0}o["on"+i]=e},Core.Events.removeEvent=function(t,e,i){var n=$E(t);return null==n?void trace("removeEvent 找不到对象："+t):void("function"==typeof e&&("undefined"==typeof i&&(i="click"),n.addEventListener?n.removeEventListener(i,e,!1):n.attachEvent&&n.detachEvent("on"+i,e),e[i]=null))},Sina.pkg("Core.Function"),Core.Function.bind3=function(t,e,i){i=null==i?[]:i;var n=t;return function(){return n.apply(e,i)}},Core.Array.findit=function(t,e){var i=-1;return Core.Array.foreach(t,function(t,n){e==t&&(i=n)}),i},window.onerror=function(t,e,i){return trace("Error occured:"+t+"<br/>file:"+e+"<br/>line:"+i+"<br/>"),!0},Jobs.prototype={_registedJobTable:{},errorMsg:[],_registJob:function(t,e){this._registedJobTable[t]=e},error:function(t){Debug.error(t),this.errorMsg.push(t)},add:function(t,e){e=e||1,-1==Core.Array.findit(this._jobTable[e],t)?this._jobTable[e].push(t):this.error("Error: Job <b>"+t+"</b> is existed now.")},start:function(){null!=this.option.onStart&&this.option.onStart();var t=(this._registedJobTable,this._jobTable[1].concat(this._jobTable[2])),e=this;this.fe=Core.Function.bind3(e.focus,e,[]);var i=function(){return 0==e._jobTable[3].length?void(null!=e.option.onEnd&&e.option.onEnd()):(Core.Events.addEvent(document.body,e.fe,"focus"),Core.Events.addEvent(window,e.fe,"scroll"),Core.Events.addEvent(document.body,e.fe,"mousemove"),void Core.Events.addEvent(document.body,e.fe,"mouseover"))};this.queue(t,i)},focus:function(){var t=this;if(this.focusdown)return Core.Events.removeEvent(document.body,t.fe,"focus"),Core.Events.removeEvent(window,t.fe,"scroll"),Core.Events.removeEvent(document.body,t.fe,"mousemove"),Core.Events.removeEvent(document.body,t.fe,"mouseover"),void(t.fe=null);this.focusdown=!0;var e=this._jobTable[3];this.queue(e,this.option.onEnd)},queue:function(t,e){var i=this,n=function(){return(new Date).valueOf()},o=this._registedJobTable,s=t.length,r=0,a=window.setInterval(function(){if(r>=s)return clearInterval(a),a=null,void(null!=e&&e());var l=t[r],d=o[l];if(r++,"undefined"==typeof d)return void i.error("<b>Job["+l+"] is undefiend!!!</b>");var c=!0,h=n();try{d.call()}catch(u){throw i.error("<b>Job["+l+"] failed!!!</b>"+u.message),null!=e&&e(),c=!1,u}finally{if(c){var f=n();Debug.info("<b>Job["+l+"] done in "+(f-h)+"ms.</b>")}}},10)},call:function(t,e){"undefined"!=typeof this._registedJobTable[t]?this._registedJobTable[t].apply(this,e):trace("<b>Job["+t+"] is undefined!!!</b>",{color:"#900",bgColor:"#FFF;"})}},$registJob=function(t,e){Jobs.prototype._registJob(t,e)},$callJob=function(t){var e=[];arguments.length>1&&(Core.Array.foreach(arguments,function(t,i){e[i]=t}),e.shift()),Jobs.prototype.call(t,e)},Sina.pkg("Utils"),"undefined"==typeof Utils&&(Utils=Sina.Utils),Sina.pkg("Utils.Io"),Sina.pkg("Core.System"),function(){var t=function(t,e){var i;try{if("undefined"!=typeof e)for(i in t)null!=e[i]&&(t[i]=e[i])}finally{return i=null,t}};Core.System.parseParam=t}(),Sina.pkg("Core.String"),Utils.Url=function(t){t=t||"",this.url=t,this.query={},this.parse()},Utils.Url.prototype={parse:function(t){t&&(this.url=t),this.parseAnchor(),this.parseParam()},parseAnchor:function(){var t=this.url.match(/\#(.*)/);t=t?t[1]:null,this._anchor=t,null!=t&&(this.anchor=this.getNameValuePair(t),this.url=this.url.replace(/\#.*/,""))},parseParam:function(){var t=this.url.match(/\?([^\?]*)/);t=t?t[1]:null,null!=t&&(this.url=this.url.replace(/\?([^\?]*)/,""),this.query=this.getNameValuePair(t))},getNameValuePair:function(t){var e={};return t.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(t,i,n){""!=i&&(e[i]=n||"")}),e},getParam:function(t){return this.query[t]||""},clearParam:function(){this.query={}},setParam:function(t,e){if(null==t||""==t||"string"!=typeof t)throw new Error("no param name set");this.query=this.query||{},this.query[t]=e},setParams:function(t){this.query=t},serialize:function(t){var e=[];for(var i in t)e.push(null==t[i]||""==t[i]?i+"=":i+"="+t[i]);return e.join("&")},toString:function(){var t=this.serialize(this.query);return this.url+(t.length>0?"?"+t:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(t){return this.anchor?"#"+this.serialize(this.anchor):t?"#":""}},Core.String.encodeDoubleByte=function(t){return"string"!=typeof t?t:encodeURIComponent(t)},Utils.Io.JsLoad={},function(){function t(t,i){e(t,i);var n,o=t.urls,s=o.length;for(n=0;s>n;n++){var r=$C("script");r.src=o[n].url,r.charset=o[n].charset,r.onload=r.onerror=r.onreadystatechange=function(){r&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(i.script_loaded_num++,r.onload=r.onreadystatechange=r.onerror=null,!1!==t.isRemove&&(r.src="",r.parentNode.removeChild(r)),r=null)},document.getElementsByTagName("head")[0].appendChild(r)}}function e(t,e){var i,n,o,s,r,a=t.urls,l=t.GET,d=a.length;for(i=0;d>i;i++){r=window.parseInt(1e8*Math.random()),o=new Utils.Url(a[i].url);for(n in l)1==t.noencode?o.setParam(n,l[n]):o.setParam(n,Core.String.encodeDoubleByte(l[n]));s=o.getParam("varname")||"requestId_"+r,1!=t.noreturn&&o.setParam("varname",s),e.script_var_arr.push(s),a[i].url=o.toString(),a[i].charset=a[i].charset||t.charset}}function i(e,i){var n={isRemove:!0,urls:[],charset:"utf-8",noreturn:!1,noencode:!1,timeout:-1,POST:{},GET:{},onComplete:null,onException:null},o={script_loaded_num:0,is_timeout:!1,is_loadcomplete:!1,script_var_arr:[]};n.urls="string"==typeof e?[{url:e}]:e,Core.System.parseParam(n,i),t(n,o),function(){if(1!=n.noreturn||null!=n.onComplete){var t,e=[];if(o.script_loaded_num!=n.urls.length)1!=o.is_timeout&&setTimeout(arguments.callee,50);else if(o.is_loadcomplete=!0,null!=n.onComplete){for(t=0;t<o.script_var_arr.length;t++)e.push(window[o.script_var_arr[t]]);n.onComplete(o.script_var_arr.length<2?e[0]:e)}}}(),n.timeout>0&&setTimeout(function(){1!=o.is_loadcomplete&&(null!=n.onException&&n.onException(),o.is_timeout=!0)},n.timeout)}Utils.Io.JsLoad.request=function(t,e){new i(t,e)}}(),Core.System.winSize=function(t){var e,i;return target=t?t.document:document,self.innerHeight?(target=t?t.self:self,e=target.innerWidth,i=target.innerHeight):target.documentElement&&target.documentElement.clientHeight?(e=target.documentElement.clientWidth,i=target.documentElement.clientHeight):target.body&&(e=target.body.clientWidth,i=target.body.clientHeight),{width:e,height:i}},Core.Events.getEvent=function(){return window.event},(!$IE||$IE>8)&&(Core.Events.getEvent=function(){if(!$IE&&window.event)return window.event;for(var t,e=arguments.callee.caller,i=0;null!=e&&40>i;){if(t=e.arguments[0],t&&(t.constructor==Event||t.constructor==MouseEvent))return t;i++,e=e.caller}return t}),Core.Events.stopEvent=function(t){var e=t?t:Core.Events.getEvent();null!=e&&(e.cancelBubble=!0,e.returnValue=!1)},(!$IE||$IE>8)&&(Core.Events.stopEvent=function(t){var e=t?t:Core.Events.getEvent();null!=e&&(e.preventDefault(),e.stopPropagation())}),Sina.pkg("Core.Dom"),Core.Dom.setStyle=function(t,e,i){switch(e){case"opacity":t.style.filter="alpha(opacity="+100*i+")",t.currentStyle&&t.currentStyle.hasLayout||(t.style.zoom=1);break;case"float":e="styleFloat";default:t.style[e]=i}},$IE&&9>$IE||(Core.Dom.setStyle=function(t,e,i){"float"==e&&(e="cssFloat"),t.style[e]=i}),Sina.pkg("Ui"),"undefined"==typeof Ui&&(Ui=Sina.Ui),Core.Function.bind2=function(t,e){var i=t;return function(){return i.apply(e,arguments)}},Function.prototype.bind2=function(t){var e=this;return function(){return e.apply(t,arguments)}},Ui.Template=function(t){this.tmpl=t,this.pattern=/(#\{(.*?)\})/g},Ui.Template.prototype={evaluate:function(t){return this.tmpl.replace(this.pattern,function(){return t[arguments[2]]||""})},evaluateMulti:function(t,e){var i=[];return Core.Array.foreach(t,Core.Function.bind2(function(n,o){o=e?t.length-o:o,i[o]=this.evaluate(n)},this)),i.join("")}};var Layer=function(t){this.entity=null,this.ifm=null;var e=this,i={width:0,height:0,x:0,y:0,isFixed:!1,uniqueID:"",entityID:"",contentID:"",template:t,templateString:"",nodes:{}};this.getProperty=function(){return i},function(){var t=e.getProperty();t.uniqueID="_"+e.getUniqueID(),t.entityID=t.uniqueID+"_entity",t.contentID=t.uniqueID+"_content",e.setTemplate(t.template),t.width=parseInt(e.entity.style.width),$IE6&&e.addIframe(),document.body.appendChild(e.entity),e.hidden()}(),this._ie6Fixed=function(){e.entity.style.left=document.documentElement.scrollLeft+e.getProperty().x+"px",e.entity.style.top=document.documentElement.scrollTop+e.getProperty().y+"px",e.ifm&&(e.ifm.style.left=document.documentElement.scrollLeft+e.getProperty().x+"px",e.ifm.style.top=document.documentElement.scrollTop+e.getProperty().y+"px")}};Layer.prototype={setTemplate:function(t){var e=this.getProperty();if(this.entity&&(this.entity.parentNode.removeChild(this.entity),this.entity=null),"object"==typeof t){if(e.nodes=t,this.entity&&(this.entity.parentNode.removeChild(this.entity),this.entity=null),this.entity=e.nodes.entity,document.body.appendChild(this.entity),!e.nodes.entity||!e.nodes.content)throw new Error("[layer.js] missing entity or content in layer nodes");return this.entity.style.position="absolute",this.entity.style.zIndex="1024",this.entity.style.left=e.x+"px",this.entity.style.top=e.y+"px",void 0}var i=/[^\{\}]+(?=\})/g;e.template=t,e.templateString=e.template.match(i),this.entity=$C("div");var n=$C("div"),o=new Ui.Template(e.template);if(n.innerHTML=o.evaluate(this.getNodes("i")),document.body.appendChild(n),!$E(e.entityID)||!$E(e.contentID))throw new Error("[layer.js] there missing #{entityID} or #{contentID} in layer template");this.entity=$E(e.entityID),this.entity.style.position="absolute",this.entity.style.zIndex="1024",this.entity.style.left=e.x+"px",this.entity.style.top=e.y+"px",document.body.replaceChild(this.entity,n),n=null,e.nodes=this.getNodes()},setSize:function(t){var e=this.getProperty();Core.System.parseParam(e,t),t.width&&(e.nodes.content.style.width=e.width+"px"),t.height&&(e.nodes.content.style.height=e.height+"px"),this.updateIfmSize()},setPosition:function(t){var e=this.getProperty();Core.System.parseParam(e,t),this.entity.style.left=e.x+"px",this.entity.style.top=e.y+"px",$IE6&&e.isFixed&&(this.entity.style.left=e.x+document.documentElement.scrollLeft+"px",this.entity.style.top=e.y+document.documentElement.scrollTop+"px"),this.ifm&&(this.ifm.style.left=this.entity.style.left,this.ifm.style.top=this.entity.style.top)},getWidth:function(){var t=this.entity.style.display,e=this.entity.style.visibility;return this.entity.style.visibility="hidden",this.entity.style.display="",w=this.entity.offsetWidth,this.entity.style.display=t,this.entity.style.visibility=e,w},getHeight:function(){var t=this.entity.style.display,e=this.entity.style.visibility;return this.entity.style.visibility="hidden",this.entity.style.display="",h=this.entity.offsetHeight,this.entity.style.display=t,this.entity.style.visibility=e,h},getX:function(){return parseInt(this.entity.style.left)},getY:function(){return parseInt(this.entity.style.top)},updateIfmSize:function(){if(this.ifm){var t=this;t.ifm.style.width=t.entity.offsetWidth+"px",t.ifm.style.height=t.entity.offsetHeight+"px"}},setFixed:function(t){var e=this.getProperty();e.isFixed=t;var i=this;return $IE6?(i.entity.style.position="absolute",void(e.isFixed?(i._ie6Fixed(),Core.Events.addEvent(window,i._ie6Fixed,"scroll")):Core.Events.removeEvent(window,i._ie6Fixed,"scroll"))):e.isFixed&&$FF2?void i.updateFixed():void(this.entity.style.position=e.isFixed?"fixed":"absolute")},updateFixed:function(){var t=this.getProperty();if(t.isFixed&&$FF2){var e=this,i=t.x,n=t.y;e.entity.style.position="absolute",e.setPosition({x:t.x+document.documentElement.scrollLeft,y:t.y+document.documentElement.scrollTop}),e.entity.style.position="fixed",e.setPosition({x:i,y:n})}},show:function(){this.entity.style.display="",this.ifm&&(this.ifm.style.display="",this.updateIfmSize())},hidden:function(){this.entity.style.display="none",this.ifm&&(this.ifm.style.display="none")},addIframe:function(){this.ifm=$C("iframe"),this.ifm.style.position="absolute",this.ifm.style.zIndex="1024",this.ifm.style.left=this.entity.style.left,this.ifm.style.top=this.entity.style.top,document.body.appendChild(this.ifm),Core.Dom.setStyle(this.ifm,"opacity",0)},getNodes:function(t){var e,i=this.getProperty(),n=t||"o",o={},s=i.templateString;if(s)for(e=0;e<s.length;e++){var r=s[e];switch(n){case"o":o[r]=$E(i.uniqueID+"_"+r);break;case"i":o[r]=i.uniqueID+"_"+r}}return"entity"in o?o:i.nodes},getUniqueID:function(){return parseInt(1e4*Math.random()).toString()+(new Date).getTime().toString()},setContent:function(t){var e=this.getProperty();t&&(e.nodes.content.innerHTML=t)}},Core.Dom.getStyle=function(t,e){switch(e){case"opacity":var i=100;try{i=t.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(n){try{i=t.filters("alpha").opacity}catch(n){}}return i/100;case"float":e="styleFloat";default:var o=t.currentStyle?t.currentStyle[e]:null;return t.style[e]||o}},(!$IE||$IE>8)&&(Core.Dom.getStyle=function(t,e){"float"==e&&(e="cssFloat");try{var i=document.defaultView.getComputedStyle(t,"")}catch(n){traceError(n)}return t.style[e]||i?i[e]:null}),function(){function t(t){try{var e=t.constructor.toString().toLowerCase();return e.slice(e.indexOf("function")+9,e.indexOf("()"))}finally{e=null}}function e(t,e){var i,n,o=[];for(n=e.length,i=0;n>i;i++)o[o.length]=parseFloat(Core.Dom.getStyle(t,e[i]));return o}function i(e){return"array"!=t(e)?[e]:e}function n(e,i){try{var n,s,r,a=t(e),l=[],d=[];if("array"!=a)r=o(e),r[1]="opacity"==i?"":r[1],l=[r[0]],d=[r[1]];else for(s=e.length,n=0;s>n;n++)r=o(e[n]),r[1]="opacity"==i[n]?"":r[1],l[l.length]=r[0],d[d.length]=r[1];return[l,d]}finally{a=l=d=n=s=r=null}}function o(t){try{var e=/(-?\d.?\d*)([a-z%]*)/i.exec(t);return[e[1],e[2]?e[2]:"px"]}finally{e=null}}function s(t){try{var e,i=d(t);return 1!=c[i]?(e=new r,h[i]={node:t,func:e},c[i]=!0,e):h[i].func}finally{i=e=null}}function r(){this._timer=null}function a(t){var e=s(t);e.start.apply(e,arguments)}var l={simple:function(t,e,i,n){return i*t/n+e},backEaseIn:function(t,e,i,n){var o=1.70158;return i*(t/=n)*t*((o+1)*t-o)+e},backEaseOut:function(t,e,i,n){var o=1.70158;return i*((t=t/n-1)*t*((o+1)*t+o)+1)+e},backEaseInOut:function(t,e,i,n){var o=1.70158;return(t/=n/2)<1?i/2*t*t*(((o*=1.525)+1)*t-o)+e:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},bounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},bounceEaseIn:function(t,e,i,n){return i-l.bounceEaseOut(n-t,0,i,n)+e},bounceEaseInOut:function(t,e,i,n){return n/2>t?.5*l.bounceEaseIn(2*t,0,i,n)+e:.5*l.bounceEaseOut(2*t-n,0,i,n)+.5*i+e},strongEaseInOut:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},regularEaseIn:function(t,e,i,n){return i*(t/=n)*t+e},regularEaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},regularEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},strongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},strongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},strongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},elasticEaseIn:function(t,e,i,n,o,s){if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),!o||o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s))+e},elasticEaseOut:function(t,e,i,n,o,s){if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),!o||o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/s)+i+e},elasticEaseInOut:function(t,e,i,n,o,s){if(0==t)return e;if(2==(t/=n/2))return e+i;if(!s)var s=.3*n*1.5;if(!o||o<Math.abs(i))var o=i,r=s/4;else var r=s/(2*Math.PI)*Math.asin(i/o);return 1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)+e:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)*.5+i+e}},d=function(t){return t.uniqueID};$IE||(d=function(t){try{var e;return null==t.getAttribute("uniqueID")?(e="moz__id"+parseInt(100*Math.random())+"_"+(new Date).getTime(),t.setAttribute("uniqueID",e),e):t.getAttribute("uniqueID")}finally{e=null}});var c={},h={};r.prototype.start=function(t,o,s,r,a,d){this.reset(),d=d||{},d.before&&(this._func.before=d.before),d.end&&(this._func.end=d.end),d.tween&&(this._func.tween=d.tween);var c=i(o),h=e(t,c),u=n(s,c);this._node=t,this._property=c,this._endingvalue=u[0],this._suffixvalue=u[1],this._startvalue=h,this._end=!1,this._fps=0,null!=r&&(this._seconds=r),null!=l[a]&&(this._animation=l[a]),this._starttime=(new Date).getTime(),this._func.before(),this._timer=setInterval(Core.Function.bind3(this.play,this),10)},r.prototype.play=function(){var t,e,i=((new Date).getTime()-this._starttime)/1e3,n=this._property.length;for(i>this._seconds&&(i=this._seconds),t=0;n>t;t++)e=this._animation(i,this._startvalue[t],this._endingvalue[t]-this._startvalue[t],this._seconds),Core.Dom.setStyle(this._node,this._property[t],e+this._suffixvalue[t]);this._fps++,this._func.tween(),i==this._seconds&&this.stop()},r.prototype.stop=function(){clearInterval(this._timer),this._end=!0,this._func.end()},r.prototype.reset=function(){clearInterval(this._timer),this._end=!1,this._node=null,this._property=[],this._startvalue=[],this._endingvalue=[],this._suffixvalue=[],this._fps=0,this._seconds=.5,this._animation=l.simple,this._func={end:function(){},tween:function(){},before:function(){}}},a.stop=function(t){s(t).stop()},a.isTween=function(t){return!s(t)._end},Ui.tween=a}();var DialogDisplaySet={alpha1:{show:function(t,e,i){var n=0,o=0,s=parseInt(t.style.top)-e;t.style.top=s,Core.Dom.setStyle(t,"opacity",n),t.style.display="";var r=window.setInterval(function(){1>=n&&Core.Dom.setStyle(t,"opacity",n),s+e>=o&&(t.style.top=s+o+"px"),o+=1.5,n+=.05,n>.9&&parseInt(t.style.top)>=s+e&&(window.clearInterval(r),i&&i())},10)},hidden:function(t,e,i){var n=1,o=parseInt(t.style.top),s=o-e,r=o,a=window.setInterval(function(){n>=0&&Core.Dom.setStyle(t,"opacity",n),r>=s&&(t.style.top=r+"px"),r-=1.5,n-=.05,0>=n&&s>r&&(window.clearInterval(a),i&&i())},10)}},alpha:{show:function(t,e,i){Core.Dom.setStyle(t,"opacity",.3),t.style.display="",t.style.top=parseInt(t.style.top)-e+"px";var n=parseInt(t.style.top)+e;Ui.tween(t,["top","opacity"],[n,.9],.4,"simple",{end:i})},hidden:function(t,e,i){var n=parseInt(t.style.top)-e;Ui.tween(t,["top","opacity"],[n,0],.2,"simple",{end:i})}},fallDown:{show:function(t,e,i,n){t.style.display="",t.style.top=e+"px",Ui.tween(t,"top",i,.6,"bounceEaseOut",{end:n})},hidden:function(t,e,i,n){t.style.display="",t.style.top=e+"px",Ui.tween(t,"top",i,.6,"strongEaseIn",{end:n})}}};Core.Events.fixEvent=function(t){return"undefined"==typeof t&&(t=window.event),t.target||(t.target=t.srcElement,t.pageX=t.x,t.pageY=t.y),"undefined"==typeof t.layerX&&(t.layerX=t.offsetX),"undefined"==typeof t.layerY&&(t.layerY=t.offsetY),t};var Drag3=function(t,e,i){var n=this;this.beDragObj=t,this.movedObjs=e||this.beDragObj,this.dragMode=i||"normal",this.canDrag=!0,this.isLock=!1,this.lockArea={left:0,right:0,top:0,bottom:0},this.dragSet={normal:function(){n.normalDrag()},border:function(){n.borderDrag()},opacity:function(){n.opacityDrag()}},this.dragObjsFunc=function(){n.onDrag(),n.dragObjs()},function(){n.beDragObj.style.MozUserSelect="none",Core.Events.addEvent(n.beDragObj,function(){return!1},"selectstart"),Core.Events.addEvent(n.beDragObj,function(){return!1},"drag");for(var t=0;t<n.movedObjs.length;t++)n.movedObjs[t]!=n.beDragObj&&(n.movedObjs[t].style.position="absolute",n.movedObjs[t].style.left||(n.movedObjs[t].style.left=n.movedObjs[t].offsetLeft+"px"),n.movedObjs[t].style.top||(n.movedObjs[t].style.top=n.movedObjs[t].offsetTop+"px"));Core.Events.addEvent(n.beDragObj,n.dragSet[n.dragMode],"mousedown"),$IE?Core.Events.addEvent(n.beDragObj,function(){Core.Events.removeEvent(n.beDragObj,n.dragObjsFunc,"mousemove"),n.beDragObj.releaseCapture(),n.onDragEnd()},"mouseup"):Core.Events.addEvent(document,function(){Core.Events.removeEvent(document,n.dragObjsFunc,"mousemove"),n.onDragEnd()},"mouseup")}()};Drag3.prototype={capture:function(){this.canDrag=!0},release:function(){this.canDrag=!1},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},dragObjs:function(){e=Core.Events.getEvent();for(var t=0;t<this.movedObjs.length;t++)this.isLock?(this.movedObjs[t].style.left=e.clientX-this.movedObjs[t].deltaX<this.lockArea.left?this.lockArea.left+"px":e.clientX-this.movedObjs[t].deltaX>this.lockArea.right-this.movedObjs[t].offsetWidth?this.lockArea.right-this.movedObjs[t].offsetWidth+"px":e.clientX-this.movedObjs[t].deltaX+"px",this.movedObjs[t].style.top=e.clientY-this.movedObjs[t].deltaY<this.lockArea.top?this.lockArea.top+"px":e.clientY-this.movedObjs[t].deltaY>this.lockArea.bottom-this.movedObjs[t].offsetHeight?this.lockArea.bottom-this.movedObjs[t].offsetHeight+"px":e.clientY-this.movedObjs[t].deltaY+"px"):(this.movedObjs[t].style.left=e.clientX-this.movedObjs[t].deltaX+"px",this.movedObjs[t].style.top=e.clientY-this.movedObjs[t].deltaY+"px")},normalDrag:function(){var t=this;e=Core.Events.getEvent();for(var i=0;i<t.movedObjs.length;i++)t.movedObjs[i].deltaX=e.clientX-parseInt(t.movedObjs[i].style.left),t.movedObjs[i].deltaY=e.clientY-parseInt(t.movedObjs[i].style.top);t.canDrag&&($IE?(t.beDragObj.setCapture(),Core.Events.addEvent(t.beDragObj,t.dragObjsFunc,"mousemove")):Core.Events.addEvent(document,t.dragObjsFunc,"mousemove")),t.onDragStart()},borderDrag:function(){},opacityDrag:function(){}},Ui.Drag3=Drag3;var Dialog=function(t){var e=this;e.entity=null,e.ifm=null;var i={id:"",x:0,y:0,width:0,height:0,isFixed:!1,layer:new Layer(t),template:t,canDrag:!1,dragEntity:null,name:"",uniqueID:"",isShow:!1,nodes:{},focusNode:null,displayMode:"normal",_modeDisplayRuning:!1,enabled:!0};this.getProperty=function(){return i},function(){var t=e.getProperty();t.uniqueID=t.layer.getProperty().uniqueID,t.id=t.uniqueID+"_dialog",t.nodes=e.getNodes(),e.entity=t.layer.entity,e.ifm=t.layer.ifm,t.width=parseInt(e.entity.style.width),t.nodes.titleBar&&(t.dragEntity=new Ui.Drag3(t.nodes.titleBar,e.ifm?[e.ifm,e.entity]:[e.entity]),t.nodes.titleBar.style.cursor="move",Core.Events.addEvent(t.nodes.titleBar,function(){return!1},"selectstart"),t.dragEntity.onDrag=function(){e.onDrag()}),Core.Events.addEvent(window,function(){if(t.isShow&&t.isFixed){var i=Core.System.winSize(),n=i.width/2-e.getWidth()/2,o=i.height/2-e.getHeight()/2;n=0>n?0:n,o=0>o?0:o,e.setPosition({x:n,y:o})}},"resize")}()};Dialog.prototype={setPosition:function(t){var e=this.getProperty();Core.System.parseParam(e,t),this.getProperty().layer.setPosition(t)},setSize:function(t){var e=this.getProperty();Core.System.parseParam(e,t),e.layer.setSize(t)},setFixed:function(t){var e=this.getProperty();e.isFixed=t,this.getProperty().layer.setFixed(e.isFixed)},setContent:function(t){this.getProperty();this.getProperty().layer.setContent(t)},setTemplate:function(t){var e=this.getProperty();e.template=t,e.layer.setTemplate(e.template)},setDrag:function(t){var e=this.getProperty();e.canDrag=t,e.canDrag?e.dragEntity.capture():e.dragEntity.release()},getWidth:function(){return this.getProperty().layer.getWidth()},getHeight:function(){return this.getProperty().layer.getHeight()},getX:function(){return this.getProperty().layer.getX()},getY:function(){return this.getProperty().layer.getY()},show:function(t){var e=this.getProperty(),i=this;e.isShow=!0,this.ifm&&(this.ifm.style.display=""),this.onShow(),"normal"==e.displayMode||"normal"==t?this.entity.style.display="":(e._modeDisplayRuning=!0,e.enabled=!1,this._showWithMode(function(){e._modeDisplayRuning=!1,e.enabled=!0,i.onDisplaied&&i.onDisplaied()}))},close:function(t){var e=this,i=this.getProperty();"normal"==i.displayMode||"normal"==t?(i.isShow=!1,i.layer.hidden(),this.destroy(),this.onClose(),e.onDisplayFinished&&e.onDisplayFinished()):i._modeDisplayRuning||(i._modeDisplayRuning=!0,i.enabled=!1,this._hiddenWithMode(function(){i.isShow=!1,i.layer.hidden(),i._modeDisplayRuning=!1,i.enabled=!0,e.destroy(),e.onClose(),e.onDisplayFinished&&e.onDisplayFinished()}))},hidden:function(t){var e=this,i=this.getProperty();"normal"==i.displayMode||"normal"==t?(i.isShow=!1,i.layer.hidden(),this.onHidden(),e.onDisplayFinished&&e.onDisplayFinished()):i._modeDisplayRuning||(i._modeDisplayRuning=!0,i.enabled=!1,this._hiddenWithMode(function(){i.isShow=!1,i.layer.hidden(),e.onHidden(),i._modeDisplayRuning=!1,i.enabled=!0,e.onDisplayFinished&&e.onDisplayFinished()}))},_showWithMode:function(t){{var e=this.getProperty();Core.System.winSize()}switch(e.displayMode){case"alpha":DialogDisplaySet.alpha.show(this.entity,20,t)}},_hiddenWithMode:function(t){{var e=this.getProperty();Core.System.winSize()}switch(e.displayMode){case"alpha":DialogDisplaySet.alpha.hidden(this.entity,20,t)}},destroy:function(){try{this.getProperty().nodes.iframe&&(this.getProperty().nodes.iframe.src="")}catch(t){}this.entity&&this.entity.parentNode.removeChild(this.entity),this.entity=null,this.ifm&&(this.ifm.parentNode.removeChild(this.ifm),this.ifm=null)},onShow:function(){},onClose:function(){},onHidden:function(){},onDrag:function(){},onDisplaied:function(){},onDisplayFinished:function(){},setAreaLocked:function(t){var e=this.getProperty();e.dragEntity.isLock=t;var i=this;t&&(i._updateLockArea(),Core.Events.addEvent(window,function(){i._updateLockArea()},"resize"))},_updateLockArea:function(){var t=this.getProperty(),e=Core.System.winSize();t.isFixed?$IE6?(t.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+e.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+e.height},Core.Events.addEvent(window,function(){t.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+e.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+e.height}},"scroll"),Core.Events.addEvent(window,function(){t.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+e.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+e.height}
},"resize")):t.dragEntity.lockArea={left:0,right:e.width,top:0,bottom:e.height}:t.dragEntity.lockArea={left:0,right:document.documentElement.scrollWidth,top:0,bottom:document.documentElement.scrollHeight}},updateFixed:function(){this.getProperty().layer.updateFixed()},getNodes:function(t){return this.getProperty().layer.getNodes(t)},setFocus:function(){var t=this.getProperty();if(t.focusNode&&"none"!=t.focusNode.style.display)try{t.focusNode.focus()}catch(e){}else"none"!=this.entity.style.display&&this.entity.focus()},getUniqueID:function(){return this.getProperty().layer.getUniqueID()}};var DialogManager={dialogs:[],activeDialog:{},backShadow:null,create:function(t,e){var i=this,n=new Dialog(t);return this.dialogs.push(n),this.activeDialog=n,n.name=e||n.getUniqueID(),n.entity.style.zIndex=1024,n.onDrag=function(){$IE6?this.getProperty().isFixed&&this.setPosition({x:parseInt(this.entity.style.left)-document.documentElement.scrollLeft,y:parseInt(this.entity.style.top)-document.documentElement.scrollTop}):this.getProperty().isFixed&&this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})},n.onClose=function(){i.removeDialog(this.name),i.updateActiveDialog(),i.updateShadow(),i.activeDialog&&i.activeDialog.setFocus()},n.onHidden=function(){this.isHidden=!0,this==i.activeDialog&&(i.activeDialog=null),i.updateActiveDialog(),i.updateShadow(),i.activeDialog&&i.activeDialog.setFocus()},n.onShow=function(){if(this.isHidden){this.isHidden=!1;var t,e=i.dialogs.length;for(t=0;e>t;t++)i.dialogs[t]==this&&(document.body.appendChild(i.dialogs[t].entity),i.dialogs.push(i.dialogs[t]),i.dialogs.splice(t,1));i.activeDialog=this,i.backShadow.show(),i.updateShadow()}},this.backShadow.isShow?this.updateShadow():this.backShadow.show(),n.hidden(),n},getDialog:function(t){var e=0,i=this.dialogs.length;for(e=0;i>e;e++)if(this.dialogs[e].name==t)return this.dialogs[e]},removeDialog:function(t){var e=0,i=this.dialogs.length;for(e=i-1;e>=0;e--)if(this.dialogs[e].name==t){this.dialogs.splice(e,1),this.activeDialog=this.dialogs[this.dialogs.length-1];break}},updateActiveDialog:function(){var t,e=this.dialogs.length;for(t=e-1;t>=0;t--)if(!this.dialogs[t].isHidden){this.activeDialog=this.dialogs[t];break}},updateShadow:function(){this.activeDialog&&!this.activeDialog.isHidden?(this.backShadow.insertBefore(this.activeDialog.entity),this.activeDialog.updateFixed()):this.backShadow.hidden()},close:function(t){if(!t)return void(this.activeDialog&&this.activeDialog.close());var e,i=this.dialogs.length;for(e=i-1;e>=0;e--)if(this.dialogs[e].name==t){this.dialogs[e].close();break}}},BackShadow=function(t){this.entity=null,this.isShow=!1,this._ie6Fixed=function(){e.entity&&(e.entity.style.top=document.documentElement.scrollTop+"px",e.entity.style.left=document.documentElement.scrollLeft+"px",e.ifm&&(e.ifm.style.top=e.entity.style.top,e.ifm.style.left=e.entity.style.left),e.updateSize())};var e=this;!function(){e.entity=$C("div"),e.entity.style.position="absolute",e.entity.style.width=e.getAreaWidth()+"px",e.entity.style.height=e.getAreaHeight()+"px",e.entity.style.left="0px",e.entity.style.top="0px",e.entity.style.zIndex=1024,e.entity.style.backgroundColor="black",document.body.appendChild(e.entity),e._setOpacity(e.entity,isNaN(t)?.5:t),$IE6&&(e.entity.style.top=document.documentElement.scrollTop+"px",e.addIframe()),Core.Events.addEvent(window,function(){e.entity&&($IE6&&e.isShow&&(document.documentElement.scrollLeft=0,e._ie6Fixed()),setTimeout(function(){e.updateSize()},1))},"resize"),e.setFixed(!0),e.hidden()}()};BackShadow.prototype={show:function(){this.entity.style.display="",this.ifm&&(this.ifm.style.display=""),this.isShow=!0,this.onShow()},hidden:function(){this.entity.style.display="none",this.ifm&&(this.ifm.style.display="none"),this.isShow=!1,this.onHidden()},close:function(){this.hidden(),this.destroy()},destroy:function(){Core.Events.removeEvent(window,this._ie6Fixed,"scroll"),this.entity.parentNode.removeChild(this.entity),this.entity=null,this.ifm&&(this.ifm.parentNode.removeChild(this.ifm),this.ifm=null)},addIframe:function(){this.ifm=$C("iframe"),this._setOpacity(this.ifm,0),this.ifm.style.position="absolute",this.ifm.style.zIndex=this.entity.style.zIndex,this.ifm.style.left=this.entity.style.left,this.ifm.style.top=this.entity.style.top,this.ifm.style.width=this.entity.style.width,this.ifm.style.height=this.entity.style.height,document.body.insertBefore(this.ifm,this.entity)},insertBefore:function(t){document.body.insertBefore(this.entity,t),this.ifm&&document.body.insertBefore(this.ifm,this.entity)},updateSize:function(){this.entity.style.width=this.getAreaWidth()+"px",this.entity.style.height=this.getAreaHeight()+"px",this.ifm&&(this.ifm.style.width=this.getAreaWidth()+"px",this.ifm.style.height=this.getAreaHeight()+"px")},getAreaHeight:function(){return document.documentElement.clientHeight},getAreaWidth:function(){return document.documentElement.clientWidth},setFixed:function(t){if($IE6){var e=this;t?(e._ie6Fixed(),Core.Events.addEvent(window,e._ie6Fixed,"scroll")):Core.Events.removeEvent(window,e._ie6Fixed,"scroll")}else this.entity.style.position=t?"fixed":"absolute"},_setOpacity:function(t,e){$IE&&9>=$IE?t.style.filter="alpha(opacity="+100*e+")":t.style.opacity=e},onShow:function(){},onHidden:function(){}},CustomsDialog.prototype={isSetMiddle:!1,setContent:function(t){var e=t;this.templateString=e.match(this.nodesPattern);var i=new Ui.Template(e);this.nodes.content.innerHTML=i.evaluate(this.getContentNodes("i")),this.updateNodes()},setTitle:function(t){this.nodes.titleName&&(this.nodes.titleName.innerHTML=t)},setHelp:function(t){this.nodes.btnHelp&&(t?this.nodes.btnHelp.href=t:this.nodes.btnHelp.innerHTML="")},setClose:function(t){var e=this;if(e.nodes.btnClose)switch(t=t||"hidden"){case"hidden":Core.Events.addEvent(e.nodes.btnClose,e._hiddenDialog,"click");break;case"close":Core.Events.addEvent(e.nodes.btnClose,e._closeDialog,"click")}},setPosition:function(t,e){this._dialog.setPosition({x:t,y:e})},setMiddle:function(){var t,e,i=Core.System.winSize(),n=this._dialog.entity.style.display;this._dialog.setPosition({x:-1e4}),this._dialog.entity.style.display="";var o=this.nodes.titleBar?this.nodes.titleBar.offsetHeight:0,s=i.height-this.nodes.content.offsetHeight-o,r=(Math.sqrt(5)-1)/2,a=1,l=s*r/(r+a);t=i.width/2-this.nodes.content.offsetWidth/2,t=0>t?0:t,e=0>l?0:l,this._dialog.getProperty().isFixed||(t+=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),e+=Math.max(document.documentElement.scrollTop,document.body.scrollTop)),this._dialog.entity.style.display=n,this._dialog.setPosition({x:t,y:e}),this.isSetMiddle=!0},setSize:function(t,e){this._dialog.setSize({width:t,height:e})},setFixed:function(t){this._dialog.setFixed(t)},setAreaLocked:function(t){this._dialog.setAreaLocked(t)},setFocusNode:function(t){this._dialog.getProperty().focusNode=t},setDisplayMode:function(t){this._dialog.getProperty().displayMode=t||"normal"},getWidth:function(){return this._dialog.getProperty().width},getHeight:function(){return this._dialog.getProperty().height},getX:function(){return this._dialog.getProperty().x},getY:function(){return this._dialog.getProperty().y},show:function(){this.isSetMiddle&&this.setMiddle(),this._dialog.show(),this.onShow()},hidden:function(){this._dialog.hidden(),this.onHidden()},close:function(){var t=this;t._dialog.close(),t.onClose(),t.nodes.btnClose&&(Core.Events.removeEvent(t.nodes.btnClose,t._hiddenDialog,"click"),Core.Events.removeEvent(t.nodes.btnClose,t._CloseDialog,"click"))},updateNodes:function(){this.nodes=this._dialog.getNodes();var t=this.getContentNodes();for(k in t)this.nodes[k]=t[k]},getContentNodes:function(t){var e,i=t||"o",n={},o=this.templateString;if(o)for(e=0;e<o.length;e++){var s=o[e];switch(i){case"o":n[s]=$E(this.nodes.content.id+"_"+s);break;case"i":n[s]=this.nodes.content.id+"_"+s}}return n},setOnDisplaied:function(t){this._dialog.onDisplaied=t},setOnDisplayFinished:function(t){this._dialog.onDisplayFinished=t},onDrag:function(){},onShow:function(){},onHidden:function(){},onClose:function(){}};var LayerTemplate={alert:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><!-- 内容区域 --><div class="gDialogDoc"><div class="diaBd"><div class="gDiaC1"><img id="#{icon}" width="50" height="50" class="" src="http://simg.sinajs.cn/tiezi/images/icon/icon.gif" alt=""/></div><div class="gDiaC2"><h5 id="#{text}"></h5><div id="#{subText}"></div><p/></div></div><div class="btnRow"><a class="gBtnb gBtnbClr" id="#{linkOk}" href="javascript:;"><cite id="#{btnOk}"><em id="#{ok}"></em></cite></a></div></div><!-- 内容区域 --></div></td><td class="tbgright"><div></div></td></tr></tbody></table>',confirm:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><!-- 内容开始 --><div class="gDialogDoc"><div class="diaBd"><div class="gDiaC1"><img id="#{icon}" width="50" height="50" class="" src="http://simg.sinajs.cn/tiezi/images/icon/icon.gif" alt=""/></div><div class="gDiaC2"><h5 id="#{text}"></h5><div id="#{subText}"></div><p/></div></div><div class="btnRow"><a class="gBtnb gBtnbClr" id="#{linkOk}" href="javascript:;"><cite id="#{btnOk}"><em id="#{ok}"></em></cite></a><a class="gBtnb gBtnbClr" id="#{linkCancel}" href="javascript:;"><cite id="#{btnCancel}"><em id="#{cancel}"></em></cite></a></div></div><!-- 内容结束 --></div></td><td class="tbgright"><div></div></td></tr></tbody></table>',iframe:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><div id="#{loadState}">Loading...</div><iframe style="width:100%;height:500px;" id="#{iframe}" src="#{iframeURL}"></iframe></div></td><td class="tbgright"><div></div></td></tr></tbody></table>',customs:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><!-- 内容区域 --><!-- 内容区域 --></div></td><td class="tbgright"><div></div></td></tr></tbody></table>'};!function(){var t=function(t,e){this.template=e||{},DialogManager.backShadow=t};t.prototype={iconSet:{"01":{"class":"SG_icon SG_icon201",alt:"警告"},"02":{"class":"SG_icon SG_icon202",alt:"失败"},"03":{"class":"SG_icon SG_icon203",alt:"成功"},"04":{"class":"SG_icon SG_icon204",alt:"询问"},"06":{"class":"SG_icon SG_icon148",alt:"警告"}},alert:function(t,e,i){e=e||{};var n=DialogManager.create(e.template||this.template.alert||LayerTemplate.alert,i),o=(Core.System.winSize(),n.getNodes());n.onDisplaied=e.funcDisplaied,n.onDisplayFinished=e.funcDisplayFinished,n.setSize({width:e.width,height:e.height}),n.setFixed(!0),this._setDialogMiddle(n),n.show(),n.setAreaLocked(!0),o.linkOk.focus(),o.text.innerHTML=t,o.titleName&&(o.titleName.innerHTML=e.title||"提示"),o.icon&&(o.icon.className=e.icon?this.iconSet[e.icon]["class"]:this.iconSet["01"]["class"],o.icon.alt=e.icon?this.iconSet[e.icon].alt:this.iconSet["01"].alt),o.ok.innerHTML=e.textOk||"确定",o.subText&&(o.subText.innerHTML=e.subText||""),n.getProperty().focusNode=o.linkOk,Core.Events.addEvent(o.btnOk,function(){return e.funcOk&&n.getProperty().enabled&&(e.funcOk(),Core.Events.stopEvent()),n.close(),!1},"click"),Core.Events.addEvent(o.linkOk,function(){var t=Core.Events.getEvent();"13"==t.keyCode&&(e.funcOk&&n.getProperty().enabled&&e.funcOk(),n.close())},"keydown"),Core.Events.addEvent(o.btnClose,function(){e.funcClose&&n.getProperty().enabled&&e.funcClose(),n.close()},"click"),Core.Events.addEvent(o.btnClose,function(){var t=Core.Events.getEvent();t.cancelBubble=!0},"mousedown")},newAlert:function(t,e,i){e.template=this.template.newAlert,this.alert(t,e,i)},confirm:function(t,e,i){e=e||{};var n=DialogManager.create(e.template||this.template.confirm||LayerTemplate.confirm,i),o=(Core.System.winSize(),n.getNodes());n.onDisplaied=e.funcDisplaied,n.onDisplayFinished=e.funcDisplayFinished,n.setSize({width:e.width,height:e.height}),n.setFixed(!0),this._setDialogMiddle(n),n.show(),n.setAreaLocked(!0),0==e.defaultButton?(o.linkCancel.focus(),n.getProperty().focusNode=o.linkCancel):(o.linkOk.focus(),n.getProperty().focusNode=o.linkOk),o.text.innerHTML=t,o.titleName&&(o.titleName.innerHTML=e.title||"提示"),o.icon&&(o.icon.className=e.icon?this.iconSet[e.icon]["class"]:this.iconSet["04"]["class"],o.icon.alt=e.icon?this.iconSet[e.icon].alt:this.iconSet["04"].alt),o.ok.innerHTML=e.textOk||"确定",o.cancel.innerHTML=e.textCancel||"取消",o.subText&&(o.subText.innerHTML=e.subText||""),Core.Events.addEvent(o.btnOk,function(){return e.funcOk&&n.getProperty().enabled&&(e.funcOk(),Core.Events.stopEvent()),n.close(),!1},"click"),Core.Events.addEvent(o.linkOk,function(){var t=Core.Events.getEvent();"13"==t.keyCode&&(e.funcOk&&n.getProperty().enabled&&e.funcOk(),n.close())},"keydown"),Core.Events.addEvent(o.btnCancel,function(){return e.funcCancel&&n.getProperty().enabled&&(e.funcCancel(),Core.Events.stopEvent()),n.close(),!1},"click"),Core.Events.addEvent(o.linkCancel,function(){var t=Core.Events.getEvent();"13"==t.keyCode&&(e.funcCancel&&n.getProperty().enabled&&e.funcCancel(),n.close())},"keydown"),Core.Events.addEvent(o.btnClose,function(){return e.funcClose&&n.getProperty().enabled&&(e.funcClose(),Core.Events.stopEvent()),n.close(),!1},"click"),Core.Events.addEvent(o.btnClose,function(){var t=Core.Events.getEvent();t.cancelBubble=!0},"mousedown")},newConform:function(t,e,i){e.template=this.template.newConfirm,this.confirm(t,e,i)},showIframe:function(t,e){t=t||{};var i=DialogManager.create(this.template.iframe||LayerTemplate.iframe,e),n=Core.System.winSize(),o=i.getNodes();i.setSize({width:t.width||320,height:t.height||150});var s=n.width/2-i.getProperty().width/2<0?0:n.width/2-i.getProperty().width/2,r=n.height/2-i.getProperty().height/2<0?0:n.height/2-i.getProperty().height/2;i.setPosition(t.fixed?{x:s,y:r}:{x:s+document.documentElement.scrollLeft,y:r+document.documentElement.scrollTop}),$IE6||(i.getProperty().displayMode="alpha"),i.setFixed(!!t.fixed),i.show(),i.setAreaLocked(!0),o.titleName.innerHTML=t.title||"",o.iframe.src=t.url||"about:blank",Core.Events.addEvent(o.iframe,function(){o.iframe.style.display="",o.loadState.style.display="none"},"load"),Core.Events.addEvent(o.btnClose,function(){i.close()},"click"),Core.Events.addEvent(o.btnClose,function(){var t=Core.Events.getEvent();t.cancelBubble=!0},"mousedown")},createCustomsDialog:function(t,e){t=t||{};var i=new CustomsDialog(t.tpl||this.template.customs||LayerTemplate.customs,e);return t.content&&i.setContent(t.content),i.setTitle(t.title||"提示"),i.setHelp(t.help||""),i.setClose("hidden"),i.setOnDisplaied(t.funcDisplaied),i.setOnDisplayFinished(t.funcDisplayFinished),i},getDialog:function(t){return DialogManager.getDialog(t)},close:function(t){DialogManager.close(t)},_setDialogMiddle:function(t){var e,i,n=Core.System.winSize(),o=t.getNodes(),s=t.entity.style.display;t.setPosition({x:-1e4}),t.entity.style.display="";var r=o.titleBar?o.titleBar.offsetHeight:0,a=n.height-o.content.offsetHeight-r,l=(Math.sqrt(5)-1)/2,d=1,c=a*l/(l+d);e=n.width/2-o.content.offsetWidth/2,e=0>e?0:e,i=0>c?0:c,t.getProperty().isFixed||(e+=document.documentElement.scrollLeft,i+=document.documentElement.scrollTop),t.entity.style.display=s,t.setPosition({x:e,y:i})}},Sina.Ui.WindowDialog=t}(),Sina.pkg("Utils.Cookie"),Utils.Cookie.getCookie=function(t){t=t.replace(/([\.\[\]\$])/g,"\\$1");var e=new RegExp(t+"=([^;]*)?;","i"),i=document.cookie+";",n=i.match(e);return n?n[1]||"":""},Utils.Cookie.setCookie=function(t,e,i,n,o,s){var r=[];if(r.push(t+"="+escape(e)),i){var a=new Date,l=a.getTime()+36e5*i;a.setTime(l),r.push("expires="+a.toGMTString())}n&&r.push("path="+n),o&&r.push("domain="+o),s&&r.push(s),document.cookie=r.join(";")},Core.Events.stopDefaultEvent=function(t){var e=t?t:Core.Events.getEvent();null!=e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},"undefined"==typeof Lib&&(Lib={}),Lib.pkg=function(t){if(!t||!t.length)return null;for(var e=t.split("."),i=Lib,n="Lib"==e[0]?1:0;n<e.length;++n)i[e[n]]=i[e[n]]||{},i=i[e[n]];return i},Core.System.keyValue=function(t,e){var i=t.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return null!=i?i[2]:null},Lib.checkAuthor=function(){var t=unescape(Utils.Cookie.getCookie("SUP"));if(t&&""!=t)$UID=Core.System.keyValue(t,"uid"),$nick=decodeURIComponent(Core.System.keyValue(t,"nick")),$isLogin=!!$UID,$isAdmin="undefined"==typeof scope.$uid?!1:scope.$uid==$UID;else if(t=Utils.Cookie.getCookie("SU"),t&&""!=t){var e=t.match(/^([^:]*:){2}(\d{5,11})/);$UID=e&&e[2]||null,window.$isLogin=!!$UID,window.$isAdmin="undefined"==typeof scope.$uid?!1:scope.$uid==$UID}else $UID=null,$isLogin=!1,$isAdmin=!1},Sina.pkg("Core.Class"),Core.Class.AsPrototype={},Core.Class.create=function(){return function(t){t!=Core.Class.AsPrototype&&this.initialize.apply(this,arguments)}},Core.String.trimHead=function(t){return t.replace(/^(\u3000|\s|\t)*/gi,"")},Core.String.trimTail=function(t){return t.replace(/(\u3000|\s|\t)*$/gi,"")},Core.String.trim=function(t){return Core.String.trimHead(Core.String.trimTail(t))},String.prototype.format=function(){var t=(arguments[0]&&"undefined"!=typeof arguments[0]?arguments[0].toString():"",/(.*?)({(\d+)(:([0-9a-z]+))?})/gi),e=this.match(t);if(e){for(var i=0,n=e.length;n>i;i++)switch(e[i]=e[i].replace(t,function(){return RegExp.$1}),e[i]=RegExp.$1,typeof arguments[parseInt(RegExp.$3)]){case"undefined":e[i]+=RegExp.$2;break;case"number":e[i]+=isNaN(RegExp.$5)||""==RegExp.$5?arguments[parseInt(RegExp.$3)]:arguments[parseInt(RegExp.$3)].toString(Math.max(Math.min(Math.round(RegExp.$5),36),2));break;default:e[i]+=arguments[parseInt(RegExp.$3)]}return e.push(this.replace(t,"")),e.join("")}return this},Sina.pkg("Core.Math"),Core.Math.getUniqueId=function(){return parseInt(1e4*Math.random()).toString()+(new Date).getTime().toString()},Lib.pkg("Login"),Lib.Login.info=function(){var t;return window.sinaSSOController&&(t=sinaSSOController.getLoginInfo())?t:{}},function(){function t(t){function e(){}return e.prototype=t,new e}Function.prototype.$define=function(t){var e;for(e in t)this.prototype[e]=t[e];if(this.__interface__)for(e in this.prototype)if("NI"===this.prototype[e])throw new Error("类定义错误，接口方法["+e+"]未实现");return this.prototype.constructor=this,this.$extends=this.$define=this.$implements=function(){throw new Error("$define语句定义后面不能再作其它定义")},this},Function.prototype.$extends=function(){var e,i,n=this,o=arguments.length;if(0===o)throw new Error("$extends语句错误：未指定父类");return e=arguments[0],i=function(){e.apply(this,arguments),n.apply(this,arguments)},i.prototype=t(e.prototype),i.prototype.constructor=i,i.$super=e.prototype,i},Function.prototype.$implements=function(){for(var t,e=Array.prototype.slice.call(arguments,0),i=e.length;i--;){if("object"!=typeof e[i])throw new Error("$implements语句错误：参数必须为object类型");for(t in e[i])"undefined"==typeof this.prototype[t]&&(this.prototype[t]="NI")}return this.__interface__=!0,this.$extends=function(){throw new Error("$extends语句错误:$extends语句不能出现在$implements定义之后")},this}}(),function(){function t(t){return"string"!=typeof t&&"function"==String.prototype.slice.call(t,0,8)}function e(t,e){var i=e.call(t);return"string"==typeof i||"number"==typeof i?i:null}Core.Function.defineGetter=function(i,n,o){if(n instanceof Array&&o instanceof Array)for(var s=Math.min(n.length,o.length);s--;)"string"==typeof n[s]&&t(o[s])&&(i[n[s]]={valueOf:function(t){return function(){return e(i,o[t])}}(s),toString:this.valueOf});else"string"==typeof n&&t(o)&&(i[n]={valueOf:function(){return e(i,o)},toString:this.valueOf})}}(),Ui.IE6FixedController=function(){var t=this;this.node=null,this.iframeNode=null,this.__orgX=0,this.__orgY=0,this.__isBindScroll=!1,this.__fixedHandle=function(){t.node&&(t.node.style.left=document.documentElement.scrollLeft+t.__orgX+"px",t.node.style.top=document.documentElement.scrollTop+t.__orgY+"px"),t.iframeNode&&(t.iframeNode.style.left=t.node.style.left,t.iframeNode.style.top=t.node.style.top)}}.$define({setFixed:function(t,e){this.updateOrgPosition(),e&&!this.__isBindScroll&&(Core.Events.addEvent(window,this.__fixedHandle,"scroll"),this.__isBindScroll=!0),!e&&this.__isBindScroll&&(Core.Events.removeEvent(window,this.__fixedHandle,"scroll"),this.__isBindScroll=!1)},setPosition:function(t,e,i){"undefined"!=typeof i.x&&(e?(t.style.left=i.x+document.documentElement.scrollLeft+"px",this.__orgX=parseInt(this.node.style.left)-document.documentElement.scrollLeft):t.style.left=i.x+"px"),"undefined"!=typeof i.y&&(e?(t.style.top=i.y+document.documentElement.scrollTop+"px",this.__orgY=parseInt(this.node.style.top)-document.documentElement.scrollTop):t.style.top=i.y+"px"),"undefined"!=typeof i.z&&(t.style.zIndex=i.z)},getX:function(t,e){return e?parseInt(t.style.left)-document.documentElement.scrollLeft:parseInt(t.style.left)},getY:function(t,e){return e?parseInt(t.style.top)-document.documentElement.scrollTop:parseInt(t.style.top)},updateIframe:function(t){this.setFixed(this.iframeNode,t),t&&this.__fixedHandle()},updateOrgPosition:function(){this.node&&(this.__orgX=parseInt(this.node.style.left)-document.documentElement.scrollLeft,this.__orgY=parseInt(this.node.style.top)-document.documentElement.scrollTop)},destroy:function(){Core.Events.removeEvent(window,this.__fixedHandle,"scroll"),this.__isBindScroll=!1,this.node=null,this.iframeNode=null}}),Core.Events.EventDispatcher=function(t){this.__target=t,this.__events={}}.$define({addEventListener:function(t,e){if(this.__checkFunction(e)){var i=this.__events;t=t.toLowerCase(),!i[t]&&(i[t]=[]),i[t].push(e)}},removeEventListener:function(t,e){var i=this.__events[t];if(t=t.toLowerCase(),this.__checkFunction(e)&&i&&i.length)for(var n=i.length-1;n>=0;n--)i[n]==e&&i.splice(n,1)},dispatchEvent:function(t){t=t.toLowerCase();var e=this.__events[t];if(e&&e.length){var i=Array.prototype.slice.call(arguments,0);i.shift();for(var n=0,o=e.length;o>n;n++)e[n].apply(this.__target,i)}},__checkFunction:function(t){return"string"!=typeof t&&"function"==String.prototype.slice.call(t,0,8)}}),Ui.IRenderer={setCanShow:function(){},setCanHidden:function(){},show:function(){},hidden:function(){},addEventListener:function(){},removeEventListener:function(){}},Ui.SimpleRenderer=function(){this.__canShow=!0,this.__canHidden=!0,this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IRenderer).$define({setCanShow:function(t){this.__canShow=!!t},setCanHidden:function(t){this.__canHidden=!!t},show:function(t){return this.__eventDispatcher.dispatchEvent("beforeShow"),this.__canShow&&(t.style.display="",this.__eventDispatcher.dispatchEvent("show")),this},hidden:function(t){return this.__eventDispatcher.dispatchEvent("beforeHidden"),this.__canHidden&&(t.style.display="none",this.__eventDispatcher.dispatchEvent("hidden")),this},addEventListener:function(t,e){return this.__eventDispatcher.addEventListener(t,e),this},removeEventListener:function(t,e){return this.__eventDispatcher.removeEventListener(t,e),this}}),Ui.DisplayObject=function(t,e){Core.Function.defineGetter(this,["x","y","z","width","height"],[this.__getX,this.__getY,this.__getZ,this.__getWidth,this.__getHeight]),this.__renderer=null,this.__entity=e,this.__isInited=!1,this.__parent=t||document.body,this.__eventDispatcher=new Core.Events.EventDispatcher(this);var i=this.__eventDispatcher;this.__onBeforeShow=function(){i.dispatchEvent("beforeShow")},this.__onShow=function(){i.dispatchEvent("show")},this.__onBeforeHidden=function(){i.dispatchEvent("beforeHidden")},this.__onHidden=function(){i.dispatchEvent("hidden")},this.__updateRenderer(Ui.SimpleRenderer)}.$define({isShow:!1,isHidden:!0,setPosition:function(t){return!this.__isInited&&this.__initEntity(),"undefined"!=typeof t.x&&(this.__entity.style.left=t.x+"px"),"undefined"!=typeof t.y&&(this.__entity.style.top=t.y+"px"),"undefined"!=typeof t.z&&(this.__entity.style.zIndex=t.z),this},setSize:function(t){return!this.__isInited&&this.__initEntity(),"undefined"!=typeof t.width&&(this.__entity.style.width=t.width+"px"),"undefined"!=typeof t.height&&(this.__entity.style.height=t.height+"px"),this},setRenderer:function(t){return!this.__isInited&&this.__initEntity(),this.__updateRenderer(t),this},show:function(t){return this.isHidden=!1,this.isShow=!0,!this.__isInited&&this.__initEntity(),this.__updateRenderer(t),this.__renderer.show(this.__entity),this},hidden:function(t){return this.hide(t)},hide:function(t){return this.isHidden=!0,this.isShow=!1,!this.__isInited&&this.__initEntity(),this.__updateRenderer(t),this.__renderer.hidden(this.__entity),this},setCanShow:function(t){return this.__renderer.setCanShow(t),this},setCanHidden:function(t){return this.__renderer.setCanHidden(t),this},addEventListener:function(t,e){return this.__eventDispatcher.addEventListener(t,e),this},removeEventListener:function(t,e){return this.__eventDispatcher.removeEventListener(t,e),this},destroy:function(){this.__entity&&(!this.__isInited&&this.__initEntity(),this.__entity.parentNode&&this.__entity.parentNode.removeChild(this.__entity),this.__entity=null)},__initEntity:function(){var t;!this.__entity&&(this.__entity=$C("div")),t=this.__entity.style,t.position="absolute",t.left=0,t.top=0,!this.__entity.parentNode&&this.__parent.appendChild(this.__entity),this.__isInited=!0},__updateRenderer:function(t){if(t){var e=function(){this.__renderer.addEventListener("beforeShow",this.__onBeforeShow).addEventListener("show",this.__onShow).addEventListener("beforeHidden",this.__onBeforeHidden).addEventListener("hidden",this.__onHidden)};this.__renderer?this.__renderer.constructor!==t&&(this.__renderer.removeEventListener("beforeShow",this.__onBeforeShow).removeEventListener("show",this.__onShow).removeEventListener("beforeHidden",this.__onBeforeHidden).removeEventListener("hidden",this.__onHidden),this.__renderer=new t,e.call(this)):(this.__renderer=new t,e.call(this))}},__getX:function(){return!this.__isInited&&this.__initEntity(),parseInt(this.__entity.style.left)},__getY:function(){return!this.__isInited&&this.__initEntity(),parseInt(this.__entity.style.top)},__getZ:function(){return!this.__isInited&&this.__initEntity(),parseInt(this.__entity.style.zIndex)},__getWidth:function(){return!this.__isInited&&this.__initEntity(),this.__getSize(this.__entity,"offsetWidth")},__getHeight:function(){return!this.__isInited&&this.__initEntity(),this.__getSize(this.__entity,"offsetHeight")},__getSize:function(t,e){var i,n=t,o=n.style.visibility;return"none"==n.style.display?(n.style.visibility="hidden",n.style.display="",i=n[e],n.style.display="none",n.style.visibility=o):i=n[e],i}}),Ui.Panel=function(){this.nodes={},this.uniqueID=this.__getUniqueID(),this.entity=null,this.__iframe=null,this.__isSetAdamant=!1,this.__templateNodesIDs=[],this.__isFixed=!1,$IE6&&(this.__ie6FixedController=new Ui.IE6FixedController)}.$extends(Ui.DisplayObject).$define({setTemplate:function(t){var e=$C("div");return e.innerHTML=new Ui.Template(t).evaluate(this.__getNodes(t,"i")),e.style.display="none",this.__parent.appendChild(e),this.__updateTemplate(e),this.nodes=this.__getNodes(t),this.entity=this.__entity,this.nodes.panel=this.entity,this},setFixed:function(t){!this.__isInited&&this.__initEntity();var e=parseInt(this.__entity.style.left),i=parseInt(this.__entity.style.top);return $IE6?(this.__ie6FixedController.setFixed(this.__entity,t),this.__isSetAdamant&&this.__ie6FixedController.setFixed(this.__iframe,t)):(t&&!this.__isFixed&&(this.setPosition({x:e-Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),y:i-Math.max(document.documentElement.scrollTop,document.body.scrollTop)}),this.__entity.style.position="fixed"),!t&&this.__isFixed&&(this.setPosition({x:e+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),y:i+Math.max(document.documentElement.scrollTop,document.body.scrollTop)}),this.__entity.style.position="absolute")),this.__isFixed=!!t,this.__updateIframe(),this},setAdamant:function(t){return this.__isSetAdamant=!!t,this.__isSetAdamant&&!this.__iframe&&this.__createIframe(),this.__updateIframe(),this},destroy:function(){this.__entity&&(Ui.Panel.$super.destroy.call(this),this.__ie6FixedController&&this.__ie6FixedController.destroy(),this.__iframe&&this.__iframe.parentNode.removeChild(this.__iframe))},setPosition:function(t){return!this.__isInited&&this.__initEntity(),$IE6?this.__ie6FixedController.setPosition(this.__entity,this.__isFixed,t):Ui.Panel.$super.setPosition.call(this,t),this.__updateIframe(),this},setSize:function(t){return Ui.Panel.$super.setSize.call(this,t).__updateIframe(),this},show:function(t){return Ui.Panel.$super.show.call(this,t).__updateIframe(),this},hidden:function(t){return Ui.Panel.$super.hidden.call(this,t).__updateIframe(),this},__getX:function(){return!this.__isInited&&this.__initEntity(),$IE6?this.__ie6FixedController.getX(this.__entity,this.__isFixed):parseInt(this.__entity.style.left)},__getY:function(){return!this.__isInited&&this.__initEntity(),$IE6?this.__ie6FixedController.getY(this.__entity,this.__isFixed):parseInt(this.__entity.style.top)},__createIframe:function(){this.__iframe=$C("iframe"),this.__iframe.frameBorder="none",this.__parent.insertBefore(this.__iframe,this.__entity),Core.Dom.setStyle(this.__iframe,"opacity",0),this.__ie6FixedController&&(this.__ie6FixedController.iframeNode=this.__iframe),this.__updateIframe()},__updateIframe:function(){if(this.__iframe){var t=this.__iframe.style;t.backgroundColor="#ffffff",t.left=this.x+"px",t.top=this.y+"px",t.width=this.width+"px",t.height=this.height+"px",t.position=this.__entity.style.position,t.display=this.__entity.style.display,t.zIndex=this.__entity.style.zIndex,$IE6&&this.__ie6FixedController.updateIframe(this.__isFixed)}},__updateIE6FCOrgPosition:function(){this.__ie6FixedController&&this.__ie6FixedController.updateOrgPosition()
},__updateTemplate:function(t){var e,i,n,o,s,r=this.__entity;if(r?(r.parentNode&&r.parentNode.removeChild(r),e=r.style.left,i=r.style.top,n=r.style.zIndex,o=r.style.position,s=r.style.display):s="none",r=this.__entity=$E("_"+this.uniqueID+"_panel"),r||(r=this.__entity=$E("_"+this.uniqueID+"_entity")),!r)throw new Error("[Panel Error]there missing identifier #{panel} in panel template");r.style.left=e||0,r.style.top=i||0,r.style.zIndex=n||0,r.style.position=o||"absolute",r.style.display=s,this.__parent.replaceChild(r,t),this.__ie6FixedController&&(this.__ie6FixedController.node=this.__entity)},__getNodes:function(t,e){var i,n,o,s=e||"o",r=/\{[^\}]+(?=\})/g,a={};if(this.__templateNodesIDs=t.match(r),n=this.__templateNodesIDs)for(i=n.length;i--;)switch(o=n[i].replace("{",""),s){case"o":a[o]=$E("_"+this.uniqueID+"_"+o);break;case"i":a[o]="_"+this.uniqueID+"_"+o}return a},__getUniqueID:function(){return parseInt(1e3*Math.random()).toString()+(new Date).getTime().toString()},setContent:function(t){this.nodes.content&&(this.nodes.content.innerHTML=t)},getNodes:function(){return this.nodes}}),Ui.Drag=function(t,e,i){var n=this;this.canDrag=!0,this.isLock=!1,this.lockArea={left:0,right:0,top:0,bottom:0},this.__captureNode=t,this.__dragNodes=[],this.__deltaX=[],this.__deltaY=[],this.__eventDispatcher=new Core.Events.EventDispatcher(this),this.__isDraging=!1,this.__canDragX=!0,this.__canDragY=!0,this.__dragHandle=function(){n.__drag()},this.__mouseDownHandle=function(){n.__isDraging=!0,n.__eventDispatcher.dispatchEvent("beforeDrag"),n.__setCapture(!0)},this.__mouseUpHandle=function(){n.__isDraging&&n.__eventDispatcher.dispatchEvent("afterDrag"),n.__isDraging=!1,n.__setCapture(!1)},this.__initNodes(t,e,i),this.__initCaputerNode()}.$define({addEventListener:function(t,e){return this.__eventDispatcher.addEventListener(t,e),this},removeEventListener:function(t,e){return this.__eventDispatcher.removeEventListener(t,e),this},destroy:function(){Core.Events.removeEvent(this.__captureNode,this.__mouseDownHandle,"mousedown"),Core.Events.removeEvent(document,this.__mouseUpHandle,"mouseup"),this.__captureNode=null,this.__dragNodes=null},__initNodes:function(t,e,i){e?(e instanceof Array?this.__dragNodes=e:this.__dragNodes.push(e),("undefined"==typeof i||i)&&this.__dragNodes.push(this.__captureNode)):this.__dragNodes.push(this.__captureNode);for(var n=this.__dragNodes,o=n.length;o--;)!n[o].style.position&&(n[o].style.position="absolute"),!n[o].style.left&&(n[o].style.left=0),!n[o].style.top&&(n[o].style.top=0)},__initCaputerNode:function(){var t=this.__captureNode;Core.Events.addEvent(t,this.__mouseDownHandle,"mousedown"),Core.Events.addEvent(document,this.__mouseUpHandle,"mouseup")},__setCapture:function(t){for(var e=this.__captureNode,i=this.__dragNodes,n=Core.Events.getEvent(),o=i.length;o--;)this.__deltaX[o]=n.clientX-parseInt(i[o].style.left),this.__deltaY[o]=n.clientY-parseInt(i[o].style.top);t?$IE?(e.setCapture(),Core.Events.addEvent(e,this.__dragHandle,"mousemove")):Core.Events.addEvent(document,this.__dragHandle,"mousemove"):$IE?(e.releaseCapture(),Core.Events.removeEvent(e,this.__dragHandle,"mousemove")):Core.Events.removeEvent(document,this.__dragHandle,"mousemove")},__drag:function(){if(this.canDrag){var t=this.__dragNodes,e=Core.Events.getEvent(),i=t.length,n=this.lockArea,o=0,s=0;for(this.__eventDispatcher.dispatchEvent("drag");i--;)o=e.clientX-this.__deltaX[i],s=e.clientY-this.__deltaY[i],this.isLock&&(o=Math.min(Math.max(o,n.left),n.right),s=Math.min(Math.max(s,n.top),n.bottom)),t[i].style.left=o+"px",t[i].style.top=s+"px"}}}),Ui.IDragger={addEventListener:function(){},removeEventListener:function(){},setDrag:function(){},setLock:function(){},setArea:function(){},destroy:function(){}},Ui.SimpleDragger=function(){this.__drag=null,this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IDragger).$define({addEventListener:function(t,e){return"afterdrag"===t.toLowerCase()?this.__eventDispatcher.addEventListener(t,e):this.__drag.addEventListener(t,e),this},removeEventListener:function(t,e){return"afterdrag"===t.toLowerCase()?this.__eventDispatcher.removeEventListener(t,e):this.__drag.removeEventListener(t,e),this},setDrag:function(t,e,i){var n=this;return this.__drag=new Ui.Drag(t,e,i),this.__drag.addEventListener("afterDrag",function(){n.__eventDispatcher.dispatchEvent("afterDrag")}),this},setLock:function(t){return this.__drag.isLock=!!t,this},setArea:function(t){return this.__drag.lockArea=t,this},destroy:function(){this.__drag.destroy()}}),Ui.Dialog=function(){var t=this;this.__dragger=null,this.__isBindUpadateAreaEvent=!1,this.__isBindUpdateIE6AreaEvent=!1,this.__beforeDragHandle=function(){t.__updateDraggerArea(),t.__eventDispatcher.dispatchEvent("beforedrag")},this.__dragHandle=function(){t.__isSetAdamant&&t.__updateIframe(),t.__eventDispatcher.dispatchEvent("drag")},this.__afterDragHandle=function(){t.__isFixed&&$IE6&&t.__updateIE6FCOrgPosition(),t.__eventDispatcher.dispatchEvent("afterdrag")},this.__updateDraggerAreaHandle=function(){setTimeout(function(){t.__updateDraggerArea()},1)},this.__setMiddleHandle=function(){t.setMiddle()}}.$extends(Ui.Panel).$define({setTemplate:function(t){return Ui.Dialog.$super.setTemplate.call(this,t),this.__initTitleBar(),this.setDragger(Ui.SimpleDragger),this},setContent:function(t){return this.nodes.content?(this.nodes.content.innerHTML=new Ui.Template(t).evaluate(this.__getNodes(t,"i")),this.__addContentNodes(this.__getNodes(t)),this):this},setFixed:function(t){return Ui.Dialog.$super.setFixed.call(this,t),t?Core.Events.addEvent(window,this.__setMiddleHandle,"resize"):Core.Events.removeEvent(window,this.__setMiddleHandle,"resize"),this.__updateDraggerArea(),this},setMiddle:function(){var t=this.__getDocumentSize().height-this.height,e=(Math.sqrt(5)-1)/2,i=1,n=t*e/(e+i),o=this.__getDocumentSize().width/2-this.width/2;return this.__isFixed||(n+=Math.max(document.documentElement.scrollTop,document.body.scrollTop),o+=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)),this.setPosition({x:Math.max(o,0),y:Math.max(n,0)}),this},setAreaLocked:function(t){return this.__dragger?(this.__dragger.setLock(t),this):this},setSize:function(t){return!this.__isInited&&this.__initEntity(),this.nodes.content?("undefined"!=typeof t.width&&(this.nodes.content.style.width=t.width+"px"),"undefined"!=typeof t.height&&(this.nodes.content.style.height=t.height+"px")):("undefined"!=typeof t.width&&(this.__entity.style.width=t.width+"px"),"undefined"!=typeof t.height&&(this.__entity.style.height=t.height+"px")),this},setDragger:function(t){if(!this.nodes.titleBar||!t)return this;if(this.__dragger){if(this.__dragger.constructor===t)return this}else this.__dragger=new t;return this.__updateDragger(t),this},destroy:function(){this.__entity&&(Ui.Dialog.$super.destroy.call(this),Core.Events.removeEvent(window,this.__updateDraggerAreaHandle,"resize"),Core.Events.removeEvent(window,this.__setMiddleHandle,"resize"))},__addContentNodes:function(t){var e,i=this.nodes;for(e in t)i[e]=t[e]},__updateDragger:function(t){this.__dragger.constructor!==t&&(this.__dragger.removeEventListener("beforedrag",this.__beforeDragHandle).removeEventListener("drag",this.__dragHandle).removeEventListener("afterdrag",this.__afterDragHandle),this.__dragger.destroy(),this.__dragger=new t),this.__dragger.setDrag(this.nodes.titleBar,this.__entity,!1),this.__dragger.addEventListener("beforedrag",this.__beforeDragHandle).addEventListener("drag",this.__dragHandle).addEventListener("afterdrag",this.__afterDragHandle)},__updateDraggerArea:function(){var t,e,i,n;this.__isFixed?(t=$IE6?document.documentElement.scrollLeft:0,e=$IE6?document.documentElement.scrollTop:0,i=$IE6?document.documentElement.scrollLeft+this.__getDocumentSize().width-this.width:this.__getDocumentSize().width-this.width,n=$IE6?document.documentElement.scrollTop+this.__getDocumentSize().height-this.height:this.__getDocumentSize().height-this.height):(t=0,e=0,i=document.documentElement.scrollWidth-this.width,n=document.documentElement.scrollHeight-this.height),this.__dragger.setArea({left:t,top:e,right:i,bottom:n})},__initTitleBar:function(){if(this.nodes.titleBar){var t=this.nodes.titleBar;t.style.cursor="move",$IE?Core.Events.addEvent(t,function(){return!1},"selectstart"):t.style.MozUserSelect="none"}},__getDocumentSize:function(){var t=document.documentElement.clientWidth||document.body.clientWidth,e=document.documentElement.clientHeight||document.body.clientHeight;return{width:t,height:e}}}),Ui.ModuleDialog=function(t,e,i){this.__bgShadow=null,this.__dialog=null,this.__isInitBgShadow=!1,this.__tplConfig=t,this.__iconSet=e,this.__dialogQueue=[],this.__zIndex=i&&i.zIndex||5e3,this.__cfg=i||{},this.__initDialogEvent()}.$define({alert:function(t,e){e=e||{};var i=this.__createMessageDialog(e.tplConfig||this.__tplConfig.alert,e);return i.nodes.text&&(i.nodes.text.innerHTML=t||""),i.show(e.renderer||this.__cfg.renderer).addEventListener("hidden",function(){this.destroy()}),i.nodes.linkOk&&"none"!==i.nodes.linkOk.style.display&&i.nodes.linkOk.focus(),i},newAlert:function(t,e,i){e.tplConfig=this.__tplConfig.newAlert,this.alert(t,e,i)},confirm:function(t,e){e=e||{};var i=this.__createMessageDialog(e.tplConfig||this.__tplConfig.confirm,e),n=this;return i.nodes.text&&(i.nodes.text.innerHTML=t||""),i.nodes.btnCancel&&(i.nodes.btnCancel.innerHTML=e.textCancel||"取消",Core.Events.addEvent(i.nodes.btnCancel,function(){e.funcCancel&&e.funcCancel.call(i),i.hidden(e.renderer||n.__cfg.renderer),Core.Events.stopEvent()},"click"),i.nodes.linkCancel&&Core.Events.addEvent(i.nodes.linkCancel,function(){var t=Core.Events.getEvent();"13"==t.keyCode&&(e.funcCancel&&e.funcCancel.call(i),i.hidden(e.renderer||n.__cfg.renderer))},"keydown")),i.show(e.renderer||n.__cfg.renderer).addEventListener("hidden",function(){this.destroy()}),0==e.defaultButton?i.nodes.linkCancel&&"none"!==i.nodes.linkCancel.style.display&&i.nodes.linkCancel.focus():i.nodes.linkOk&&"none"!==i.nodes.linkOk.style.display&&i.nodes.linkOk.focus(),i},newConfirm:function(t,e,i){e.tplConfig=this.__tplConfig.newConfirm,this.confirm(t,e,i)},create:function(t){t=t||{};var e=new Ui.Dialog;return e.setTemplate(t.tpl||this.__tplConfig.customs),t.content&&e.setContent(t.content),t.width&&!isNaN(t.width)&&e.setSize({width:t.width}),t.height&&!isNaN(t.height)&&e.setSize({height:t.height}),this.__initDialog(e,t)},__initDialogEvent:function(){var t=this.__dialogQueue;Core.Events.addEvent(document,function(){var e=Core.Events.getEvent();t.length&&"27"==e.keyCode&&t[t.length-1].hidden()},"keydown")},__createMessageDialog:function(t,e){var i=new Ui.Dialog,n=this;return i.setTemplate(t),e.width&&!isNaN(e.width)&&i.setSize({width:e.width}),e.height&&!isNaN(e.height)&&i.setSize({height:e.height}),i.nodes.subText&&(i.nodes.subText.innerHTML=e.subText||""),i.nodes.icon&&(i.nodes.icon.className=this.__iconSet[e.icon||"01"]["class"],i.nodes.icon.alt=this.__iconSet[e.icon||"01"].alt),i.nodes.btnOk&&(i.nodes.btnOk.innerHTML=e.textOk||"确定",Core.Events.addEvent(i.nodes.btnOk,function(){i.hidden(e.renderer||n.__cfg.renderer),e.funcOk&&e.funcOk.call(i),Core.Events.stopEvent()},"click")),i.nodes.linkOk&&Core.Events.addEvent(i.nodes.linkOk,function(){var t=Core.Events.getEvent();"13"==t.keyCode&&(i.hidden(e.renderer||n.__cfg.renderer),e.funcOk&&e.funcOk.call(i))},"keydown"),i.setDragger(e.dragger||n.__cfg.dragger).setFixed(!0).setAreaLocked(!0),this.__initDialog(i,e)},__initDialog:function(t,e){var i=this;return e.zIndex&&(i.__zIndex=e.zIndex),t.nodes.titleName&&(t.nodes.titleName.innerHTML=e.title||"提示"),t.nodes.btnClose&&(Core.Events.addEvent(t.nodes.btnClose,function(){var i=!0;e.funcBeforeClose&&(i=e.funcBeforeClose.call(t)!==!1),e.funcClose&&e.funcClose.call(t),i&&t.hidden()},"click"),Core.Events.addEvent(t.nodes.btnClose,function(){Core.Events.stopEvent()},"mousedown")),t.setPosition({z:e.zIndex||i.__zIndex}),t.setRenderer(e.renderer||this.__cfg.renderer),t.setDragger(e.dragger||this.__cfg.dragger),t.setMiddle(),t.addEventListener("beforeHidden",function(){i.__updateDialogQueue(this,"remove")}),t.addEventListener("beforeShow",function(){this.nodes.panel.parentNode.appendChild(this.nodes.panel);var t=this;i.__isInitBgShadow||i.__initBGShadow(this,e.isAdamant||i.__cfg.isAdamant),i.__setBGShadowOpacity(0!==e.bgShadowOpacity?e.bgShadowOpacity||.4:e.bgShadowOpacity),window.setTimeout(function(){i.__bgShadow.show(),i.__updateDialogQueue(t,"add")},1)}),t.setTitle=function(t){this.nodes.titleName&&(this.nodes.titleName.innerHTML=t)},t.setHelp=function(t){this.nodes.btnHelp&&(this.nodes.btnHelp.href=t)},t.close=function(){this.hidden()},t.getNodes=function(){return this.nodes},t.getX=function(){return this.x},t.getY=function(){return this.y},t.getWidth=function(){return this.width},t.getHeight=function(){return this.height},t},__initBGShadow:function(t,e){var i=this.__getDocumentSize().width,n=this.__getDocumentSize().height,o=this;this.__bgShadow=new Ui.Panel,this.__bgShadow.setTemplate('<div id="#{panel}" style="background-color:black"></div>').setSize({width:i,height:n}).setAdamant(e).setFixed(!0).setPosition({x:0,y:0,z:o.__zIndex}),Core.Events.addEvent(window,function(){o.__bgShadow.setPosition({x:0,y:0}).setSize({width:o.__getDocumentSize().width,height:o.__getDocumentSize().height})},"resize"),this.__isInitBgShadow=!0},__updateDialogQueue:function(t,e){var i,n;if("add"===e)this.__dialogQueue.push(t);else if("remove"===e)for(i=this.__dialogQueue.length;i--;)this.__dialogQueue[i]===t&&this.__dialogQueue.splice(i,1);0===this.__dialogQueue.length?this.__bgShadow.hidden():(n=this.__dialogQueue[this.__dialogQueue.length-1],this.__bgShadow.nodes.panel.parentNode.insertBefore(this.__bgShadow.nodes.panel,n.nodes.panel),this.__bgShadow.__iframe&&this.__bgShadow.__iframe.parentNode.insertBefore(this.__bgShadow.__iframe,this.__bgShadow.nodes.panel),n.nodes.linkOk&&"none"!==n.nodes.linkOk.style.display&&n.nodes.linkOk.focus())},__setBGShadowOpacity:function(t){t=isNaN(t)?0:Math.max(Math.min(t,1),0),Core.Dom.setStyle(this.__bgShadow.nodes.panel,"opacity",t)},__getDocumentSize:function(){var t=document.documentElement.clientWidth||document.body.clientWidth,e=document.documentElement.clientHeight||document.body.clientHeight;return{width:t,height:e}}}),Ui.Transition={simple:function(t,e,i,n){return i*t/n+e},backEaseIn:function(t,e,i,n){var o=1.70158;return i*(t/=n)*t*((o+1)*t-o)+e},backEaseOut:function(t,e,i,n){var o=1.70158;return i*((t=t/n-1)*t*((o+1)*t+o)+1)+e},backEaseInOut:function(t,e,i,n){var o=1.70158;return(t/=n/2)<1?i/2*t*t*(((o*=1.525)+1)*t-o)+e:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},bounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},bounceEaseIn:function(t,e,i,n){return i-Transition.bounceEaseOut(n-t,0,i,n)+e},bounceEaseInOut:function(t,e,i,n){return n/2>t?.5*Transition.bounceEaseIn(2*t,0,i,n)+e:.5*Transition.bounceEaseOut(2*t-n,0,i,n)+.5*i+e},regularEaseIn:function(t,e,i,n){return i*(t/=n)*t+e},regularEaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},regularEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},strongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},strongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},strongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},elasticEaseIn:function(t,e,i,n){var o,s;if(0==t)return e;if(1==(t/=n))return e+i;if(s=.3*n,!o||o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s))+e},elasticEaseOut:function(t,e,i,n){var o,s;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),!o||o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/s)+i+e},elasticEaseInOut:function(t,e,i,n){var o,s;if(0==t)return e;if(2==(t/=n/2))return e+i;if(!s)var s=.3*n*1.5;if(!o||o<Math.abs(i))var o=i,r=s/4;else var r=s/(2*Math.PI)*Math.asin(i/o);return 1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)+e:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)*.5+i+e}},Ui.TweenStrategy=function(t,e,i,n){this.startValue=t||0,this.endValue=e||0,this.duration=i||0,this.motion=n||Ui.Transition.simple,this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$define({motion:null,duration:0,startValue:0,endValue:0,_itvID:0,_isTweenning:!1,addEventListener:function(t,e){return this.__eventDispatcher.addEventListener(t,e),this},removeEventListener:function(t,e){return this.__eventDispatcher.removeEventListener(t,e),this},start:function(){if(!this._isTweenning){this._isTweenning=!0;var t,e,i=this,n=this.startValue,o=this.endValue,s=this.duration,r=(new Date).getTime();return this._itvID=window.setInterval(function(){t=((new Date).getTime()-r)/1e3,t>i.duration&&(t=i.duration),e=i.motion(t,n,o-n,s),i.onTween&&i.onTween(e),i.__eventDispatcher.dispatchEvent("tween",e),t==i.duration&&i.stop()},25),this}},stop:function(){return window.clearInterval(this._itvID),this._isTweenning=!1,this.onEnd&&this.onEnd(),this.__eventDispatcher.dispatchEvent("end"),this},onTween:function(){},onEnd:function(){}}),Ui.OpacityRenderer=function(){this.__canShow=!0,this.__canHidden=!0,this.__node=null,this.__tween=new Ui.TweenStrategy(0,0,.6,Ui.Transition.strongEaseOut),this.__state="",this.__lastState="",this.__value=0,this.__node=null,this.__eventDispatcher=new Core.Events.EventDispatcher(this),this.__initTweenEvent()}.$implements(Ui.IRenderer).$define({setCanShow:function(t){this.__canShow=!!t},setCanHidden:function(t){this.__canHidden=!!t},show:function(t){var e=this.__tween;return e.stop(),Core.Dom.setStyle(t,"opacity",this.__value),t.style.display="",this.__node=t,this.__state="show",this.__eventDispatcher.dispatchEvent("beforeShow"),this.__canShow&&(e.startValue=this.__value,e.endValue=1,e.start()),this},hidden:function(t){var e=this.__tween;return e.stop(),this.__node=t,this.__state="hidden",this.__eventDispatcher.dispatchEvent("beforeHidden"),this.__canHidden&&(e.startValue=this.__value,e.endValue=0,e.start()),this},addEventListener:function(t,e){return this.__eventDispatcher.addEventListener(t,e),this},removeEventListener:function(t,e){return this.__eventDispatcher.removeEventListener(t,e),this},__initTweenEvent:function(){var t=this;this.__tween.addEventListener("tween",function(e){t.__value=e,Core.Dom.setStyle(t.__node,"opacity",e)}),this.__tween.addEventListener("end",function(){t.__node&&t.__node.style.filter&&(t.__node.style.filter=""),""!==t.__state&&t.__state!==t.__lastState&&(t.__lastState=t.__state,t.__eventDispatcher.dispatchEvent(t.__state)),"hidden"===t.__state&&(t.__node.style.display="none")})}}),Ui.BorderDragger=function(){this.__drag=null,this.__isBindEvent=!1,this.__border=null,this.__dragNode=null,this.__isCreated=!1,this.__tweenX=new Ui.TweenStrategy(0,0,.5,Ui.Transition.strongEaseOut),this.__tweenY=new Ui.TweenStrategy(0,0,.5,Ui.Transition.strongEaseOut),this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IDragger).$define({addEventListener:function(t,e){return"afterdrag"===t.toLowerCase()?this.__eventDispatcher.addEventListener(t,e):this.__drag.addEventListener(t,e),this},removeEventListener:function(t,e){return"afterdrag"===t.toLowerCase()?this.__eventDispatcher.removeEventListener(t,e):this.__drag.removeEventListener(t,e),this},setDrag:function(t,e,i){return this.__isCreated||(this.__createBorder(e),this.__initTweenEvent(e)),this.__drag=new Ui.Drag(t,this.__border,i),this.__dragNode=e,this.__initDragEvent(),this},setLock:function(t){return this.__drag.isLock=!!t,this},setArea:function(t){return this.__drag.lockArea=t,this},destroy:function(){this.__drag.destroy()},__createBorder:function(){this.__border=$C("div");var t=this.__border.style;t.border="2px dashed #BCC4D0",t.position="absolute",t.display="none",t.backgroundColor="transparent",t.MozUserSelect="none",document.body.appendChild(this.__border),this.__isCreated=!0},__initDragEvent:function(){if(!this.__isBindEvent){var t=this,e=this.__border.style,i=this.__dragNode.style,n=this.__tweenX,o=this.__tweenY;this.__drag.addEventListener("beforeDrag",function(){e.zIndex=i.zIndex+1,e.position=i.position,e.width=t.__dragNode.offsetWidth-4+"px",e.height=t.__dragNode.offsetHeight-4+"px",e.left=parseInt(i.left)+"px",e.top=parseInt(i.top)+"px",e.display=""}),this.__drag.addEventListener("afterDrag",function(){$IE6?(i.left=parseInt(e.left)+"px",i.top=parseInt(e.top)+"px",e.display="none",t.__eventDispatcher.dispatchEvent("afterDrag")):(n.startValue=parseInt(i.left),n.endValue=parseInt(e.left),o.startValue=parseInt(i.top),o.endValue=parseInt(e.top),n.start(),o.start())}),this.__isBindEvent=!0}},__initTweenEvent:function(t){var e=t.style,i=this.__border.style,n=this;this.__tweenX.addEventListener("tween",function(t){e.left=t+"px"}),this.__tweenY.addEventListener("tween",function(t){e.top=t+"px"}),this.__tweenX.addEventListener("end",function(){i.display="none",n.__eventDispatcher.dispatchEvent("afterDrag")})}});var winDialog={},DialogTemplate={};!function(){var t={alert:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示标题</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div id="#{content}" class="CP_layercon1">','<div class="CP_prompt">','<img id="#{icon}" class="SG_icon SG_icon201" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="50" height="50" align="absmiddle"/>','<table class="CP_w_ttl"><tr><td id="#{text}"></td></tr></table>','<div id="#{subText}" class="CP_w_cnt SG_txtb"></div>','<p class="CP_w_btns_Mid"><a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnOk}"> </cite></a></p>',"</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),newAlert:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div class="CP_layercon2 pop_v">','<div class="v_prompt">','<img id="#{icon}" class="SG_icon SG_icon148" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="20" height="20" align="absmiddle" />','<div id="#{text}" class="v_cnt SG_txtb"></div>','<div id="#{subText}"></div>','<p class="v_btns">','<a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#"><cite id="#{btnOk}">确定</cite></a>',"</p>","</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),confirm:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示标题</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div id="#{content}" class="CP_layercon1">','<div class="CP_prompt">','<img id="#{icon}" class="SG_icon SG_icon201" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="50" height="50" align="absmiddle"/>','<table class="CP_w_ttl"><tr><td id="#{text}"></td></tr></table>','<div id="#{subText}" class="CP_w_cnt SG_txtb"></div>','<p class="CP_w_btns">','<a  id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnOk}"></cite></a>','<a style="margin-left:5px;" id="#{linkCancel}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnCancel}"> <span id="#{cancel}"></span> </cite></a></p>',"</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),newConfirm:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div class="CP_layercon2 pop_v">','<div class="v_prompt">','<img id="#{icon}" class="SG_icon SG_icon148" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="20" height="20" align="absmiddle" />','<div id="#{text}" class="v_cnt SG_txtb"></div>','<div id="#{subText}"></div>','<p class="v_btns">','<a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#"><cite id="#{btnOk}">确定</cite></a>&nbsp;&nbsp;','<a id="#{linkCancel}" class="SG_aBtn SG_aBtnB SG_aBtn_g" href="#"><cite id="#{btnCancel}">取消</cite></a>',"</p>","</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),customs:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid">','<div class="bLyTop">','<strong id="#{titleName}">提示标题</strong>','<cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite>',"</div>","</th>",'<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid" id="#{content}">',"</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join("")},e={"01":{"class":"SG_icon SG_icon201",alt:"警告"},"02":{"class":"SG_icon SG_icon202",alt:"失败"},"03":{"class":"SG_icon SG_icon203",alt:"成功"},"04":{"class":"SG_icon SG_icon204",alt:"询问"},"05":{"class":"SG_icon SG_bigLoading",alt:"正在加载"},"06":{"class":"SG_icon SG_icon148",alt:"警告"}},i={},n=new Ui.ModuleDialog(t,e,{renderer:Ui.OpacityRenderer,dragger:Ui.BorderDragger,isAdamant:$IE6});winDialog.create=winDialog.createCustomsDialog=function(t,e){return e&&"string"==typeof e?(i[e]=n.create(t),i[e]):n.create(t)},winDialog.alert=function(t,e,o){return o&&"string"==typeof o?(i[o]=n.alert(t,e),i[o]):n.alert(t,e)},winDialog.newAlert=function(t,e,o){return o&&"string"==typeof o?(i[o]=n.newAlert(t,e),i[o]):n.newAlert(t,e)},winDialog.confirm=function(t,e,o){return o&&"string"==typeof o?(i[o]=n.confirm(t,e),i[o]):n.confirm(t,e)},winDialog.newConfirm=function(t,e,o){return o&&"string"==typeof o?(i[o]=n.newConfirm(t,e),i[o]):n.newConfirm(t,e)},winDialog.getDialog=function(t){return t&&"string"==typeof t?i[t]:void 0},DialogTemplate=t}(),Lib.Login.LoginPost=Core.Class.create(),Lib.Login.LoginPost.prototype={url:"http://i.sso.sina.com.cn/js/ssologin.js",callback:null,initialize:function(t,e,i){window.sinaSSOConfig=new function(){i&&(this.from=i),this.pageCharset="utf-8",this.noActiveTime=14400,this.setDomain=!0,this.entry="boke",this.customInit=function(){},this.customLoginCallBack=t,this.customLogoutCallBack=function(){},this.useIframe=!0}},login:function(t,e,i){function n(){"undefined"==typeof i?sinaSSOController.login(t,e):sinaSSOController.login(t,e,i)}"undefined"!=typeof sinaSSOController&&sinaSSOController?(trace("has sso"),sinaSSOController.init(),"function"==typeof sinaSSOController.setLoginType&&sinaSSOController.setLoginType(2),"function"==typeof sinaSSOController.getServerTime&&sinaSSOController.getServerTime(t),trace("init ok"),n()):(trace("no sso"),Utils.Io.JsLoad.request(this.url,{onComplete:function(){n()},onException:function(){},timeout:3e4,isRemove:!1}))},parse:function(t){this.callback.call(t)}},Core.System.getScrollPos=function(t){t=t||document;var e=t.documentElement,i=t.body;return[Math.max(e.scrollTop,i.scrollTop),Math.max(e.scrollLeft,i.scrollLeft),Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.scrollHeight,i.scrollHeight)]},Core.Dom.getXY=function(t){if((null==t.parentNode||null==t.offsetParent||"none"==Core.Dom.getStyle(t,"display"))&&t!=document.body)return!1;{var e;t.ownerDocument}e=t.getBoundingClientRect();var i=Core.System.getScrollPos(t.ownerDocument);return[e.left+i[1],e.top+i[0]]},$IE||(Core.Dom.getXY=function(t){if((null==t.parentNode||null==t.offsetParent||"none"==Core.Dom.getStyle(t,"display"))&&t!=document.body)return!1;{var e=null,i=[];t.ownerDocument}i=[t.offsetLeft,t.offsetTop],e=t.offsetParent;var n="absolute"==Core.Dom.getStyle(t,"position");if(e!=t)for(;e;)i[0]+=e.offsetLeft,i[1]+=e.offsetTop,$SAFARI&&!n&&"absolute"==Core.Dom.getStyle(e,"position")&&(n=!0),e=e.offsetParent;for($SAFARI&&n&&(i[0]-=t.ownerDocument.body.offsetLeft,i[1]-=t.ownerDocument.body.offsetTop),e=t.parentNode;e.tagName&&!/^body|html$/i.test(e.tagName);)Core.Dom.getStyle(e,"display").search(/^inline|table-row.*$/i)&&(i[0]-=e.scrollLeft,i[1]-=e.scrollTop),e=e.parentNode;return i}),function(){var t=parseInt(100*Math.random()),e=[],i=-1,n="",o="#userPosition {padding: 0;margin: 0;border: 0;position: absolute;z-index: 999;}				#sinaNote {position: absolute;z-index: 999999;width: auto;overflow: hidden;padding: 0;margin: 0;				border: 1px solid #CCCCCC;background: #ffffff;text-align:left;}				#sinaNote li {font-size: 12px;list-style: none;margin: 0 1px;height: 20px;padding: 0 5px;clear: both;				line-height: 20px;cursor: pointer;color: #999999;}				#sinaNote li.note {text-align: left;color: #999999;}",s=window,r={overfcolor:"#999",overbgcolor:"#e8f4fc",outfcolor:"#000000",outbgcolor:"",menuStatus:{"sina.com":!0,"sina.cn":!0,"vip.sina.com":!0,"qq.com":!0,"163.com":!0,"126.com":!0,"hotmail.com":!0,"yahoo.com.cn":!0,"gmail.com":!0}};r.createNode=function(){var t=s.document,e=t.createElement("div");e.innerHTML='<ul id="sinaNote" style="display:none;"></ul>';var i=t.createElement("style");i.setAttribute("type","text/css");try{$IE?i.styleSheet.cssText=o:i.innerHTML=o}catch(n){trace(n.message)}var r=t.createElement("div");r.appendChild(e),r.appendChild(i),t.body.appendChild(r)},r.arrowKey=function(t){38==t&&(0>=i&&(i=e.length),i--,r.selectLi(i)),40==t&&(i>=e.length-1&&(i=-1),i++,r.selectLi(i))},r.showList=function(o){n="";var a=Core.Events.getEvent().keyCode;if(38==a||40==a)return r.arrowKey(a),!1;$E("sinaNote")||r.createNode();var l=$E(o).value,d=l.indexOf("@"),c="",h="";d>-1&&(c=l.substr(d+1),h=l.substr(0,d)),e=[],i=0,e[e.length]="sinaNote_MenuItem_Title_"+t;for(var u in this.menuStatus)this.menuStatus[u]=!0,""!=c&&c!=u.substr(0,c.length)?this.menuStatus[u]=!1:e[e.length]="sinaNote_MenuItem_"+u+"_"+t;var f='<li class="note">请选择登录类型</li>';f+='<li id="sinaNote_MenuItem_Title_'+t+'">'+l+"</li>";var p;for(var _ in this.menuStatus)1==this.menuStatus[_]&&(p=""==h?l+"@"+_:h+"@"+_,f+='<li id="sinaNote_MenuItem_'+_+"_"+t+'" title="'+p+'">'+p+"</li>");$E("sinaNote").innerHTML=f;for(var g=0;g<l.length;g++)l.charCodeAt(g)<160?($E("sinaNote").style.display="",this.selectList(o)):this.hideList();
var v,m=$E(o),y=$E("sinaNote"),b=0,E=0;s!=window&&(v=Core.Dom.getXY(window.frameElement),b=v[0],E=v[1]);var w=m.offsetWidth;200>w&&(w=200),y.style.width=w-2+"px";var C=Core.Dom.getXY(m);y.style.left=C[0]-($IE?2:-1)+b+"px",y.style.top=C[1]+m.offsetHeight-($IE?2:-1)+E+"px"},r.selectList=function(t){for(var e=$E("sinaNote").getElementsByTagName("li"),i=1;i<e.length;i++)e[1].style.backgroundColor=r.overbgcolor,e[1].style.color=r.outfcolor,e[i].onmousedown=function(){var e=this.innerHTML;if(e.indexOf("非新浪邮箱")>-1){var i=e.split("@");$E(t).value=i[0]}else $E(t).value=this.innerHTML;null!=Core.Events.getEvent()&&Core.Events.stopEvent()},e[i].onmouseover=function(){1!=i&&(e[1].style.backgroundColor=r.outbgcolor,e[1].style.color=r.overfcolor),this.style.backgroundColor=r.overbgcolor,this.style.color=r.outfcolor},e[i].onmouseout=function(){this.style.backgroundColor=r.outbgcolor,this.style.color=r.overfcolor,e[1].style.backgroundColor=r.overbgcolor,e[1].style.color=r.outfcolor}},r.selectLi=function(i){var o;$E("sinaNote_MenuItem_Title_"+t).style.backgroundColor=r.outbgcolor,$E("sinaNote_MenuItem_Title_"+t).style.color=r.overfcolor;for(var s=0;s<e.length;s++)o=$E(e[s]),o.style.backgroundColor=r.outbgcolor,o.style.color=r.overfcolor;$E(e[i]).style.backgroundColor=r.overbgcolor,$E(e[i]).style.color=r.outfcolor,n=$E(e[i]).innerHTML},r.hideList=function(){$E("sinaNote")||r.createNode(),$E("sinaNote").style.display="none"},r.init=function(t,e,i,o){o=o||window,null==o.document.body&&setTimeout(Core.Function.bind3(function(){this.init(t,e,i,o)},this),100);for(var a in e)this[a]=e[a];Core.Events.addEvent(document,r.hideList,"click"),Core.Events.addEvent(t,r.hideList,"blur"),Core.Events.addEvent(t,Core.Function.bind3(r.showList,this,[t]),"keyup"),Core.Events.addEvent(t,function(){var e,o=Core.Events.getEvent().keyCode;if(13==o||9==o){if(""!=n){var s=n;if(s.indexOf("非新浪邮箱")>-1){var r=s.split("@");t.value=r[0]+"@",e=!1}else t.value=n,e=!0}e?null!=i&&setTimeout(function(){i.focus()},0):t&&t.focus()}},"keydown"),o&&(s=o)},Lib.passcardOBJ=r}(),Lib.Login.Ui=Core.Class.create();var msnRefreshTimer=0;Lib.Login.Ui.prototype={dialog:null,isInit:!1,request:null,callback:null,initialize:function(){},login:function(t,e,i){this.callback=t||null,this.clearDomain=e||!1,this.from=i||null,this.initDom(),this.initEvent(),this.dialog.show(),this.dialog.setAreaLocked(!0),this.reloadName(),this.onShow(),this.focus(),"blogMove"===scope.$pageid&&($E("login_move_tip").style.display=""),$IE6&&this.initAD(),Lib.passcardOBJ.init($E("login_name_d"),{overfcolor:"#999",overbgcolor:"#e8f4fc",outfcolor:"#000000",outbgcolor:""},$E("login_pass_d"))},reloadName:function(){var t=Lib.Login.info(),e=t.ln;e&&($E("login_name_d").value=e);var i=Utils.Cookie.getCookie("ALF");""!=i&&$E("login_save")&&($E("login_save").checked=!0,$E("login_save_tips").style.display="none"),i=Utils.Cookie.getCookie("LiRe"),""!=i&&$E("login_save")&&($E("login_save").checked=!0,$E("login_save_tips").style.display="none")},initDom:function(){var t=this;this.dialog=winDialog.createCustomsDialog({tpl:t.tpl}),this.dialog.addEventListener("hidden",function(){this.destroy()}),this.dialog.setContent(this.struc),this.dialog.setTitle("登录新浪博客"),this.dialog.setMiddle()},initEvent:function(){var t=this.parse.bind2(this);this.request=new Lib.Login.LoginPost(t,this.clearDomain,this.from),Core.Events.addEvent("login_button",this.doLogin.bind2(this)),Core.Events.addEvent("login_name_d",function(t){var e=t.keyCode;13==e&&this.doLogin()}.bind2(this),"keydown"),Core.Events.addEvent("login_pass_d",function(t){var e=t.keyCode;13==e&&this.doLogin()}.bind2(this),"keydown");var e=1;Core.Events.addEvent("login_save",function(){if($E("login_save_tips").style.display=$E("login_save").checked?"":"none",e){var t="http://control.blog.sina.com.cn/blog_rebuild/riaapi/padblog/padInfo.php?ck_login=A00001&rnd="+Math.random();Utils.Io.JsLoad.request(t,{onComplete:function(){},onException:function(){}}),e=null}})},doLogin:function(){Core.Events.stopEvent();var t=$E("login_name_d").value,e=$E("login_pass_d").value;if(t=Core.String.trim(t),e=e,""==t)return this.error("请输入登录名"),!1;if(""==e)return this.error("请输入密码"),!1;if("undefined"!=typeof sinaSSOController&&"undefined"!=typeof sinaSSOController.loginExtraQuery&&"undefined"!=typeof sinaSSOController.loginExtraQuery.door){var i=$E("login_vcode").value;sinaSSOController.loginExtraQuery.door=i||1}return $E("login_save").checked?(v7sendLog("48_01_38_1"),this.request.login(t,e,60)):(v7sendLog("48_01_38_0"),this.request.login(t,e)),!1},parse:function(t){function e(){if(this.callback){try{$tray.renderLogin()}catch(t){}this.callback.call()}else window.location=window.location.toString().replace(/#.*/,"")}if(t.result){Lib.checkAuthor(),$E("login_save").checked?Utils.Cookie.setCookie("LiRe",!0,2400,"/",".blog.sina.com.cn"):Utils.Cookie.setCookie("LiRe","",2400,"/",".blog.sina.com.cn");var i=new Date,n=i.getFullYear(),o=i.getMonth(),s=i.getDate(),r=new Date(n,o,s,24).getTime();Utils.Cookie.setCookie("onceloggedonblog",r,720,"/",".blog.sina.com.cn");var a=this,l=!1;Utils.Io.JsLoad.request("http://login.sina.com.cn/bindmail/checkmailuser.php?entry=blog&name="+encodeURIComponent($E("login_name_d").value)+"&utf82gbk=1&callback=scope.$bindEmailAlert",{noreturn:!0,timeout:5e3,onException:function(){l||e.call(a)}}),scope.$bindEmailAlert=function(t){if(l=!0,"y"!=t.ret&&"not_verify"!=t.errcode||1==Utils.Cookie.getCookie("sbr_noTBE"))e.call(a);else{var i=winDialog.createCustomsDialog({content:['<div id="#{entityID} style="width:358px;height:144px" class="CP_layercon2 unilayer">','<div id="#{contentID}" class="CP_prompt">','<img height="50" align="absmiddle" width="50" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" class="SG_icon SG_icon201">','<table class="CP_w_ttl"><tbody><tr><td>经检测您的帐号存在一定的安全隐患！<br>建议绑定邮箱</td></tr></tbody></table>','<p class="CP_w_btns_Mid"><a href="javascript:;" class="SG_aBtn SG_aBtnB" id="#{bindit}" target="_blank"><cite> 绑定 </cite></a>&nbsp;&nbsp;<a href="javascript:;" class="SG_aBtn SG_aBtnB" id="#{nobind}"><cite> 暂不绑定 </cite></a></p>',"</div>",'<div class="unilayerB SG_j_linedot1">','<p class="SG_txtb"><input type="checkbox" id="#{noalertbind}"><label for="#{noalertbind}">一周内不提醒</label></p>',"</div>","</div>"].join(""),shadow:1},"bindEmail");i.setMiddle(),i.show(),i.nodes.btnClose.onclick=function(){e.call(a),i.hidden()},i.nodes.nobind.onclick=function(){setTimeout(function(){e.call(a),i.hidden()},100)},i.nodes.bindit.href="http://login.sina.com.cn/bindmail/bindmail.php?entry=blog",i.nodes.bindit.onclick=function(){e.call(a)},i.nodes.noalertbind.onclick=function(){this.checked?Utils.Cookie.setCookie("sbr_noTBE","1",168,"/",".blog.sina.com.cn"):Utils.Cookie.setCookie("sbr_noTBE","",0,"/",".blog.sina.com.cn")}}},this.dialog.hidden()}else{if("4049"===t.errno)return sinaSSOController.loginExtraQuery={door:0},$E("login_ckimg").style.display="",$E("login_vcode").value="",$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0",Core.Events.addEvent($E("reloadCode"),function(){$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0",$E("login_vcode").value="",$E("login_div_error").innerHTML=""}),void this.error("");if("2070"===t.errno)return Core.Events.fireEvent($E("reloadCode"),"click"),void this.error(t.reason);if("4047"==t.errno)return void this.error(t.reason);if("4057"==t.errno)return void this.error(t.reason);if("4040"==t.errno)return void this.error(t.reason);this.error("登录名或密码错误"),$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0",$E("login_vcode").value=""}},friendlyTip:function(t){var e=t,i=$E("login_name_d"),n=i.value;if(!/[\u0391-\uFFE5]+/.test(n)&&!/^\d+$/.test(n)&&!/^@/.test(n)){var o="你的登录名可能是 ",s='<a href="#" class="underline" onclick="$_RENAME(/@.*/, \'{1}\');return false">{0}{1}</a>',r=["@sina.com","@sina.cn"],a="";a=/@sina\.cn$/.test(n)?s.format("{0}",r[0]):/@sina\.com$/.test(n)?s.format("{0}",r[1]):s.format("{0}",r[0])+" 或 "+s.format("{0}",r[1]),e=(o+a).format(n.replace(/@.*/,""))}return e},rename:function(){return window.$_RENAME=function(t,e){var i=$E("login_name_d");i.value=i.value.replace(t,"")+e,$E("login_pass_d").focus(),$E("login_div_error").innerHTML=""},window.$_RENAME}(),focus:function(){var t=$E("login_name_d");""==t.value?t.focus():$E("login_pass_d").focus()},initAD:function(){$E("login_ad").src="http://blog.sina.com.cn/lm/iframe/71/2008/0731/21.html"},onShow:function(){},error:function(t){$E("login_div_error").innerHTML=t,$E("login_pass_d").value="",this.focus()},tpl:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid">','<div class="bLyTop">','<strong id="#{titleName}">提示标题</strong>','<cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite>',"</div>","</th>",'<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid" id="#{content}">',"</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),struc:'		<div class="CP_layercon2 passLoginItem">			<div>				<div id="login_move_tip" style="display:none;margin-bottom:12px">可以使用新浪微博、邮箱、通行证的帐号进行登录</div>				<div class="boxA">登录名：					<input tabIndex="201" type="text" class="fm1" style="width:215px;" name="login_name" id="login_name_d" tabIndex=1/>  <a style="font-size: 12px;" href="http://login.sina.com.cn/signup/signupmail.php?entry=blog&srcuid='+scope.$uid+'&src=blogicp" target="_blank">立即注册</a>				</div>				<div class="boxA">密　码：					<input tabIndex="202" type="password" class="fm1" style="width:215px;" name="login_pass" maxlength="16" id="login_pass_d" tabIndex=2/>  <a style="font-size: 12px;" href="http://login.sina.com.cn/getpass.html" target="_blank">找回密码</a>				</div>				<div id="login_ckimg" class="boxA" style="display:none"> <p class="p_img">验证码：                  	<input type="text" id="login_vcode" name="login_vcode" class="fm1" size="10" maxlength="5" />                  	<img width="100" align="absmiddle" id="checkImg" src="http://login.sina.com.cn/cgi/pin.php?r='+Core.Math.getUniqueId()+'&s=0" /> <a href="javascript:;" onclick="return false;" style="font-size: 12px;"><span id="reloadCode">换一换</span></a></p> 			    </div>				<div class="ErrTips" id="login_div_error"></div>				<div class="boxB"><p><input tabIndex="203" type="checkbox" value="" id="login_save" checked="checked" /><label for="login_save"> 记住登录状态</label></p><p id="login_save_tips" style="color:#999;display:none;">建议在网吧/公用电脑上取消该选项</p><p style="margin-top: 8px;"><a id="login_button" class="SG_aBtn SG_aBtnB SG_aBtn_sub" href="javascript:;" tabIndex=204><cite>登录<input type="text"/></cite></a> </p></div>			</div>			<div class="connect_msn" id="connect_msn" style="position:relative;">				<span>使用 MSN 帐号登录博客</span>				<a href="#" onclick="Lib.checkAuthor();v7sendLog(\'48_01_36\'); window.open(\'https://login.live.com/oauth20_authorize.srf?client_id=0000000040046F08&redirect_uri=http%3A%2F%2Fcontrol.blog.sina.com.cn%2Fblog_rebuild%2Fmsn%2FmsnLoginCallBack.php&response_type=code&scope=wl.basic%20wl.signin%20wl.offline_access%20wl.share%20wl.emails\',\'neww\',\'left='+(screen.width-440)/2+",top="+(screen.height-400)/2+',height=400,width=440\');msnrefreshWindow();" style="background:transparent url(http://simg.sinajs.cn/blog7style/images/msn_login01.gif) no-repeat left top; width:70px; height:22px; line-height:22px; display:inline-block; text-align:left; text-indent:2em; text-decoration:none; color:white; font-weight:bold; font-size:14px;">登录</a>			</div>			<a href="http://blog.sina.com.cn/s/blog_4b0f52990100miil.html" target="_blank"style="left:308px;position:relative;top:-24px;">如何登录？</a>			<div class="CP_lg_ad SG_j_linedot1">				<iframe id="login_ad" src="http://blog.sina.com.cn/lm/iframe/71/2008/0731/21.html" frameborder="0" scrolling="no" height="25" width="auto"></iframe>			</div>		</div>'},$registJob("blog7thCount",function(){function t(t){var e;t=""+t,t.length<8&&(e=8-t.length);for(var i="",n=0;e>n;n++)i+="0";return i+t}function e(){Utils.Io.JsLoad.request("http://control.blog.sina.com.cn/blog_7years/videoNum.php",{onComplete:function(e){"A00006"==e.code&&(f.innerHTML=t(e.data.message),p=e.data.message,Utils.Cookie.setCookie("blog7Thx","true"))},GET:{type:1,n:Math.random()}})}Lib.checkAuthor();var i="新浪博客七周年视频  博客七周年 感谢有你",n="http://www.sinaimg.cn/blog/qing/image/luoyimei/video.jpg",o="http://blog.sina.com.cn/blog_7years/blogvideo.html",s="#新浪博客七周年#新浪博客七周年视频——《感谢有你》！感谢所有生活在新浪博客的博主们！:http://blog.sina.com.cn/blog_7years/blogvideo.html",r="#新浪博客七周年#新浪博客七周年视频——《感谢有你》！感谢所有生活在新浪博客的博主们！http://video.sina.com.cn/v/b/84691108-2264489285.html";$E("share_db")&&($E("share_db").href="javascript:void((function(){var%20u='http://shuo.douban.com/!service/share?image=&href="+encodeURIComponent(o)+"&name="+encodeURIComponent(i)+"';window.open(u,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330');return%200;})());"),$E("share_kx")&&($E("share_kx").href="javascript:void(kaixin=window.open('http://www.kaixin001.com/~repaste/share.php?&rurl="+escape(o)+"&rtitle="+escape(i)+"&rcontent="+escape(s)+"','kaixin'));kaixin.focus();");var a="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=2264489285&ralateUid=2264489285"+(scope.$ralateUid?"&ralateUid="+scope.$ralateUid:"")+"',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();scope.weiboLog();})(screen,document,encodeURIComponent,'','','"+n+"','"+r+"','"+o+"','utf-8'));";$E("share_weibo")&&($E("share_weibo").href=a),scope.weiboLog=function(){v7sendLog("50_01_07")},$E("share_rr")&&($E("share_rr").href="javascript:void(function(){var renren=window.open('http://share.renren.com/share/buttonshare.do?link="+encodeURIComponent(o)+"&title="+i+"&content="+encodeURIComponent(s)+"');}())");var l=$E("userLoginDiv"),d=$E("userLogin");if(l){if($isLogin){var c='你好，<a target="_blank" href="http://blog.sina.com.cn/u/'+$UID+'" class="nikename">'+$nick.substring(0,6)+'</a><a href="http://login.sina.com.cn/cgi/login/logout.php">退出</a>';l.innerHTML=c}d&&(d.onclick=function(){(new Lib.Login.Ui).login(function(){location.reload()})})}var h=$E("myThx"),u=$E("didThx"),f=$E("thxCount"),p=0,_=Utils.Cookie.getCookie("blog7Thx");_&&(u.style.display="",h.style.display="none"),e(),h&&(h.onclick=function(e){_||(Core.Events.stopDefaultEvent(e),v7sendLog("50_01_11"),Utils.Io.JsLoad.request("http://control.blog.sina.com.cn/blog_7years/videoNum.php",{onComplete:function(e){if("A00006"==e.code)h.style.display="none",u.style.display="",f.innerHTML=t(parseInt(e.data.message)+parseInt(p));else{winDialog.alert(e.data.message,{funcOk:function(){},textOk:"确定",title:"提示",icon:"01"})}},GET:{n:Math.random()}}))});setInterval(e,5e3)}),$registJob("loginStatus",function(){Lib.checkAuthor();var t=Utils.Cookie.getCookie,e=Utils.Cookie.setCookie,i=t("_s_loginStatus"),n=t("_s_loginuid");if($isLogin){if(n===$UID)return}else if(!i||i===n)return;e("_s_loginuid",$UID||i,24-(new Date).getHours(),"","blog.sina.com.cn");var o="http://control.blog.sina.com.cn/blog_rebuild/riaapi/padblog/padInfo.php?rnd="+Math.random();Utils.Io.JsLoad.request(o,{onComplete:function(){},onException:function(){}})}),Utils.Io.loadCss=function(t,e){if(null==t)return!1;e=e||window;var i=e.document;t.id=t.id||"";var n;t.url?(n=i.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t.url)):t.text&&(n=i.createElement("style"),n.setAttribute("type","text/css"),$IE?n.styleSheet.cssText=t.text:n.innerHTML=t.text),n.setAttribute("id",t.id),i.getElementsByTagName("head")[0].appendChild(n)},Lib.register=function(t,e){for(var i,n=t.split("."),o=Lib;i=n.shift();)n.length?(void 0===o[i]&&(o[i]={}),o=o[i]):void 0===o[i]&&(o[i]=e(Lib))},Lib.register("util.loadScript",function(){var t=!0,e=!1,i={},n=function(n){Utils.Io.JsLoad.request(n,{isRemove:e,noreturn:t,onComplete:function(t){i[n].isLoading=e;for(var o=i[n].cb,s=0,r=o.length;r>s;s++)o[s](t);i[n].cb=null}})};return function(e,o){var s=i[e],r=s&&s.cb;s?s.isLoading?r.push(o):o():(r=[o],s={isLoading:t,cb:r},i[e]=s,n(e,s))}}),Lib.register("sendSuda",function(t){var e="http://www.sinaimg.cn/unipro/pub/suda_s_v851c.js";return function(i){t.util.loadScript(e,i)}}),$registJob("suda",function(){function t(t,e,i,o,s){switch(n&&v7sendLog(s),t){case"index":case"indexM":v7sendLog(e);break;case"editor":v7sendLog(i);break;case"articletj":v7sendLog(o)}}var e=scope&&scope.$pageid,i=window.location.href,n=i.indexOf("tj=1")>-1,o=e&&("articletj"===e||"index"===e||"indexM"===e||"editor"===e||n);if(o)var s=encodeURIComponent(i),r=encodeURIComponent(document.referrer);if("function"==typeof _S_pSt)return void(o&&v7sendLog("42_01_03_"+(new Date).getTime()+"_"+s+"_"+r));if(o){if($isLogin)var a="42_01_01_"+$UID+"_"+(new Date).getTime()+"_"+s+"_"+r;else var a="42_01_01_"+(new Date).getTime()+"_"+s+"_"+r;t(e,"42_01_08","42_01_14",a,"42_01_05")}Lib.sendSuda(function(){try{_S_pSt("")}catch(i){}if(o){if($isLogin)var n="42_01_02_"+$UID+"_"+(new Date).getTime()+"_"+s+"_"+r;else var n="42_01_02_"+(new Date).getTime()+"_"+s+"_"+r;t(e,"42_01_09","42_01_15",n,"42_01_06")}})});;

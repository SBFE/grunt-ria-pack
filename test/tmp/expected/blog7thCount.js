if(typeof Sina=="undefined"){Sina={}}Sina.pkg=function(c){if(!c||!c.length){return null}var d=c.split(".");var b=Sina;for(var a=(d[0]=="Sina")?1:0;a<d.length;++a){b[d[a]]=b[d[a]]||{};b=b[d[a]]}return b};function $E(b){var a=typeof b=="string"?document.getElementById(b):b;if(a!=null){return a}return null}function $C(a){return document.createElement(a)}function $N(a){return document.getElementsByName(a)}function $T(b,a){return b.getElementsByTagName(a)}try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}(function(){var b=function(f,d){var c=f;return function(){return c.apply(d,arguments)}};var a="Debug";if(window[a]==null||typeof window[a].log=="undefined"){window[a]={cacheData:[],base_url:"http://sjs.sinajs.cn/bind2/",product:scope.$PRODUCT_NAME,baseColor:{1:{color:"#FFF",bgcolor:"#E00"},2:{color:"#F00"},3:{color:"#FFF000"},4:{color:"#0F0"},5:{color:"#FFF"}},fatal:function(c){this.addData(c,1)},error:function(c){this.addData(c,2)},warning:function(c){this.addData(c,3)},info:function(c){this.addData(c,4)},log:function(c){this.addData(c,5)},dir:function(c){this.addData(c,5)},addData:function(d,c,f,g){if(d==null){return}if(typeof d!="object"){d=d.toString()}var i={type:c||"5",color:f||this.baseColor[c].color,bgcolor:g||this.baseColor[c].bgcolor};this.cacheData.push([d,i]);if(this.initFinished==true){this.showCurrentData([d,i])}}};window.trace=b(window[a].log,window[a]);window.traceError=b(window[a].error,window[a])}})();Sina.pkg("Core");if(typeof Core=="undefined"){Core=Sina.Core}Sina.pkg("Core.Array");Core.Array.foreach=function(d,c){if(d==null&&d.constructor!=Array){return[]}var f=0,b=d.length,g=[];while(f<b){var a=c(d[f],f);if(a!==null){g[g.length]=a}f++}return g};Sina.pkg("Core.Events");(function(l){var g=navigator.userAgent.toLowerCase();var a={$winXP:/windows nt 5.1/.test(g),$winVista:/windows nt 6.0/.test(g),$win7:/windows nt 6.1/.test(g),$macOS:/mac/.test(g)};var c={$OPERA:false,$IE6:false,$IE7:false,$IE8:false,$IE9:false,$SAFARI:false,$FF2:false,$FF3:false,$FF4:false,$FF:false,$CHROME:false,$TT:false,$360:false,$SOGO:false,$Maxthon:false};var i={$IE:0,$MOZ:false,$WEBKIT:false,$KHTML:false};if(/opera/.test(g)||l.opera){c.$OPERA=true}else{if(/chrome\/(\S+)/.test(g)){c.$CHROME=true}else{if(/safari\/(\S+)/.test(g)){c.$SAFARI=true}else{if(/msie/.test(g)){i.$IE=true;if(/360se/.test(g)){c.$360=true}else{if(/tencenttraveler/.test(g)){c.$TT=true}else{if(/se\s\S+\smetasr\s\d+\.\d+/.test(g)){c.$SOGO=true}}}var b=g.match(/msie (\d+)/);var f=parseInt(b[1]);i.$IE=f;if(f===8){c.$IE8=true}else{if(f===6){c.$IE6=true}else{if(f===9){c.$IE9=true}else{if(f===7){c.$IE7=true}else{if(f===10){c.$IE10=true}}}}}}else{if(/firefox/.test(g)){var b=g.match(/firefox\/(\d+)/);c.$FF=parseInt(b[1]);if(/firefox\/3/.test(g)){c.$FF3=true}else{if(/firefox\/4/.test(g)){c.$FF4=true}else{if(/firefox\/2/.test(g)){c.$FF2=true}}}}}}}}try{var m=window.external;c.$Maxthon=m.max_version?true:false}catch(d){}if(/applewebkit\/(\S+)/.test(g)){i.$WEBKIT=true}else{if(/khtml\/(\S+)/.test(g)){i.$KHTML=true}else{if(/rv:([^\)]+)\) gecko\/\d{8}/.test(g)){i.$MOZ=true}}}c.$MOBILE=/mobile/i.test(g);if(!c.$MOBILE){c.$MOBILE=/HTC/.test(g)}function j(q,n){var o;for(o in n){q[o]=n[o]}}j(l,c);j(l,i);j(l,a)})(window);Core.Events.addEvent=function(g,d,c,a){var f=typeof g=="string"?$E(g):g;if(f==null){trace("addEvent 找不到对象："+g);return}if(typeof a=="undefined"){a=false}if(typeof c=="undefined"){c="click"}if(f.addEventListener){if(c=="mousewheel"&&$FF){c="DOMMouseScroll"}f.addEventListener(c,d,a);return true}else{if(f.attachEvent){var b=f.attachEvent("on"+c,d);return true}else{f["on"+c]=d}}};Core.Events.removeEvent=function(a,b,c){var d=$E(a);if(d==null){trace("removeEvent 找不到对象："+a);return}if(typeof b!="function"){return}if(typeof c=="undefined"){c="click"}if(d.addEventListener){d.removeEventListener(c,b,false)}else{if(d.attachEvent){d.detachEvent("on"+c,b)}}b[c]=null};Sina.pkg("Core.Function");Core.Function.bind3=function(d,c,b){b=b==null?[]:b;var a=d;return function(){return a.apply(c,b)}};Core.Array.findit=function(a,c){var b=-1;Core.Array.foreach(a,function(f,d){if(c==f){b=d}});return b};window.onerror=function(c,b,a){trace("Error occured:"+c+"<br/>file:"+b+"<br/>line:"+a+"<br/>");return true};function Jobs(a){this.option=a||{};this._jobTable=[[],[],[],[]]}Jobs.prototype={_registedJobTable:{},errorMsg:[],_registJob:function(b,a){this._registedJobTable[b]=a},error:function(a){Debug.error(a);this.errorMsg.push(a)},add:function(b,a){a=a||1;if(Core.Array.findit(this._jobTable[a],b)==-1){this._jobTable[a].push(b)}else{this.error("Error: Job <b>"+b+"</b> is existed now.")}},start:function(){if(this.option.onStart!=null){this.option.onStart()}var c=this._registedJobTable;var a=this._jobTable[1].concat(this._jobTable[2]);var d=this;this.fe=Core.Function.bind3(d.focus,d,[]);var b=function(){if(d._jobTable[3].length==0){if(d.option.onEnd!=null){d.option.onEnd()}return}Core.Events.addEvent(document.body,d.fe,"focus");Core.Events.addEvent(window,d.fe,"scroll");Core.Events.addEvent(document.body,d.fe,"mousemove");Core.Events.addEvent(document.body,d.fe,"mouseover")};this.queue(a,b)},focus:function(){var b=this;if(this.focusdown){Core.Events.removeEvent(document.body,b.fe,"focus");Core.Events.removeEvent(window,b.fe,"scroll");Core.Events.removeEvent(document.body,b.fe,"mousemove");Core.Events.removeEvent(document.body,b.fe,"mouseover");b.fe=null;return}this.focusdown=true;var a=this._jobTable[3];this.queue(a,this.option.onEnd)},queue:function(a,l){var j=this;var b=function(){return new Date().valueOf()};var c=this._registedJobTable;var g=a.length;var f=0;var d=window.setInterval(function(){if(f>=g){clearInterval(d);d=null;if(l!=null){l()}return}var q=a[f];var o=c[q];f++;if(typeof o=="undefined"){j.error("<b>Job["+q+"] is undefiend!!!</b>");return}var n=true;var m=b();try{o.call()}catch(p){j.error("<b>Job["+q+"] failed!!!</b>"+p.message+"");if(l!=null){l()}n=false;throw p}finally{if(n){var i=b();Debug.info("<b>Job["+q+"] done in "+(i-m)+"ms.</b>")}}},10)},call:function(b,a){if(typeof this._registedJobTable[b]!="undefined"){this._registedJobTable[b].apply(this,a)}else{trace("<b>Job["+b+"] is undefined!!!</b>",{color:"#900",bgColor:"#FFF;"})}}};$registJob=function(b,a){Jobs.prototype._registJob(b,a)};$callJob=function(b){var a=[];if(arguments.length>1){Core.Array.foreach(arguments,function(c,d){a[d]=c});a.shift()}Jobs.prototype.call(b,a)};Sina.pkg("Utils");if(typeof Utils=="undefined"){Utils=Sina.Utils}Sina.pkg("Utils.Io");Sina.pkg("Core.System");(function(){var a=function(c,b){var d;try{if(typeof b!="undefined"){for(d in c){if(b[d]!=null){c[d]=b[d]}}}}finally{d=null;return c}};Core.System.parseParam=a})();Sina.pkg("Core.String");Utils.Url=function(a){a=a||"";this.url=a;this.query={};this.parse()};Utils.Url.prototype={parse:function(a){if(a){this.url=a}this.parseAnchor();this.parseParam()},parseAnchor:function(){var a=this.url.match(/\#(.*)/);a=a?a[1]:null;this._anchor=a;if(a!=null){this.anchor=this.getNameValuePair(a);this.url=this.url.replace(/\#.*/,"")}},parseParam:function(){var a=this.url.match(/\?([^\?]*)/);a=a?a[1]:null;if(a!=null){this.url=this.url.replace(/\?([^\?]*)/,"");this.query=this.getNameValuePair(a)}},getNameValuePair:function(b){var a={};b.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(c,f,d){if(f==""){return}a[f]=d||""});return a},getParam:function(a){return this.query[a]||""},clearParam:function(){this.query={}},setParam:function(a,b){if(a==null||a==""||typeof(a)!="string"){throw new Error("no param name set")}this.query=this.query||{};this.query[a]=b},setParams:function(a){this.query=a},serialize:function(c){var a=[];for(var b in c){if(c[b]==null||c[b]==""){a.push(b+"=")}else{a.push(b+"="+c[b])}}return a.join("&")},toString:function(){var a=this.serialize(this.query);return this.url+(a.length>0?"?"+a:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(a){return this.anchor?"#"+this.serialize(this.anchor):(a?"#":"")}};Core.String.encodeDoubleByte=function(a){if(typeof a!="string"){return a}return encodeURIComponent(a)};Utils.Io.JsLoad={};(function(){function a(m,g){b(m,g);var l=m.urls;var f,d=l.length;for(f=0;f<d;f++){var j=$C("script");j.src=l[f].url;j.charset=l[f].charset;j.onload=j.onerror=j.onreadystatechange=function(){if(j&&j.readyState&&j.readyState!="loaded"&&j.readyState!="complete"){return}g.script_loaded_num++;j.onload=j.onreadystatechange=j.onerror=null;if((!1)!==m.isRemove){j.src="";j.parentNode.removeChild(j)}j=null};document.getElementsByTagName("head")[0].appendChild(j)}}function b(o,j){var n=o.urls;var q=o.GET;var l,m=n.length;var p,f,d,g;for(l=0;l<m;l++){g=window.parseInt(Math.random()*100000000);f=new Utils.Url(n[l].url);for(p in q){if(o.noencode==true){f.setParam(p,q[p])}else{f.setParam(p,Core.String.encodeDoubleByte(q[p]))}}d=f.getParam("varname")||"requestId_"+g;if(o.noreturn!=true){f.setParam("varname",d)}j.script_var_arr.push(d);n[l].url=f.toString();n[l].charset=n[l].charset||o.charset}}function c(g,i){var f={isRemove:!0,urls:[],charset:"utf-8",noreturn:false,noencode:false,timeout:-1,POST:{},GET:{},onComplete:null,onException:null};var d={script_loaded_num:0,is_timeout:false,is_loadcomplete:false,script_var_arr:[]};f.urls=typeof g=="string"?[{url:g}]:g;Core.System.parseParam(f,i);a(f,d);(function(){if(f.noreturn==true&&f.onComplete==null){return}var j,l=[];if(d.script_loaded_num==f.urls.length){d.is_loadcomplete=true;if(f.onComplete!=null){for(j=0;j<d.script_var_arr.length;j++){l.push(window[d.script_var_arr[j]])}if(d.script_var_arr.length<2){f.onComplete(l[0])}else{f.onComplete(l)}}return}if(d.is_timeout==true){return}setTimeout(arguments.callee,50)})();if(f.timeout>0){setTimeout(function(){if(d.is_loadcomplete!=true){if(f.onException!=null){f.onException()}d.is_timeout=true}},f.timeout)}}Utils.Io.JsLoad.request=function(d,f){new c(d,f)}})();Core.System.winSize=function(b){var a,c;if(b){target=b.document}else{target=document}if(self.innerHeight){if(b){target=b.self}else{target=self}a=target.innerWidth;c=target.innerHeight}else{if(target.documentElement&&target.documentElement.clientHeight){a=target.documentElement.clientWidth;c=target.documentElement.clientHeight}else{if(target.body){a=target.body.clientWidth;c=target.body.clientHeight}}}return{width:a,height:c}};Core.Events.getEvent=function(){return window.event};if(!$IE||$IE>8){Core.Events.getEvent=function(){if(!$IE&&window.event){return window.event}var b=arguments.callee.caller;var a;var c=0;while(b!=null&&c<40){a=b.arguments[0];if(a&&(a.constructor==Event||a.constructor==MouseEvent)){return a}c++;b=b.caller}return a}}Core.Events.stopEvent=function(a){var b=a?a:Core.Events.getEvent();if(b!=null){b.cancelBubble=true;b.returnValue=false}};if(!$IE||$IE>8){Core.Events.stopEvent=function(a){var b=a?a:Core.Events.getEvent();if(b!=null){b.preventDefault();b.stopPropagation()}}}Sina.pkg("Core.Dom");Core.Dom.setStyle=function(a,b,c){switch(b){case"opacity":a.style.filter="alpha(opacity="+(c*100)+")";if(!a.currentStyle||!a.currentStyle.hasLayout){a.style.zoom=1}break;case"float":b="styleFloat";default:a.style[b]=c}};if(!$IE||!($IE<9)){Core.Dom.setStyle=function(a,b,c){if(b=="float"){b="cssFloat"}a.style[b]=c}}Sina.pkg("Ui");if(typeof Ui=="undefined"){Ui=Sina.Ui}Core.Function.bind2=function(c,b){var a=c;return function(){return a.apply(b,arguments)}};Function.prototype.bind2=function(b){var a=this;return function(){return a.apply(b,arguments)}};Ui.Template=function(a){this.tmpl=a;this.pattern=/(#\{(.*?)\})/g};Ui.Template.prototype={evaluate:function(a){return this.tmpl.replace(this.pattern,function(){return a[arguments[2]]||""})},evaluateMulti:function(c,a){var b=[];Core.Array.foreach(c,Core.Function.bind2(function(d,f){f=a?c.length-f:f;b[f]=this.evaluate(d)},this));return b.join("")}};var Layer=function(b){this.entity=null;this.ifm=null;var d=this;var c={width:0,height:0,x:0,y:0,isFixed:false,uniqueID:"",entityID:"",contentID:"",template:b,templateString:"",nodes:{}};this.getProperty=function(){return c};(function a(){var f=d.getProperty();f.uniqueID="_"+d.getUniqueID();f.entityID=f.uniqueID+"_entity";f.contentID=f.uniqueID+"_content";d.setTemplate(f.template);f.width=parseInt(d.entity.style.width);if($IE6){d.addIframe()}document.body.appendChild(d.entity);d.hidden()})();this._ie6Fixed=function(){d.entity.style.left=document.documentElement.scrollLeft+d.getProperty().x+"px";d.entity.style.top=document.documentElement.scrollTop+d.getProperty().y+"px";if(d.ifm){d.ifm.style.left=document.documentElement.scrollLeft+d.getProperty().x+"px";d.ifm.style.top=document.documentElement.scrollTop+d.getProperty().y+"px"}}};Layer.prototype={setTemplate:function(c){var f=this.getProperty();if(this.entity){this.entity.parentNode.removeChild(this.entity);this.entity=null}if(typeof c=="object"){f.nodes=c;if(this.entity){this.entity.parentNode.removeChild(this.entity);this.entity=null}this.entity=f.nodes.entity;document.body.appendChild(this.entity);if(!f.nodes.entity||!f.nodes.content){throw new Error("[layer.js] missing entity or content in layer nodes")}else{this.entity.style.position="absolute";this.entity.style.zIndex="1024";this.entity.style.left=f.x+"px";this.entity.style.top=f.y+"px"}return}var d=/[^\{\}]+(?=\})/g;f.template=c;f.templateString=f.template.match(d);this.entity=$C("div");var b=$C("div");var a=new Ui.Template(f.template);b.innerHTML=a.evaluate(this.getNodes("i"));document.body.appendChild(b);if(!$E(f.entityID)||!$E(f.contentID)){throw new Error("[layer.js] there missing #{entityID} or #{contentID} in layer template")}else{this.entity=$E(f.entityID);this.entity.style.position="absolute";this.entity.style.zIndex="1024";this.entity.style.left=f.x+"px";this.entity.style.top=f.y+"px";document.body.replaceChild(this.entity,b);b=null}f.nodes=this.getNodes()},setSize:function(a){var b=this.getProperty();Core.System.parseParam(b,a);if(a.width){b.nodes.content.style.width=b.width+"px"}if(a.height){b.nodes.content.style.height=b.height+"px"}this.updateIfmSize()},setPosition:function(a){var b=this.getProperty();Core.System.parseParam(b,a);this.entity.style.left=b.x+"px";this.entity.style.top=b.y+"px";if($IE6&&b.isFixed){this.entity.style.left=b.x+document.documentElement.scrollLeft+"px";this.entity.style.top=b.y+document.documentElement.scrollTop+"px"}if(this.ifm){this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top}},getWidth:function(){var a=this.entity.style.display;var b=this.entity.style.visibility;this.entity.style.visibility="hidden";this.entity.style.display="";w=this.entity.offsetWidth;this.entity.style.display=a;this.entity.style.visibility=b;return w},getHeight:function(){var a=this.entity.style.display;var b=this.entity.style.visibility;this.entity.style.visibility="hidden";this.entity.style.display="";h=this.entity.offsetHeight;this.entity.style.display=a;this.entity.style.visibility=b;return h},getX:function(){return parseInt(this.entity.style.left)},getY:function(){return parseInt(this.entity.style.top)},updateIfmSize:function(){if(this.ifm){var a=this;a.ifm.style.width=a.entity.offsetWidth+"px";a.ifm.style.height=a.entity.offsetHeight+"px"}},setFixed:function(b){var a=this.getProperty();a.isFixed=b;var c=this;if($IE6){c.entity.style.position="absolute";if(a.isFixed){c._ie6Fixed();Core.Events.addEvent(window,c._ie6Fixed,"scroll")}else{Core.Events.removeEvent(window,c._ie6Fixed,"scroll")}return}if(a.isFixed&&$FF2){c.updateFixed();return}this.entity.style.position=a.isFixed?"fixed":"absolute"},updateFixed:function(){var c=this.getProperty();if(c.isFixed&&$FF2){var d=this;var b=c.x,a=c.y;d.entity.style.position="absolute";d.setPosition({x:c.x+document.documentElement.scrollLeft,y:c.y+document.documentElement.scrollTop});d.entity.style.position="fixed";d.setPosition({x:b,y:a})}},show:function(){this.entity.style.display="";if(this.ifm){this.ifm.style.display="";this.updateIfmSize()}},hidden:function(){this.entity.style.display="none";if(this.ifm){this.ifm.style.display="none"}},addIframe:function(){this.ifm=$C("iframe");this.ifm.style.position="absolute";this.ifm.style.zIndex="1024";this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top;document.body.appendChild(this.ifm);Core.Dom.setStyle(this.ifm,"opacity",0)},getNodes:function(j){var g=this.getProperty();var b=j||"o";var d;var c={};var a=g.templateString;if(a){for(d=0;d<a.length;d++){var f=a[d];switch(b){case"o":c[f]=$E(g.uniqueID+"_"+f);break;case"i":c[f]=g.uniqueID+"_"+f;break}}}return"entity" in c?c:g.nodes},getUniqueID:function(){return parseInt(Math.random()*10000).toString()+(new Date).getTime().toString()},setContent:function(a){var b=this.getProperty();if(a){b.nodes.content.innerHTML=a}}};Core.Dom.getStyle=function(a,c){switch(c){case"opacity":var f=100;try{f=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(d){try{f=a.filters("alpha").opacity}catch(d){}}return f/100;case"float":c="styleFloat";default:var b=a.currentStyle?a.currentStyle[c]:null;return(a.style[c]||b)}};if(!$IE||$IE>8){Core.Dom.getStyle=function(a,c){if(c=="float"){c="cssFloat"}try{var b=document.defaultView.getComputedStyle(a,"")}catch(d){traceError(d)}return a.style[c]||b?b[c]:null}}(function(){var n={simple:function(s,p,q,r){return q*s/r+p},backEaseIn:function(q,p,v,u){var r=1.70158;return v*(q/=u)*q*((r+1)*q-r)+p},backEaseOut:function(u,q,z,y,r,x){var v=1.70158;return z*((u=u/y-1)*u*((v+1)*u+v)+1)+q},backEaseInOut:function(u,q,z,y,r,x){var v=1.70158;if((u/=y/2)<1){return z/2*(u*u*(((v*=(1.525))+1)*u-v))+q}return z/2*((u-=2)*u*(((v*=(1.525))+1)*u+v)+2)+q},bounceEaseOut:function(q,p,s,r){if((q/=r)<(1/2.75)){return s*(7.5625*q*q)+p}else{if(q<(2/2.75)){return s*(7.5625*(q-=(1.5/2.75))*q+0.75)+p}else{if(q<(2.5/2.75)){return s*(7.5625*(q-=(2.25/2.75))*q+0.9375)+p}else{return s*(7.5625*(q-=(2.625/2.75))*q+0.984375)+p}}}},bounceEaseIn:function(q,p,s,r){return s-n.bounceEaseOut(r-q,0,s,r)+p},bounceEaseInOut:function(q,p,s,r){if(q<r/2){return n.bounceEaseIn(q*2,0,s,r)*0.5+p}else{return n.bounceEaseOut(q*2-r,0,s,r)*0.5+s*0.5+p}},strongEaseInOut:function(q,p,s,r){return s*(q/=r)*q*q*q*q+p},regularEaseIn:function(q,p,s,r){return s*(q/=r)*q+p},regularEaseOut:function(q,p,s,r){return -s*(q/=r)*(q-2)+p},regularEaseInOut:function(q,p,s,r){if((q/=r/2)<1){return s/2*q*q+p}return -s/2*((--q)*(q-2)-1)+p},strongEaseIn:function(q,p,s,r){return s*(q/=r)*q*q*q*q+p},strongEaseOut:function(q,p,s,r){return s*((q=q/r-1)*q*q*q*q+1)+p},strongEaseInOut:function(q,p,s,r){if((q/=r/2)<1){return s/2*q*q*q*q*q+p}return s/2*((q-=2)*q*q*q*q+2)+p},elasticEaseIn:function(u,q,z,y,r,x){if(u==0){return q}if((u/=y)==1){return q+z}if(!x){x=y*0.3}if(!r||r<Math.abs(z)){r=z;var v=x/4}else{var v=x/(2*Math.PI)*Math.asin(z/r)}return -(r*Math.pow(2,10*(u-=1))*Math.sin((u*y-v)*(2*Math.PI)/x))+q},elasticEaseOut:function(u,q,z,y,r,x){if(u==0){return q}if((u/=y)==1){return q+z}if(!x){x=y*0.3}if(!r||r<Math.abs(z)){r=z;var v=x/4}else{var v=x/(2*Math.PI)*Math.asin(z/r)}return(r*Math.pow(2,-10*u)*Math.sin((u*y-v)*(2*Math.PI)/x)+z+q)},elasticEaseInOut:function(u,q,z,y,r,x){if(u==0){return q}if((u/=y/2)==2){return q+z}if(!x){var x=y*(0.3*1.5)}if(!r||r<Math.abs(z)){var r=z;var v=x/4}else{var v=x/(2*Math.PI)*Math.asin(z/r)}if(u<1){return -0.5*(r*Math.pow(2,10*(u-=1))*Math.sin((u*y-v)*(2*Math.PI)/x))+q}return r*Math.pow(2,-10*(u-=1))*Math.sin((u*y-v)*(2*Math.PI)/x)*0.5+z+q}};var i=function(p){return p.uniqueID};if(!$IE){i=function(q){try{var p;if(q.getAttribute("uniqueID")==null){p="moz__id"+parseInt(Math.random()*100)+"_"+new Date().getTime();q.setAttribute("uniqueID",p);return p}return q.getAttribute("uniqueID")}finally{p=null}}}function l(q){try{var p=q.constructor.toString().toLowerCase();return p.slice(p.indexOf("function")+9,p.indexOf("()"))}finally{p=null}}function j(t,s){var r,q,p=[];q=s.length;for(r=0;r<q;r++){p[p.length]=parseFloat(Core.Dom.getStyle(t,s[r]))}return p}function m(p){return l(p)!="array"?[p]:p}function c(p,v){try{var s=l(p);var x=[],u=[],t,r,q;if(s!="array"){q=g(p);q[1]=v=="opacity"?"":q[1];x=[q[0]];u=[q[1]]}else{r=p.length;for(t=0;t<r;t++){q=g(p[t]);q[1]=v[t]=="opacity"?"":q[1];x[x.length]=q[0];u[u.length]=q[1]}}return[x,u]}finally{s=x=u=t=r=q=null}}function g(q){try{var p=/(-?\d.?\d*)([a-z%]*)/i.exec(q);return[p[1],p[2]?p[2]:"px"]}finally{p=null}}var a={};var f={};function b(r){try{var q=i(r);var p;if(a[q]!=true){p=new d();f[q]={node:r,func:p};a[q]=true;return p}else{return f[q].func}}finally{q=p=null}}function d(){this._timer=null}d.prototype.start=function(x,v,s,u,t,y){this.reset();y=y||{};if(y.before){this._func.before=y.before}if(y.end){this._func.end=y.end}if(y.tween){this._func.tween=y.tween}var q=m(v);var p=j(x,q);var r=c(s,q);this._node=x;this._property=q;this._endingvalue=r[0];this._suffixvalue=r[1];this._startvalue=p;this._end=false;this._fps=0;if(u!=null){this._seconds=u}if(n[t]!=null){this._animation=n[t]}this._starttime=new Date().getTime();this._func.before();this._timer=setInterval(Core.Function.bind3(this.play,this),10)};d.prototype.play=function(){var s=(new Date().getTime()-this._starttime)/1000;var r,q,p=this._property.length;if(s>this._seconds){s=this._seconds}for(r=0;r<p;r++){q=this._animation(s,this._startvalue[r],this._endingvalue[r]-this._startvalue[r],this._seconds);Core.Dom.setStyle(this._node,this._property[r],q+this._suffixvalue[r])}this._fps++;this._func.tween();if(s==this._seconds){this.stop()}};d.prototype.stop=function(){clearInterval(this._timer);this._end=true;this._func.end()};d.prototype.reset=function(){clearInterval(this._timer);this._end=false;this._node=null;this._property=[];this._startvalue=[];this._endingvalue=[];this._suffixvalue=[];this._fps=0;this._seconds=0.5;this._animation=n.simple;this._func={end:function(){},tween:function(){},before:function(){}}};function o(u,v,q,t,r,s){var p=b(u);p.start.apply(p,arguments)}o.stop=function(p){b(p).stop()};o.isTween=function(p){return !b(p)._end};Ui.tween=o})();var DialogDisplaySet={alpha1:{show:function(g,i,d){var c=0,b=0,a=parseInt(g.style.top)-i;g.style.top=a;Core.Dom.setStyle(g,"opacity",c);g.style.display="";var f=window.setInterval(function(){if(c<=1){Core.Dom.setStyle(g,"opacity",c)}if(b<=a+i){g.style.top=a+b+"px"}b+=1.5;c+=0.05;if(c>0.9&&parseInt(g.style.top)>=a+i){window.clearInterval(f);if(d){d()}}},10)},hidden:function(i,j,f){var c=1;var a=parseInt(i.style.top);var d=a-j;var b=a;var g=window.setInterval(function(){if(c>=0){Core.Dom.setStyle(i,"opacity",c)}if(b>=d){i.style.top=b+"px"}b-=1.5;c-=0.05;if(c<=0&&b<d){window.clearInterval(g);if(f){f()}}},10)}},alpha:{show:function(c,d,b){Core.Dom.setStyle(c,"opacity",0.3);c.style.display="";c.style.top=parseInt(c.style.top)-d+"px";var a=parseInt(c.style.top)+d;Ui.tween(c,["top","opacity"],[a,0.9],0.4,"simple",{end:b})},hidden:function(c,d,b){var a=parseInt(c.style.top)-d;Ui.tween(c,["top","opacity"],[a,0],0.2,"simple",{end:b})}},fallDown:{show:function(d,b,a,c){d.style.display="";d.style.top=b+"px";Ui.tween(d,"top",a,0.6,"bounceEaseOut",{end:c})},hidden:function(d,b,a,c){d.style.display="";d.style.top=b+"px";Ui.tween(d,"top",a,0.6,"strongEaseIn",{end:c})}}};Core.Events.fixEvent=function(a){if(typeof a=="undefined"){a=window.event}if(!a.target){a.target=a.srcElement;a.pageX=a.x;a.pageY=a.y}if(typeof a.layerX=="undefined"){a.layerX=a.offsetX}if(typeof a.layerY=="undefined"){a.layerY=a.offsetY}return a};var Drag3=function(b,c,f){var d=this;this.beDragObj=b;this.movedObjs=c||this.beDragObj;this.dragMode=f||"normal";this.canDrag=true;this.isLock=false;this.lockArea={left:0,right:0,top:0,bottom:0};this.dragSet={normal:function(){d.normalDrag()},border:function(){d.borderDrag()},opacity:function(){d.opacityDrag()}};this.dragObjsFunc=function(){d.onDrag();d.dragObjs()};(function a(){d.beDragObj.style.MozUserSelect="none";Core.Events.addEvent(d.beDragObj,function(){return false},"selectstart");Core.Events.addEvent(d.beDragObj,function(){return false},"drag");for(var g=0;g<d.movedObjs.length;g++){if(d.movedObjs[g]!=d.beDragObj){d.movedObjs[g].style.position="absolute";if(!d.movedObjs[g].style.left){d.movedObjs[g].style.left=d.movedObjs[g].offsetLeft+"px"}if(!d.movedObjs[g].style.top){d.movedObjs[g].style.top=d.movedObjs[g].offsetTop+"px"}}}Core.Events.addEvent(d.beDragObj,d.dragSet[d.dragMode],"mousedown");if($IE){Core.Events.addEvent(d.beDragObj,function(){Core.Events.removeEvent(d.beDragObj,d.dragObjsFunc,"mousemove");d.beDragObj.releaseCapture();d.onDragEnd()},"mouseup")}else{Core.Events.addEvent(document,function(){Core.Events.removeEvent(document,d.dragObjsFunc,"mousemove");d.onDragEnd()},"mouseup")}})()};Drag3.prototype={capture:function(){this.canDrag=true},release:function(){this.canDrag=false},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},dragObjs:function(){e=Core.Events.getEvent();for(var a=0;a<this.movedObjs.length;a++){if(this.isLock){if(e.clientX-this.movedObjs[a].deltaX<this.lockArea.left){this.movedObjs[a].style.left=this.lockArea.left+"px"}else{if(e.clientX-this.movedObjs[a].deltaX>this.lockArea.right-this.movedObjs[a].offsetWidth){this.movedObjs[a].style.left=this.lockArea.right-this.movedObjs[a].offsetWidth+"px"}else{this.movedObjs[a].style.left=e.clientX-this.movedObjs[a].deltaX+"px"}}if(e.clientY-this.movedObjs[a].deltaY<this.lockArea.top){this.movedObjs[a].style.top=this.lockArea.top+"px"}else{if(e.clientY-this.movedObjs[a].deltaY>this.lockArea.bottom-this.movedObjs[a].offsetHeight){this.movedObjs[a].style.top=this.lockArea.bottom-this.movedObjs[a].offsetHeight+"px"}else{this.movedObjs[a].style.top=e.clientY-this.movedObjs[a].deltaY+"px"}}}else{this.movedObjs[a].style.left=e.clientX-this.movedObjs[a].deltaX+"px";this.movedObjs[a].style.top=e.clientY-this.movedObjs[a].deltaY+"px"}}},normalDrag:function(){var b=this;e=Core.Events.getEvent();for(var a=0;a<b.movedObjs.length;a++){b.movedObjs[a].deltaX=e.clientX-parseInt(b.movedObjs[a].style.left);b.movedObjs[a].deltaY=e.clientY-parseInt(b.movedObjs[a].style.top)}if(b.canDrag){if($IE){b.beDragObj.setCapture();Core.Events.addEvent(b.beDragObj,b.dragObjsFunc,"mousemove")}else{Core.Events.addEvent(document,b.dragObjsFunc,"mousemove")}}b.onDragStart()},borderDrag:function(b,a){},opacityDrag:function(b,a){}};Ui.Drag3=Drag3;var Dialog=function(b){var d=this;d.entity=null;d.ifm=null;var c={id:"",x:0,y:0,width:0,height:0,isFixed:false,layer:new Layer(b),template:b,canDrag:false,dragEntity:null,name:"",uniqueID:"",isShow:false,nodes:{},focusNode:null,displayMode:"normal",_modeDisplayRuning:false,enabled:true};this.getProperty=function(){return c};(function a(){var g=d.getProperty();var f;g.uniqueID=g.layer.getProperty().uniqueID;g.id=g.uniqueID+"_dialog";g.nodes=d.getNodes();d.entity=g.layer.entity;d.ifm=g.layer.ifm;g.width=parseInt(d.entity.style.width);if(g.nodes.titleBar){g.dragEntity=new Ui.Drag3(g.nodes.titleBar,d.ifm?[d.ifm,d.entity]:[d.entity]);g.nodes.titleBar.style.cursor="move";Core.Events.addEvent(g.nodes.titleBar,function(){return false},"selectstart");g.dragEntity.onDrag=function(){d.onDrag()}}Core.Events.addEvent(window,function(){if(g.isShow&&g.isFixed){var l=Core.System.winSize();var j=l.width/2-d.getWidth()/2;var i=l.height/2-d.getHeight()/2;j=j<0?0:j;i=i<0?0:i;d.setPosition({x:j,y:i})}},"resize")})()};Dialog.prototype={setPosition:function(a){var b=this.getProperty();Core.System.parseParam(b,a);this.getProperty().layer.setPosition(a)},setSize:function(a){var b=this.getProperty();Core.System.parseParam(b,a);b.layer.setSize(a)},setFixed:function(b){var a=this.getProperty();a.isFixed=b;this.getProperty().layer.setFixed(a.isFixed)},setContent:function(a){var b=this.getProperty();this.getProperty().layer.setContent(a)},setTemplate:function(a){var b=this.getProperty();b.template=a;b.layer.setTemplate(b.template)},setDrag:function(a){var b=this.getProperty();b.canDrag=a;if(b.canDrag){b.dragEntity.capture()}else{b.dragEntity.release()}},getWidth:function(){return this.getProperty().layer.getWidth()},getHeight:function(){return this.getProperty().layer.getHeight()},getX:function(){return this.getProperty().layer.getX()},getY:function(){return this.getProperty().layer.getY()},show:function(b){var a=this.getProperty();var c=this;a.isShow=true;if(this.ifm){this.ifm.style.display=""}this.onShow();if(a.displayMode=="normal"||b=="normal"){this.entity.style.display=""}else{a._modeDisplayRuning=true;a.enabled=false;this._showWithMode(function(){a._modeDisplayRuning=false;a.enabled=true;if(c.onDisplaied){c.onDisplaied()}})}},close:function(b){var c=this;var a=this.getProperty();if(a.displayMode=="normal"||b=="normal"){a.isShow=false;a.layer.hidden();this.destroy();this.onClose();if(c.onDisplayFinished){c.onDisplayFinished()}}else{if(!a._modeDisplayRuning){a._modeDisplayRuning=true;a.enabled=false;this._hiddenWithMode(function(){a.isShow=false;a.layer.hidden();a._modeDisplayRuning=false;a.enabled=true;c.destroy();c.onClose();if(c.onDisplayFinished){c.onDisplayFinished()}})}}},hidden:function(b){var c=this;var a=this.getProperty();if(a.displayMode=="normal"||b=="normal"){a.isShow=false;a.layer.hidden();this.onHidden();if(c.onDisplayFinished){c.onDisplayFinished()}}else{if(!a._modeDisplayRuning){a._modeDisplayRuning=true;a.enabled=false;this._hiddenWithMode(function(){a.isShow=false;a.layer.hidden();c.onHidden();a._modeDisplayRuning=false;a.enabled=true;if(c.onDisplayFinished){c.onDisplayFinished()}})}}},_showWithMode:function(a){var c=this.getProperty();var b=Core.System.winSize();var d=this;switch(c.displayMode){case"alpha":DialogDisplaySet.alpha.show(this.entity,20,a);break}},_hiddenWithMode:function(a){var c=this.getProperty();var d=this;var b=Core.System.winSize();switch(c.displayMode){case"alpha":DialogDisplaySet.alpha.hidden(this.entity,20,a);break}},destroy:function(){try{if(this.getProperty().nodes.iframe){this.getProperty().nodes.iframe.src=""}}catch(a){}this.entity&&this.entity.parentNode.removeChild(this.entity);this.entity=null;if(this.ifm){this.ifm.parentNode.removeChild(this.ifm);this.ifm=null}},onShow:function(){},onClose:function(){},onHidden:function(){},onDrag:function(){},onDisplaied:function(){},onDisplayFinished:function(){},setAreaLocked:function(a){var b=this.getProperty();b.dragEntity.isLock=a;var c=this;if(a){c._updateLockArea();Core.Events.addEvent(window,function(){c._updateLockArea()},"resize")}},_updateLockArea:function(){var b=this.getProperty();var a=Core.System.winSize();if(b.isFixed){if($IE6){b.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+a.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+a.height};Core.Events.addEvent(window,function(){b.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+a.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+a.height}},"scroll");Core.Events.addEvent(window,function(){b.dragEntity.lockArea={left:document.documentElement.scrollLeft,right:document.documentElement.scrollLeft+a.width,top:document.documentElement.scrollTop,bottom:document.documentElement.scrollTop+a.height}},"resize")}else{b.dragEntity.lockArea={left:0,right:a.width,top:0,bottom:a.height}}}else{b.dragEntity.lockArea={left:0,right:document.documentElement.scrollWidth,top:0,bottom:document.documentElement.scrollHeight}}},updateFixed:function(){this.getProperty().layer.updateFixed()},getNodes:function(a){return this.getProperty().layer.getNodes(a)},setFocus:function(){var b=this.getProperty();if(b.focusNode&&b.focusNode.style.display!="none"){try{b.focusNode.focus()}catch(a){}}else{if(this.entity.style.display!="none"){this.entity.focus()}}},getUniqueID:function(){return this.getProperty().layer.getUniqueID()}};var DialogManager={dialogs:[],activeDialog:{},backShadow:null,create:function(b,a){var d=this;var c=new Dialog(b);this.dialogs.push(c);this.activeDialog=c;c.name=a||c.getUniqueID();c.entity.style.zIndex=1024;c.onDrag=function(){if($IE6){if(this.getProperty().isFixed){this.setPosition({x:(parseInt(this.entity.style.left)-document.documentElement.scrollLeft),y:(parseInt(this.entity.style.top)-document.documentElement.scrollTop)})}}else{if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})}}};c.onClose=function(){d.removeDialog(this.name);d.updateActiveDialog();d.updateShadow();if(d.activeDialog){d.activeDialog.setFocus()}};c.onHidden=function(){this.isHidden=true;if(this==d.activeDialog){d.activeDialog=null}d.updateActiveDialog();d.updateShadow();if(d.activeDialog){d.activeDialog.setFocus()}};c.onShow=function(){if(this.isHidden){this.isHidden=false;var g,f=d.dialogs.length;for(g=0;g<f;g++){if(d.dialogs[g]==this){document.body.appendChild(d.dialogs[g].entity);d.dialogs.push(d.dialogs[g]);d.dialogs.splice(g,1)}}d.activeDialog=this;d.backShadow.show();d.updateShadow()}};if(this.backShadow.isShow){this.updateShadow()}else{this.backShadow.show()}c.hidden();return c},getDialog:function(b){var c=0,a=this.dialogs.length;for(c=0;c<a;c++){if(this.dialogs[c].name==b){return this.dialogs[c]}}},removeDialog:function(b){var c=0,a=this.dialogs.length;for(c=a-1;c>=0;c--){if(this.dialogs[c].name==b){this.dialogs.splice(c,1);this.activeDialog=this.dialogs[this.dialogs.length-1];break}}},updateActiveDialog:function(){var b,a=this.dialogs.length;for(b=a-1;b>=0;b--){if(!this.dialogs[b].isHidden){this.activeDialog=this.dialogs[b];break}}},updateShadow:function(){if(this.activeDialog&&!this.activeDialog.isHidden){this.backShadow.insertBefore(this.activeDialog.entity);this.activeDialog.updateFixed()}else{this.backShadow.hidden()}},close:function(b){if(!b){if(this.activeDialog){this.activeDialog.close()}return}var c,a=this.dialogs.length;for(c=a-1;c>=0;c--){if(this.dialogs[c].name==b){this.dialogs[c].close();break}}}};var BackShadow=function(b){this.entity=null;this.isShow=false;this._ie6Fixed=function(){if(c.entity){c.entity.style.top=document.documentElement.scrollTop+"px";c.entity.style.left=document.documentElement.scrollLeft+"px";if(c.ifm){c.ifm.style.top=c.entity.style.top;c.ifm.style.left=c.entity.style.left}c.updateSize()}};var c=this;(function a(){c.entity=$C("div");c.entity.style.position="absolute";c.entity.style.width=c.getAreaWidth()+"px";c.entity.style.height=c.getAreaHeight()+"px";c.entity.style.left="0px";c.entity.style.top="0px";c.entity.style.zIndex=1024;c.entity.style.backgroundColor="black";document.body.appendChild(c.entity);c._setOpacity(c.entity,isNaN(b)?0.5:b);if($IE6){c.entity.style.top=document.documentElement.scrollTop+"px";c.addIframe()}Core.Events.addEvent(window,function(){if(c.entity){if($IE6&&c.isShow){document.documentElement.scrollLeft=0;c._ie6Fixed()}setTimeout(function(){c.updateSize()},1)}},"resize");c.setFixed(true);c.hidden()})()};BackShadow.prototype={show:function(){this.entity.style.display="";if(this.ifm){this.ifm.style.display=""}this.isShow=true;this.onShow()},hidden:function(){this.entity.style.display="none";if(this.ifm){this.ifm.style.display="none"}this.isShow=false;this.onHidden()},close:function(){this.hidden();this.destroy()},destroy:function(){Core.Events.removeEvent(window,this._ie6Fixed,"scroll");this.entity.parentNode.removeChild(this.entity);this.entity=null;if(this.ifm){this.ifm.parentNode.removeChild(this.ifm);this.ifm=null}},addIframe:function(){this.ifm=$C("iframe");this._setOpacity(this.ifm,0);this.ifm.style.position="absolute";this.ifm.style.zIndex=this.entity.style.zIndex;this.ifm.style.left=this.entity.style.left;this.ifm.style.top=this.entity.style.top;this.ifm.style.width=this.entity.style.width;this.ifm.style.height=this.entity.style.height;document.body.insertBefore(this.ifm,this.entity)},insertBefore:function(a){document.body.insertBefore(this.entity,a);if(this.ifm){document.body.insertBefore(this.ifm,this.entity)}},updateSize:function(){this.entity.style.width=this.getAreaWidth()+"px";this.entity.style.height=this.getAreaHeight()+"px";if(this.ifm){this.ifm.style.width=this.getAreaWidth()+"px";this.ifm.style.height=this.getAreaHeight()+"px"}},getAreaHeight:function(){return document.documentElement.clientHeight},getAreaWidth:function(){return document.documentElement.clientWidth},setFixed:function(a){if($IE6){var b=this;if(a){b._ie6Fixed();Core.Events.addEvent(window,b._ie6Fixed,"scroll")}else{Core.Events.removeEvent(window,b._ie6Fixed,"scroll")}}else{this.entity.style.position=a?"fixed":"absolute"}},_setOpacity:function(b,a){if($IE&&$IE<=9){b.style.filter="alpha(opacity="+a*100+")"}else{b.style.opacity=a}},onShow:function(){},onHidden:function(){}};function CustomsDialog(c,b){this.nodesPattern=/[^\{\}]+(?=\})/g;this._dialog=DialogManager.create(c,b);this.entity=this._dialog.entity;this.templateString="";this.nodes={};var d=this;(function a(){d._dialog.onDrag=function(){if($IE6){if(this.getProperty().isFixed){this.setPosition({x:(parseInt(this.entity.style.left)-document.documentElement.scrollLeft),y:(parseInt(this.entity.style.top)-document.documentElement.scrollTop)})}}else{if(this.getProperty().isFixed){this.setPosition({x:parseInt(this.entity.style.left),y:parseInt(this.entity.style.top)})}}d.onDrag()};d.updateNodes();if(d.nodes.btnClose){Core.Events.addEvent(d.nodes.btnClose,function(){var f=Core.Events.getEvent();if(f){f.cancelBubble=true}},"mousedown")}})();this._hiddenDialog=function(){d.hidden()};this._closeDialog=function(){d.close()}}CustomsDialog.prototype={isSetMiddle:false,setContent:function(a){var c=a;this.templateString=c.match(this.nodesPattern);var b=new Ui.Template(c);this.nodes.content.innerHTML=b.evaluate(this.getContentNodes("i"));this.updateNodes()},setTitle:function(a){if(this.nodes.titleName){this.nodes.titleName.innerHTML=a}},setHelp:function(a){if(this.nodes.btnHelp){if(a){this.nodes.btnHelp.href=a}else{this.nodes.btnHelp.innerHTML=""}}},setClose:function(a){var b=this;if(b.nodes.btnClose){a=a||"hidden";switch(a){case"hidden":Core.Events.addEvent(b.nodes.btnClose,b._hiddenDialog,"click");break;case"close":Core.Events.addEvent(b.nodes.btnClose,b._closeDialog,"click");break}}},setPosition:function(a,b){this._dialog.setPosition({x:a,y:b})},setMiddle:function(){var d=Core.System.winSize();var g,f;var l=this._dialog.entity.style.display;this._dialog.setPosition({x:-10000});this._dialog.entity.style.display="";var a=this.nodes.titleBar?this.nodes.titleBar.offsetHeight:0;var i=d.height-this.nodes.content.offsetHeight-a;var b=(Math.sqrt(5)-1)/2;var c=1;var j=i*b/(b+c);g=d.width/2-this.nodes.content.offsetWidth/2;g=g<0?0:g;f=j<0?0:j;if(!this._dialog.getProperty().isFixed){g=g+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);f=f+Math.max(document.documentElement.scrollTop,document.body.scrollTop)}this._dialog.entity.style.display=l;this._dialog.setPosition({x:g,y:f});this.isSetMiddle=true},setSize:function(b,a){this._dialog.setSize({width:b,height:a})},setFixed:function(a){this._dialog.setFixed(a)},setAreaLocked:function(a){this._dialog.setAreaLocked(a)},setFocusNode:function(a){this._dialog.getProperty().focusNode=a},setDisplayMode:function(a){this._dialog.getProperty().displayMode=a||"normal"},getWidth:function(){return this._dialog.getProperty().width},getHeight:function(){return this._dialog.getProperty().height},getX:function(){return this._dialog.getProperty().x},getY:function(){return this._dialog.getProperty().y},show:function(){if(this.isSetMiddle){this.setMiddle()}this._dialog.show();this.onShow()},hidden:function(){this._dialog.hidden();this.onHidden()},close:function(){var a=this;a._dialog.close();a.onClose();if(a.nodes.btnClose){Core.Events.removeEvent(a.nodes.btnClose,a._hiddenDialog,"click");Core.Events.removeEvent(a.nodes.btnClose,a._CloseDialog,"click")}},updateNodes:function(){this.nodes=this._dialog.getNodes();var a=this.getContentNodes();for(k in a){this.nodes[k]=a[k]}},getContentNodes:function(g){var b=g||"o";var d;var c={};var a=this.templateString;if(a){for(d=0;d<a.length;d++){var f=a[d];switch(b){case"o":c[f]=$E(this.nodes.content.id+"_"+f);break;case"i":c[f]=this.nodes.content.id+"_"+f;break}}}return c},setOnDisplaied:function(a){this._dialog.onDisplaied=a},setOnDisplayFinished:function(a){this._dialog.onDisplayFinished=a},onDrag:function(){},onShow:function(){},onHidden:function(){},onClose:function(){}};var LayerTemplate={alert:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><!-- 内容区域 --><div class="gDialogDoc"><div class="diaBd"><div class="gDiaC1"><img id="#{icon}" width="50" height="50" class="" src="http://simg.sinajs.cn/tiezi/images/icon/icon.gif" alt=""/></div><div class="gDiaC2"><h5 id="#{text}"></h5><div id="#{subText}"></div><p/></div></div><div class="btnRow"><a class="gBtnb gBtnbClr" id="#{linkOk}" href="javascript:;"><cite id="#{btnOk}"><em id="#{ok}"></em></cite></a></div></div><!-- 内容区域 --></div></td><td class="tbgright"><div></div></td></tr></tbody></table>',confirm:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><!-- 内容开始 --><div class="gDialogDoc"><div class="diaBd"><div class="gDiaC1"><img id="#{icon}" width="50" height="50" class="" src="http://simg.sinajs.cn/tiezi/images/icon/icon.gif" alt=""/></div><div class="gDiaC2"><h5 id="#{text}"></h5><div id="#{subText}"></div><p/></div></div><div class="btnRow"><a class="gBtnb gBtnbClr" id="#{linkOk}" href="javascript:;"><cite id="#{btnOk}"><em id="#{ok}"></em></cite></a><a class="gBtnb gBtnbClr" id="#{linkCancel}" href="javascript:;"><cite id="#{btnCancel}"><em id="#{cancel}"></em></cite></a></div></div><!-- 内容结束 --></div></td><td class="tbgright"><div></div></td></tr></tbody></table>',iframe:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><div id="#{loadState}">Loading...</div><iframe style="width:100%;height:500px;" id="#{iframe}" src="#{iframeURL}"></iframe></div></td><td class="tbgright"><div></div></td></tr></tbody></table>',customs:'<table id="#{entity}"  class="gModLy"><thead id="#{titleBar}"><tr><td class="tbgleft"><div></div></td><td class="tdmain"><div class="gModLyHeader"><div class="gFl"><div class="gML_tit"><strong id="#{titleName}"></strong></div></div><div class="gFr"><ul><li><a href="javascript:;" id="#{btnClose}" class="iconClose"></a></li><li><a href="#" class="help" >帮助</a></li></ul></div></div></td><td class="tbgright"><div></div></td></tr></thead><tfoot><tr><td class="tbgleft"><div></div></td><td class="tdmain"></td><td class="tbgright"><div></div></td></tr></tfoot><tbody><tr><td class="tbgleft"><div></div></td><td class="tdmain" id="layer_2"><div id="#{content}" class="gModLyCont"><!-- 内容区域 --><!-- 内容区域 --></div></td><td class="tbgright"><div></div></td></tr></tbody></table>'};(function(){var a=function(b,c){this.template=c||{};DialogManager.backShadow=b};a.prototype={iconSet:{"01":{"class":"SG_icon SG_icon201",alt:"警告"},"02":{"class":"SG_icon SG_icon202",alt:"失败"},"03":{"class":"SG_icon SG_icon203",alt:"成功"},"04":{"class":"SG_icon SG_icon204",alt:"询问"},"06":{"class":"SG_icon SG_icon148",alt:"警告"}},alert:function(i,b,d){b=b||{};var f=DialogManager.create(b.template||this.template.alert||LayerTemplate.alert,d);var g=Core.System.winSize();var c=f.getNodes();f.onDisplaied=b.funcDisplaied;f.onDisplayFinished=b.funcDisplayFinished;f.setSize({width:b.width,height:b.height});f.setFixed(true);this._setDialogMiddle(f);f.show();f.setAreaLocked(true);c.linkOk.focus();c.text.innerHTML=i;if(c.titleName){c.titleName.innerHTML=b.title||"提示"}if(c.icon){c.icon.className=b.icon?this.iconSet[b.icon]["class"]:this.iconSet["01"]["class"];c.icon.alt=b.icon?this.iconSet[b.icon]["alt"]:this.iconSet["01"]["alt"]}c.ok.innerHTML=b.textOk||"确定";if(c.subText){c.subText.innerHTML=b.subText||""}f.getProperty().focusNode=c.linkOk;Core.Events.addEvent(c.btnOk,function(){if(b.funcOk&&f.getProperty().enabled){b.funcOk();Core.Events.stopEvent()}f.close();return false},"click");Core.Events.addEvent(c.linkOk,function(){var j=Core.Events.getEvent();if(j.keyCode=="13"){if(b.funcOk&&f.getProperty().enabled){b.funcOk()}f.close()}},"keydown");Core.Events.addEvent(c.btnClose,function(){if(b.funcClose&&f.getProperty().enabled){b.funcClose()}f.close()},"click");Core.Events.addEvent(c.btnClose,function(){var j=Core.Events.getEvent();j.cancelBubble=true},"mousedown")},newAlert:function(d,b,c){b.template=this.template.newAlert;this.alert(d,b,c)},confirm:function(i,b,d){b=b||{};var f=DialogManager.create(b.template||this.template.confirm||LayerTemplate.confirm,d);var g=Core.System.winSize();var c=f.getNodes();f.onDisplaied=b.funcDisplaied;f.onDisplayFinished=b.funcDisplayFinished;f.setSize({width:b.width,height:b.height});f.setFixed(true);this._setDialogMiddle(f);f.show();f.setAreaLocked(true);if(b.defaultButton==0){c.linkCancel.focus();f.getProperty().focusNode=c.linkCancel}else{c.linkOk.focus();f.getProperty().focusNode=c.linkOk}c.text.innerHTML=i;if(c.titleName){c.titleName.innerHTML=b.title||"提示"}if(c.icon){c.icon.className=b.icon?this.iconSet[b.icon]["class"]:this.iconSet["04"]["class"];c.icon.alt=b.icon?this.iconSet[b.icon]["alt"]:this.iconSet["04"]["alt"]}c.ok.innerHTML=b.textOk||"确定";c.cancel.innerHTML=b.textCancel||"取消";if(c.subText){c.subText.innerHTML=b.subText||""}Core.Events.addEvent(c.btnOk,function(){if(b.funcOk&&f.getProperty().enabled){b.funcOk();Core.Events.stopEvent()}f.close();return false},"click");Core.Events.addEvent(c.linkOk,function(){var j=Core.Events.getEvent();if(j.keyCode=="13"){if(b.funcOk&&f.getProperty().enabled){b.funcOk()}f.close()}},"keydown");Core.Events.addEvent(c.btnCancel,function(){if(b.funcCancel&&f.getProperty().enabled){b.funcCancel();Core.Events.stopEvent()}f.close();return false},"click");Core.Events.addEvent(c.linkCancel,function(){var j=Core.Events.getEvent();if(j.keyCode=="13"){if(b.funcCancel&&f.getProperty().enabled){b.funcCancel()}f.close()}},"keydown");Core.Events.addEvent(c.btnClose,function(){if(b.funcClose&&f.getProperty().enabled){b.funcClose();Core.Events.stopEvent()}f.close();return false},"click");Core.Events.addEvent(c.btnClose,function(){var j=Core.Events.getEvent();j.cancelBubble=true},"mousedown")},newConform:function(d,b,c){b.template=this.template.newConfirm;this.confirm(d,b,c)},showIframe:function(b,g){b=b||{};var i=DialogManager.create(this.template.iframe||LayerTemplate.iframe,g);var j=Core.System.winSize();var d=i.getNodes();i.setSize({width:b.width||320,height:b.height||150});var f=j.width/2-i.getProperty().width/2<0?0:j.width/2-i.getProperty().width/2;var c=j.height/2-i.getProperty().height/2<0?0:j.height/2-i.getProperty().height/2;if(b.fixed){i.setPosition({x:f,y:c})}else{i.setPosition({x:f+document.documentElement.scrollLeft,y:c+document.documentElement.scrollTop})}if(!$IE6){i.getProperty().displayMode="alpha"}i.setFixed(!!b.fixed);i.show();i.setAreaLocked(true);d.titleName.innerHTML=b.title||"";d.iframe.src=b.url||"about:blank";Core.Events.addEvent(d.iframe,function(){d.iframe.style.display="";d.loadState.style.display="none"},"load");Core.Events.addEvent(d.btnClose,function(){i.close()},"click");Core.Events.addEvent(d.btnClose,function(){var l=Core.Events.getEvent();l.cancelBubble=true},"mousedown")},createCustomsDialog:function(b,c){b=b||{};var d=new CustomsDialog(b.tpl||this.template.customs||LayerTemplate.customs,c);b.content&&d.setContent(b.content);d.setTitle(b.title||"提示");d.setHelp(b.help||"");d.setClose("hidden");d.setOnDisplaied(b.funcDisplaied);d.setOnDisplayFinished(b.funcDisplayFinished);return d},getDialog:function(b){return DialogManager.getDialog(b)},close:function(b){DialogManager.close(b)},_setDialogMiddle:function(i){var g=Core.System.winSize();var b=i.getNodes();var l,j;var o=i.entity.style.display;i.setPosition({x:-10000});i.entity.style.display="";var c=b.titleBar?b.titleBar.offsetHeight:0;var m=g.height-b.content.offsetHeight-c;var d=(Math.sqrt(5)-1)/2;var f=1;var n=m*d/(d+f);l=g.width/2-b.content.offsetWidth/2;l=l<0?0:l;j=n<0?0:n;if(!i.getProperty().isFixed){l=l+document.documentElement.scrollLeft;j=j+document.documentElement.scrollTop}i.entity.style.display=o;i.setPosition({x:l,y:j})}};Sina.Ui.WindowDialog=a})();Sina.pkg("Utils.Cookie");Utils.Cookie.getCookie=function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var c=new RegExp(a+"=([^;]*)?;","i");var d=document.cookie+";";var b=d.match(c);if(b){return b[1]||""}else{return""}};Utils.Cookie.setCookie=function(b,g,c,l,f,a){var i=[];i.push(b+"="+escape(g));if(c){var j=new Date();var d=j.getTime()+c*3600000;j.setTime(d);i.push("expires="+j.toGMTString())}if(l){i.push("path="+l)}if(f){i.push("domain="+f)}if(a){i.push(a)}document.cookie=i.join(";")};Core.Events.stopDefaultEvent=function(a){var b=a?a:Core.Events.getEvent();if(b!=null){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}}};if(typeof Lib=="undefined"){Lib={}}Lib.pkg=function(c){if(!c||!c.length){return null}var d=c.split(".");var b=Lib;for(var a=(d[0]=="Lib")?1:0;a<d.length;++a){b[d[a]]=b[d[a]]||{};b=b[d[a]]}return b};Core.System.keyValue=function(b,c){var a=b.match(new RegExp("(\\?|&)"+c+"=([^&]*)(&|$)"));if(a!=null){return a[2]}return null};Lib.checkAuthor=function(){var a=unescape(Utils.Cookie.getCookie("SUP"));if(a&&a!=""){$UID=Core.System.keyValue(a,"uid");$nick=decodeURIComponent(Core.System.keyValue(a,"nick"));$isLogin=!!($UID);if(typeof scope.$uid=="undefined"){$isAdmin=false}else{$isAdmin=(scope.$uid==$UID)}}else{a=Utils.Cookie.getCookie("SU");if(a&&a!=""){var b=a.match(/^([^:]*:){2}(\d{5,11})/);$UID=(b&&b[2])||null;window.$isLogin=!!($UID);if(typeof scope.$uid=="undefined"){window.$isAdmin=false}else{window.$isAdmin=(scope.$uid==$UID)}}else{$UID=null;$isLogin=false;$isAdmin=false}}};function v6SendLog(b,a){}function v7sendLog(b,a,c){if(!b){return false}if(b.split("_").length==3){Lib.checkAuthor();if($isLogin){b+="_"+$UID}}if(typeof scope=="undefined"){window.scope={};scope.$pageid=""}a=a||scope.$pageid;c=c||"";Utils.Io.JsLoad.request("http://hits.sinajs.cn/A2/b.html?type="+b+"&pageid="+a+"&msg="+c,{onComplete:function(){}})}Sina.pkg("Core.Class");Core.Class.AsPrototype={};Core.Class.create=function(){return function(a){if(a!=Core.Class.AsPrototype){this.initialize.apply(this,arguments)}}};Core.String.trimHead=function(a){return a.replace(/^(\u3000|\s|\t)*/gi,"")};Core.String.trimTail=function(a){return a.replace(/(\u3000|\s|\t)*$/gi,"")};Core.String.trim=function(a){return Core.String.trimHead(Core.String.trimTail(a))};String.prototype.format=function(){var f=(!arguments[0]||typeof arguments[0]=="undefined")?"":arguments[0].toString();var d=/(.*?)({(\d+)(:([0-9a-z]+))?})/ig;var c=this.match(d);if(c){for(var b=0,a=c.length;b<a;b++){c[b]=c[b].replace(d,function(){return RegExp.$1});c[b]=RegExp.$1;switch(typeof arguments[parseInt(RegExp.$3)]){case"undefined":c[b]+=RegExp.$2;break;case"number":c[b]+=(isNaN(RegExp.$5)||RegExp.$5=="")?arguments[parseInt(RegExp.$3)]:arguments[parseInt(RegExp.$3)].toString(Math.max(Math.min(Math.round(RegExp.$5),36),2));break;default:c[b]+=arguments[parseInt(RegExp.$3)]}}c.push(this.replace(d,""));return c.join("")}return this};Sina.pkg("Core.Math");Core.Math.getUniqueId=function(b,a){return parseInt(Math.random()*10000).toString()+(new Date).getTime().toString()};Lib.pkg("Login");Lib.Login.info=function(){var a;if(window.sinaSSOController&&(a=sinaSSOController.getLoginInfo())){return a}else{return{}}};(function(){function a(c){function b(){}b.prototype=c;return new b()}Function.prototype.$define=function(c){var b;for(b in c){this.prototype[b]=c[b]}if(this.__interface__){for(b in this.prototype){if(this.prototype[b]==="NI"){throw new Error("类定义错误，接口方法["+b+"]未实现")}}}this.prototype.constructor=this;this.$extends=this.$define=this.$implements=function(){throw new Error("$define语句定义后面不能再作其它定义")};return this};Function.prototype.$extends=function(){var f=this,c=arguments.length,b,d;if(c===0){throw new Error("$extends语句错误：未指定父类")}b=arguments[0];d=function(){b.apply(this,arguments);f.apply(this,arguments)};d.prototype=a(b.prototype);d.prototype.constructor=d;d.$super=b.prototype;return d};Function.prototype.$implements=function(){var b=Array.prototype.slice.call(arguments,0),f,d=b.length,c;while(d--){if(typeof b[d]!=="object"){throw new Error("$implements语句错误：参数必须为object类型")}for(c in b[d]){typeof this.prototype[c]==="undefined"&&(this.prototype[c]="NI")}}this.__interface__=true;this.$extends=function(){throw new Error("$extends语句错误:$extends语句不能出现在$implements定义之后")};return this}})();(function(){Core.Function.defineGetter=function(g,f,d){if(f instanceof Array&&d instanceof Array){var c=Math.min(f.length,d.length);while(c--){if(typeof f[c]==="string"&&b(d[c])){g[f[c]]={valueOf:(function(i){return function(){return a(g,d[i])}})(c),toString:this.valueOf}}}}else{if(typeof f==="string"&&b(d)){g[f]={valueOf:function(){return a(g,d)},toString:this.valueOf}}}};function b(c){return typeof c!=="string"&&String.prototype.slice.call(c,0,8)=="function"}function a(f,d){var c=d.call(f);return typeof c==="string"||typeof c==="number"?c:null}})();Ui.IE6FixedController=function(){var a=this;this.node=null;this.iframeNode=null;this.__orgX=0;this.__orgY=0;this.__isBindScroll=false;this.__fixedHandle=function(){if(a.node){a.node.style.left=document.documentElement.scrollLeft+a.__orgX+"px";a.node.style.top=document.documentElement.scrollTop+a.__orgY+"px"}if(a.iframeNode){a.iframeNode.style.left=a.node.style.left;a.iframeNode.style.top=a.node.style.top}}}.$define({setFixed:function(a,b){this.updateOrgPosition();if(b&&!this.__isBindScroll){Core.Events.addEvent(window,this.__fixedHandle,"scroll");this.__isBindScroll=true}if(!b&&this.__isBindScroll){Core.Events.removeEvent(window,this.__fixedHandle,"scroll");this.__isBindScroll=false}},setPosition:function(b,a,c){if(typeof c.x!=="undefined"){if(a){b.style.left=c.x+document.documentElement.scrollLeft+"px";this.__orgX=parseInt(this.node.style.left)-document.documentElement.scrollLeft}else{b.style.left=c.x+"px"}}if(typeof c.y!=="undefined"){if(a){b.style.top=c.y+document.documentElement.scrollTop+"px";this.__orgY=parseInt(this.node.style.top)-document.documentElement.scrollTop}else{b.style.top=c.y+"px"}}typeof c.z!=="undefined"&&(b.style.zIndex=c.z)},getX:function(b,a){if(a){return parseInt(b.style.left)-document.documentElement.scrollLeft}else{return parseInt(b.style.left)}},getY:function(b,a){if(a){return parseInt(b.style.top)-document.documentElement.scrollTop}else{return parseInt(b.style.top)}},updateIframe:function(a){this.setFixed(this.iframeNode,a);a&&this.__fixedHandle()},updateOrgPosition:function(){if(!this.node){return}this.__orgX=parseInt(this.node.style.left)-document.documentElement.scrollLeft;this.__orgY=parseInt(this.node.style.top)-document.documentElement.scrollTop},destroy:function(){Core.Events.removeEvent(window,this.__fixedHandle,"scroll");this.__isBindScroll=false;this.node=null;this.iframeNode=null}});Core.Events.EventDispatcher=function(a){this.__target=a;this.__events={}}.$define({addEventListener:function(b,c){if(!this.__checkFunction(c)){return}var a=this.__events;b=b.toLowerCase();!a[b]&&(a[b]=[]);a[b].push(c)},removeEventListener:function(c,d){var a=this.__events[c];c=c.toLowerCase();if(!this.__checkFunction(d)||!a||!a.length){return}for(var b=a.length-1;b>=0;b--){(a[b]==d)&&a.splice(b,1)}},dispatchEvent:function(f){f=f.toLowerCase();var b=this.__events[f];if(!b||!b.length){return}var c=Array.prototype.slice.call(arguments,0);c.shift();for(var d=0,a=b.length;d<a;d++){b[d].apply(this.__target,c)}},__checkFunction:function(a){return typeof a!=="string"&&String.prototype.slice.call(a,0,8)=="function"}});Ui.IRenderer={setCanShow:function(a){},setCanHidden:function(a){},show:function(a){},hidden:function(a){},addEventListener:function(a,b){},removeEventListener:function(a,b){}};Ui.SimpleRenderer=function(){this.__canShow=true;this.__canHidden=true;this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IRenderer).$define({setCanShow:function(a){this.__canShow=!!a},setCanHidden:function(a){this.__canHidden=!!a},show:function(a){this.__eventDispatcher.dispatchEvent("beforeShow");if(this.__canShow){a.style.display="";this.__eventDispatcher.dispatchEvent("show")}return this},hidden:function(a){this.__eventDispatcher.dispatchEvent("beforeHidden");if(this.__canHidden){a.style.display="none";this.__eventDispatcher.dispatchEvent("hidden")}return this},addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this}});Ui.DisplayObject=function(b,c){Core.Function.defineGetter(this,["x","y","z","width","height"],[this.__getX,this.__getY,this.__getZ,this.__getWidth,this.__getHeight]);this.__renderer=null;this.__entity=c;this.__isInited=false;this.__parent=b||document.body;this.__eventDispatcher=new Core.Events.EventDispatcher(this);var a=this.__eventDispatcher;this.__onBeforeShow=function(){a.dispatchEvent("beforeShow")};this.__onShow=function(){a.dispatchEvent("show")};this.__onBeforeHidden=function(){a.dispatchEvent("beforeHidden")};this.__onHidden=function(){a.dispatchEvent("hidden")};this.__updateRenderer(Ui.SimpleRenderer)}.$define({isShow:!1,isHidden:!0,setPosition:function(a){!this.__isInited&&this.__initEntity();typeof a.x!=="undefined"&&(this.__entity.style.left=a.x+"px");typeof a.y!=="undefined"&&(this.__entity.style.top=a.y+"px");typeof a.z!=="undefined"&&(this.__entity.style.zIndex=a.z);return this},setSize:function(a){!this.__isInited&&this.__initEntity();typeof a.width!=="undefined"&&(this.__entity.style.width=a.width+"px");typeof a.height!=="undefined"&&(this.__entity.style.height=a.height+"px");return this},setRenderer:function(a){!this.__isInited&&this.__initEntity();this.__updateRenderer(a);return this},show:function(a){this.isHidden=!1;this.isShow=!0;!this.__isInited&&this.__initEntity();this.__updateRenderer(a);this.__renderer.show(this.__entity);return this},hidden:function(a){return this.hide(a)},hide:function(a){this.isHidden=!0;this.isShow=!1;!this.__isInited&&this.__initEntity();this.__updateRenderer(a);this.__renderer.hidden(this.__entity);return this},setCanShow:function(a){this.__renderer.setCanShow(a);return this},setCanHidden:function(a){this.__renderer.setCanHidden(a);return this},addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},destroy:function(){if(!this.__entity){return}!this.__isInited&&this.__initEntity();this.__entity.parentNode&&this.__entity.parentNode.removeChild(this.__entity);this.__entity=null},__initEntity:function(){var a;!this.__entity&&(this.__entity=$C("div"));a=this.__entity.style;a.position="absolute";a.left=0;a.top=0;!this.__entity.parentNode&&this.__parent.appendChild(this.__entity);this.__isInited=true},__updateRenderer:function(a){if(!a){return}var b=function(){this.__renderer.addEventListener("beforeShow",this.__onBeforeShow).addEventListener("show",this.__onShow).addEventListener("beforeHidden",this.__onBeforeHidden).addEventListener("hidden",this.__onHidden)};if(!this.__renderer){this.__renderer=new a();b.call(this)}else{if(this.__renderer.constructor!==a){this.__renderer.removeEventListener("beforeShow",this.__onBeforeShow).removeEventListener("show",this.__onShow).removeEventListener("beforeHidden",this.__onBeforeHidden).removeEventListener("hidden",this.__onHidden);this.__renderer=new a();b.call(this)}}},__getX:function(){!this.__isInited&&this.__initEntity();return parseInt(this.__entity.style.left)},__getY:function(){!this.__isInited&&this.__initEntity();return parseInt(this.__entity.style.top)},__getZ:function(){!this.__isInited&&this.__initEntity();return parseInt(this.__entity.style.zIndex)},__getWidth:function(){!this.__isInited&&this.__initEntity();return this.__getSize(this.__entity,"offsetWidth")},__getHeight:function(){!this.__isInited&&this.__initEntity();return this.__getSize(this.__entity,"offsetHeight")},__getSize:function(c,f){var d=c,a,b=d.style.visibility;if(d.style.display=="none"){d.style.visibility="hidden";d.style.display="";a=d[f];d.style.display="none";d.style.visibility=b}else{a=d[f]}return a}});Ui.Panel=function(a,b){this.nodes={};this.uniqueID=this.__getUniqueID();this.entity=null;this.__iframe=null;this.__isSetAdamant=false;this.__templateNodesIDs=[];this.__isFixed=false;$IE6&&(this.__ie6FixedController=new Ui.IE6FixedController())}.$extends(Ui.DisplayObject).$define({setTemplate:function(a){var b=$C("div");b.innerHTML=new Ui.Template(a).evaluate(this.__getNodes(a,"i"));b.style.display="none";this.__parent.appendChild(b);this.__updateTemplate(b);this.nodes=this.__getNodes(a);this.entity=this.__entity;this.nodes.panel=this.entity;return this},setFixed:function(b){!this.__isInited&&this.__initEntity();var a=parseInt(this.__entity.style.left),c=parseInt(this.__entity.style.top);if($IE6){this.__ie6FixedController.setFixed(this.__entity,b);this.__isSetAdamant&&this.__ie6FixedController.setFixed(this.__iframe,b)}else{if(b&&!this.__isFixed){this.setPosition({x:a-Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),y:c-Math.max(document.documentElement.scrollTop,document.body.scrollTop)});this.__entity.style.position="fixed"}if(!b&&this.__isFixed){this.setPosition({x:a+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),y:c+Math.max(document.documentElement.scrollTop,document.body.scrollTop)});this.__entity.style.position="absolute"}}this.__isFixed=!!b;this.__updateIframe();return this},setAdamant:function(a){this.__isSetAdamant=!!a;this.__isSetAdamant&&!this.__iframe&&this.__createIframe();this.__updateIframe();return this},destroy:function(){if(!this.__entity){return}Ui.Panel.$super.destroy.call(this);this.__ie6FixedController&&this.__ie6FixedController.destroy();this.__iframe&&this.__iframe.parentNode.removeChild(this.__iframe)},setPosition:function(a){!this.__isInited&&this.__initEntity();if($IE6){this.__ie6FixedController.setPosition(this.__entity,this.__isFixed,a)}else{Ui.Panel.$super.setPosition.call(this,a)}this.__updateIframe();return this},setSize:function(a){Ui.Panel.$super.setSize.call(this,a).__updateIframe();return this},show:function(a){Ui.Panel.$super.show.call(this,a).__updateIframe();return this},hidden:function(a){Ui.Panel.$super.hidden.call(this,a).__updateIframe();return this},__getX:function(){!this.__isInited&&this.__initEntity();if($IE6){return this.__ie6FixedController.getX(this.__entity,this.__isFixed)}else{return parseInt(this.__entity.style.left)}},__getY:function(){!this.__isInited&&this.__initEntity();if($IE6){return this.__ie6FixedController.getY(this.__entity,this.__isFixed)}else{return parseInt(this.__entity.style.top)}},__createIframe:function(){this.__iframe=$C("iframe");this.__iframe.frameBorder="none";this.__parent.insertBefore(this.__iframe,this.__entity);Core.Dom.setStyle(this.__iframe,"opacity",0);this.__ie6FixedController&&(this.__ie6FixedController.iframeNode=this.__iframe);this.__updateIframe()},__updateIframe:function(){if(this.__iframe){var a=this.__iframe.style;a.backgroundColor="#ffffff";a.left=this.x+"px";a.top=this.y+"px";a.width=this.width+"px";a.height=this.height+"px";a.position=this.__entity.style.position;a.display=this.__entity.style.display;a.zIndex=this.__entity.style.zIndex;$IE6&&this.__ie6FixedController.updateIframe(this.__isFixed)}},__updateIE6FCOrgPosition:function(){this.__ie6FixedController&&this.__ie6FixedController.updateOrgPosition()},__updateTemplate:function(j){var a,b,i,f,g,c=this.__entity;if(c){c.parentNode&&c.parentNode.removeChild(c);a=c.style.left;b=c.style.top;i=c.style.zIndex;f=c.style.position;g=c.style.display}else{g="none"}c=this.__entity=$E("_"+this.uniqueID+"_panel");if(!c){c=this.__entity=$E("_"+this.uniqueID+"_entity")}if(!c){throw new Error("[Panel Error]there missing identifier #{panel} in panel template")}c.style.left=a||0;c.style.top=b||0;c.style.zIndex=i||0;c.style.position=f||"absolute";c.style.display=g;this.__parent.replaceChild(c,j);this.__ie6FixedController&&(this.__ie6FixedController.node=this.__entity)},__getNodes:function(d,l){var a=l||"o",j=/\{[^\}]+(?=\})/g,c,b={},g,f;this.__templateNodesIDs=d.match(j);g=this.__templateNodesIDs;if(g){c=g.length;while(c--){f=g[c].replace("{","");switch(a){case"o":b[f]=$E("_"+this.uniqueID+"_"+f);break;case"i":b[f]="_"+this.uniqueID+"_"+f;break}}}return b},__getUniqueID:function(){return parseInt(Math.random()*1000).toString()+(new Date).getTime().toString()},setContent:function(a){this.nodes.content&&(this.nodes.content.innerHTML=a)},getNodes:function(){return this.nodes}});Ui.Drag=function(c,a,d){var b=this;this.canDrag=true;this.isLock=false;this.lockArea={left:0,right:0,top:0,bottom:0};this.__captureNode=c;this.__dragNodes=[];this.__deltaX=[];this.__deltaY=[];this.__eventDispatcher=new Core.Events.EventDispatcher(this);this.__isDraging=false;this.__canDragX=true;this.__canDragY=true;this.__dragHandle=function(){b.__drag()};this.__mouseDownHandle=function(){b.__isDraging=true;b.__eventDispatcher.dispatchEvent("beforeDrag");b.__setCapture(true)};this.__mouseUpHandle=function(){b.__isDraging&&b.__eventDispatcher.dispatchEvent("afterDrag");b.__isDraging=false;b.__setCapture(false)};this.__initNodes(c,a,d);this.__initCaputerNode()}.$define({addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},destroy:function(){Core.Events.removeEvent(this.__captureNode,this.__mouseDownHandle,"mousedown");Core.Events.removeEvent(document,this.__mouseUpHandle,"mouseup");this.__captureNode=null;this.__dragNodes=null},__initNodes:function(d,b,f){if(b){b instanceof Array?this.__dragNodes=b:this.__dragNodes.push(b);(typeof f==="undefined"||f)&&this.__dragNodes.push(this.__captureNode)}else{this.__dragNodes.push(this.__captureNode)}var a=this.__dragNodes,c=a.length;while(c--){!a[c].style.position&&(a[c].style.position="absolute");!a[c].style.left&&(a[c].style.left=0);!a[c].style.top&&(a[c].style.top=0)}},__initCaputerNode:function(){var b=this.__captureNode,a=this;Core.Events.addEvent(b,this.__mouseDownHandle,"mousedown");Core.Events.addEvent(document,this.__mouseUpHandle,"mouseup")},__setCapture:function(d){var f=this.__captureNode,b=this.__dragNodes,a=Core.Events.getEvent(),c=b.length;while(c--){this.__deltaX[c]=a.clientX-parseInt(b[c].style.left);this.__deltaY[c]=a.clientY-parseInt(b[c].style.top)}if(d){if($IE){f.setCapture();Core.Events.addEvent(f,this.__dragHandle,"mousemove")}else{Core.Events.addEvent(document,this.__dragHandle,"mousemove")}}else{if($IE){f.releaseCapture();Core.Events.removeEvent(f,this.__dragHandle,"mousemove")}else{Core.Events.removeEvent(document,this.__dragHandle,"mousemove")}}},__drag:function(){if(!this.canDrag){return}var d=this.__dragNodes,c=Core.Events.getEvent(),f=d.length,g=this.lockArea,b=0,a=0;this.__eventDispatcher.dispatchEvent("drag");while(f--){b=c.clientX-this.__deltaX[f];a=c.clientY-this.__deltaY[f];if(this.isLock){b=Math.min(Math.max(b,g.left),g.right);a=Math.min(Math.max(a,g.top),g.bottom)}d[f].style.left=b+"px";d[f].style.top=a+"px"}}});Ui.IDragger={addEventListener:function(a,b){},removeEventListener:function(a,b){},setDrag:function(b,a,c){},setLock:function(a){},setArea:function(a){},destroy:function(){}};Ui.SimpleDragger=function(){this.__drag=null;this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IDragger).$define({addEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.addEventListener(a,b)}else{this.__drag.addEventListener(a,b)}return this},removeEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.removeEventListener(a,b)}else{this.__drag.removeEventListener(a,b)}return this},setDrag:function(c,a,d){var b=this;this.__drag=new Ui.Drag(c,a,d);this.__drag.addEventListener("afterDrag",function(){b.__eventDispatcher.dispatchEvent("afterDrag")});return this},setLock:function(a){this.__drag.isLock=!!a;return this},setArea:function(a){this.__drag.lockArea=a;return this},destroy:function(){this.__drag.destroy()}});Ui.Dialog=function(a,c){var b=this;this.__dragger=null;this.__isBindUpadateAreaEvent=false;this.__isBindUpdateIE6AreaEvent=false;this.__beforeDragHandle=function(){b.__updateDraggerArea();b.__eventDispatcher.dispatchEvent("beforedrag")};this.__dragHandle=function(){b.__isSetAdamant&&b.__updateIframe();b.__eventDispatcher.dispatchEvent("drag")};this.__afterDragHandle=function(){b.__isFixed&&$IE6&&b.__updateIE6FCOrgPosition();b.__eventDispatcher.dispatchEvent("afterdrag")};this.__updateDraggerAreaHandle=function(){setTimeout(function(){b.__updateDraggerArea()},1)};this.__setMiddleHandle=function(){b.setMiddle()}}.$extends(Ui.Panel).$define({setTemplate:function(a){Ui.Dialog.$super.setTemplate.call(this,a);this.__initTitleBar();this.setDragger(Ui.SimpleDragger);return this},setContent:function(a){if(!this.nodes.content){return this}this.nodes.content.innerHTML=new Ui.Template(a).evaluate(this.__getNodes(a,"i"));this.__addContentNodes(this.__getNodes(a));return this},setFixed:function(a){Ui.Dialog.$super.setFixed.call(this,a);if(a){Core.Events.addEvent(window,this.__setMiddleHandle,"resize")}else{Core.Events.removeEvent(window,this.__setMiddleHandle,"resize")}this.__updateDraggerArea();return this},setMiddle:function(){var c=this.__getDocumentSize().height-this.height,b=(Math.sqrt(5)-1)/2,d=1,a=c*b/(b+d),f=this.__getDocumentSize().width/2-this.width/2;if(!this.__isFixed){a+=Math.max(document.documentElement.scrollTop,document.body.scrollTop);f+=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)}this.setPosition({x:Math.max(f,0),y:Math.max(a,0)});return this},setAreaLocked:function(a){if(!this.__dragger){return this}this.__dragger.setLock(a);return this},setSize:function(a){!this.__isInited&&this.__initEntity();if(this.nodes.content){typeof a.width!=="undefined"&&(this.nodes.content.style.width=a.width+"px");typeof a.height!=="undefined"&&(this.nodes.content.style.height=a.height+"px")}else{typeof a.width!=="undefined"&&(this.__entity.style.width=a.width+"px");typeof a.height!=="undefined"&&(this.__entity.style.height=a.height+"px")}return this},setDragger:function(a){if(!this.nodes.titleBar||!a){return this}if(!this.__dragger){this.__dragger=new a()}else{if(this.__dragger.constructor===a){return this}}this.__updateDragger(a);return this},destroy:function(){if(!this.__entity){return}Ui.Dialog.$super.destroy.call(this);Core.Events.removeEvent(window,this.__updateDraggerAreaHandle,"resize");Core.Events.removeEvent(window,this.__setMiddleHandle,"resize")},__addContentNodes:function(b){var c=this.nodes,a;for(a in b){c[a]=b[a]}},__updateDragger:function(a){if(this.__dragger.constructor!==a){this.__dragger.removeEventListener("beforedrag",this.__beforeDragHandle).removeEventListener("drag",this.__dragHandle).removeEventListener("afterdrag",this.__afterDragHandle);this.__dragger.destroy();this.__dragger=new a()}this.__dragger.setDrag(this.nodes.titleBar,this.__entity,false);this.__dragger.addEventListener("beforedrag",this.__beforeDragHandle).addEventListener("drag",this.__dragHandle).addEventListener("afterdrag",this.__afterDragHandle)},__updateDraggerArea:function(){var c,d,f,a;if(this.__isFixed){c=$IE6?document.documentElement.scrollLeft:0;d=$IE6?document.documentElement.scrollTop:0;f=$IE6?document.documentElement.scrollLeft+this.__getDocumentSize().width-this.width:this.__getDocumentSize().width-this.width;a=$IE6?document.documentElement.scrollTop+this.__getDocumentSize().height-this.height:this.__getDocumentSize().height-this.height}else{c=0;d=0;f=document.documentElement.scrollWidth-this.width;a=document.documentElement.scrollHeight-this.height}this.__dragger.setArea({left:c,top:d,right:f,bottom:a})},__initTitleBar:function(){if(!this.nodes.titleBar){return}var a=this.nodes.titleBar;a.style.cursor="move";if($IE){Core.Events.addEvent(a,function(){return false},"selectstart")}else{a.style.MozUserSelect="none"}},__getDocumentSize:function(){var a=document.documentElement.clientWidth||document.body.clientWidth,b=document.documentElement.clientHeight||document.body.clientHeight;return{width:a,height:b}}});Ui.ModuleDialog=function(c,b,a){this.__bgShadow=null;this.__dialog=null;this.__isInitBgShadow=false;this.__tplConfig=c;this.__iconSet=b;this.__dialogQueue=[];this.__zIndex=(a&&a.zIndex)||5000;this.__cfg=a||{};this.__initDialogEvent()}.$define({alert:function(c,a){a=a||{};var b=this.__createMessageDialog(a.tplConfig||this.__tplConfig.alert,a);b.nodes.text&&(b.nodes.text.innerHTML=c||"");b.show(a.renderer||this.__cfg.renderer).addEventListener("hidden",function(){this.destroy()});b.nodes.linkOk&&b.nodes.linkOk.style.display!=="none"&&b.nodes.linkOk.focus();return b},newAlert:function(c,a,b){a.tplConfig=this.__tplConfig.newAlert;this.alert(c,a,b)},confirm:function(d,a){a=a||{};var c=this.__createMessageDialog(a.tplConfig||this.__tplConfig.confirm,a),b=this;c.nodes.text&&(c.nodes.text.innerHTML=d||"");if(c.nodes.btnCancel){c.nodes.btnCancel.innerHTML=a.textCancel||"取消";Core.Events.addEvent(c.nodes.btnCancel,function(){a.funcCancel&&a.funcCancel.call(c);c.hidden(a.renderer||b.__cfg.renderer);Core.Events.stopEvent()},"click");c.nodes.linkCancel&&Core.Events.addEvent(c.nodes.linkCancel,function(){var f=Core.Events.getEvent();if(f.keyCode=="13"){a.funcCancel&&a.funcCancel.call(c);c.hidden(a.renderer||b.__cfg.renderer)}},"keydown")}c.show(a.renderer||b.__cfg.renderer).addEventListener("hidden",function(){this.destroy()});if(a.defaultButton==0){c.nodes.linkCancel&&c.nodes.linkCancel.style.display!=="none"&&c.nodes.linkCancel.focus()}else{c.nodes.linkOk&&c.nodes.linkOk.style.display!=="none"&&c.nodes.linkOk.focus()}return c},newConfirm:function(c,a,b){a.tplConfig=this.__tplConfig.newConfirm;this.confirm(c,a,b)},create:function(a){var b=this;a=a||{};var c=new Ui.Dialog();c.setTemplate(a.tpl||this.__tplConfig.customs);a.content&&c.setContent(a.content);a.width&&!isNaN(a.width)&&c.setSize({width:a.width});a.height&&!isNaN(a.height)&&c.setSize({height:a.height});return this.__initDialog(c,a)},__initDialogEvent:function(){var a=this.__dialogQueue;Core.Events.addEvent(document,function(){var b=Core.Events.getEvent();if(a.length&&b.keyCode=="27"){a[a.length-1].hidden()}},"keydown")},__createMessageDialog:function(b,a){var f=new Ui.Dialog(),d=this,c;f.setTemplate(b);a.width&&!isNaN(a.width)&&f.setSize({width:a.width});a.height&&!isNaN(a.height)&&f.setSize({height:a.height});f.nodes.subText&&(f.nodes.subText.innerHTML=a.subText||"");if(f.nodes.icon){f.nodes.icon.className=this.__iconSet[a.icon||"01"]["class"];f.nodes.icon.alt=this.__iconSet[a.icon||"01"]["alt"]}if(f.nodes.btnOk){f.nodes.btnOk.innerHTML=a.textOk||"确定";Core.Events.addEvent(f.nodes.btnOk,function(){f.hidden(a.renderer||d.__cfg.renderer);a.funcOk&&a.funcOk.call(f);Core.Events.stopEvent()},"click")}f.nodes.linkOk&&Core.Events.addEvent(f.nodes.linkOk,function(){var g=Core.Events.getEvent();if(g.keyCode=="13"){f.hidden(a.renderer||d.__cfg.renderer);a.funcOk&&a.funcOk.call(f)}},"keydown");f.setDragger(a.dragger||d.__cfg.dragger).setFixed(true).setAreaLocked(true);return this.__initDialog(f,a)},__initDialog:function(c,a){var b=this;a.zIndex&&(b.__zIndex=a.zIndex);c.nodes.titleName&&(c.nodes.titleName.innerHTML=a.title||"提示");if(c.nodes.btnClose){Core.Events.addEvent(c.nodes.btnClose,function(){var d=true;a.funcBeforeClose&&(d=a.funcBeforeClose.call(c)!==false);a.funcClose&&a.funcClose.call(c);d&&c.hidden()},"click");Core.Events.addEvent(c.nodes.btnClose,function(){Core.Events.stopEvent()},"mousedown")}c.setPosition({z:a.zIndex||b.__zIndex});c.setRenderer(a.renderer||this.__cfg.renderer);c.setDragger(a.dragger||this.__cfg.dragger);c.setMiddle();c.addEventListener("beforeHidden",function(){b.__updateDialogQueue(this,"remove")});c.addEventListener("beforeShow",function(){this.nodes.panel.parentNode.appendChild(this.nodes.panel);var d=this;if(!b.__isInitBgShadow){b.__initBGShadow(this,a.isAdamant||b.__cfg.isAdamant)}b.__setBGShadowOpacity(a.bgShadowOpacity!==0?a.bgShadowOpacity||0.4:a.bgShadowOpacity);window.setTimeout(function(){b.__bgShadow.show();b.__updateDialogQueue(d,"add")},1)});c.setTitle=function(d){this.nodes.titleName&&(this.nodes.titleName.innerHTML=d)};c.setHelp=function(d){this.nodes.btnHelp&&(this.nodes.btnHelp.href=d)};c.close=function(){this.hidden()};c.getNodes=function(){return this.nodes};c.getX=function(){return this.x};c.getY=function(){return this.y};c.getWidth=function(){return this.width};c.getHeight=function(){return this.height};return c},__initBGShadow:function(f,d){var a=this.__getDocumentSize().width,b=this.__getDocumentSize().height,c=this;this.__bgShadow=new Ui.Panel();this.__bgShadow.setTemplate('<div id="#{panel}" style="background-color:black"></div>').setSize({width:a,height:b}).setAdamant(d).setFixed(true).setPosition({x:0,y:0,z:c.__zIndex});Core.Events.addEvent(window,function(){c.__bgShadow.setPosition({x:0,y:0}).setSize({width:c.__getDocumentSize().width,height:c.__getDocumentSize().height})},"resize");this.__isInitBgShadow=true},__updateDialogQueue:function(b,d){var a,c;if(d==="add"){this.__dialogQueue.push(b)}else{if(d==="remove"){a=this.__dialogQueue.length;while(a--){this.__dialogQueue[a]===b&&this.__dialogQueue.splice(a,1)}}}if(this.__dialogQueue.length===0){this.__bgShadow.hidden()}else{c=this.__dialogQueue[this.__dialogQueue.length-1];this.__bgShadow.nodes.panel.parentNode.insertBefore(this.__bgShadow.nodes.panel,c.nodes.panel);this.__bgShadow.__iframe&&this.__bgShadow.__iframe.parentNode.insertBefore(this.__bgShadow.__iframe,this.__bgShadow.nodes.panel);c.nodes.linkOk&&c.nodes.linkOk.style.display!=="none"&&c.nodes.linkOk.focus()}},__setBGShadowOpacity:function(a){a=isNaN(a)?0:Math.max(Math.min(a,1),0);Core.Dom.setStyle(this.__bgShadow.nodes.panel,"opacity",a)},__getDocumentSize:function(){var a=document.documentElement.clientWidth||document.body.clientWidth,b=document.documentElement.clientHeight||document.body.clientHeight;return{width:a,height:b}}});Ui.Transition={simple:function(f,a,i,g){return i*f/g+a},backEaseIn:function(f,a,j,i){var g=1.70158;return j*(f/=i)*f*((g+1)*f-g)+a},backEaseOut:function(f,a,j,i){var g=1.70158;return j*((f=f/i-1)*f*((g+1)*f+g)+1)+a},backEaseInOut:function(f,a,j,i){var g=1.70158;if((f/=i/2)<1){return j/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return j/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},bounceEaseOut:function(f,a,i,g){if((f/=g)<(1/2.75)){return i*(7.5625*f*f)+a}else{if(f<(2/2.75)){return i*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return i*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return i*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},bounceEaseIn:function(f,a,i,g){return i-Transition.bounceEaseOut(g-f,0,i,g)+a},bounceEaseInOut:function(f,a,i,g){if(f<g/2){return Transition.bounceEaseIn(f*2,0,i,g)*0.5+a}else{return Transition.bounceEaseOut(f*2-g,0,i,g)*0.5+i*0.5+a}},regularEaseIn:function(f,a,i,g){return i*(f/=g)*f+a},regularEaseOut:function(f,a,i,g){return -i*(f/=g)*(f-2)+a},regularEaseInOut:function(f,a,i,g){if((f/=g/2)<1){return i/2*f*f+a}return -i/2*((--f)*(f-2)-1)+a},strongEaseIn:function(f,a,i,g){return i*(f/=g)*f*f*f*f+a},strongEaseOut:function(f,a,i,g){return i*((f=f/g-1)*f*f*f*f+1)+a},strongEaseInOut:function(f,a,i,g){if((f/=g/2)<1){return i/2*f*f*f*f*f+a}return i/2*((f-=2)*f*f*f*f+2)+a},elasticEaseIn:function(i,f,n,m){var g,l;if(i==0){return f}if((i/=m)==1){return f+n}l=m*0.3;if(!g||g<Math.abs(n)){g=n;var j=l/4}else{var j=l/(2*Math.PI)*Math.asin(n/g)}return -(g*Math.pow(2,10*(i-=1))*Math.sin((i*m-j)*(2*Math.PI)/l))+f},elasticEaseOut:function(i,f,n,m){var g,l;if(i==0){return f}if((i/=m)==1){return f+n}if(!l){l=m*0.3}if(!g||g<Math.abs(n)){g=n;var j=l/4}else{var j=l/(2*Math.PI)*Math.asin(n/g)}return(g*Math.pow(2,-10*i)*Math.sin((i*m-j)*(2*Math.PI)/l)+n+f)},elasticEaseInOut:function(i,f,n,m){var g,l;if(i==0){return f}if((i/=m/2)==2){return f+n}if(!l){var l=m*(0.3*1.5)}if(!g||g<Math.abs(n)){var g=n;var j=l/4}else{var j=l/(2*Math.PI)*Math.asin(n/g)}if(i<1){return -0.5*(g*Math.pow(2,10*(i-=1))*Math.sin((i*m-j)*(2*Math.PI)/l))+f}return g*Math.pow(2,-10*(i-=1))*Math.sin((i*m-j)*(2*Math.PI)/l)*0.5+n+f}};Ui.TweenStrategy=function(c,a,d,b){this.startValue=c||0;this.endValue=a||0;this.duration=d||0;this.motion=b||Ui.Transition.simple;this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$define({motion:null,duration:0,startValue:0,endValue:0,_itvID:0,_isTweenning:false,addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},start:function(){if(this._isTweenning){return}this._isTweenning=true;var g=this,b,a=this.startValue,f=this.endValue,j=this.duration,i,c=(new Date()).getTime();this._itvID=window.setInterval(function(){b=((new Date()).getTime()-c)/1000;b>g.duration&&(b=g.duration);i=g.motion(b,a,f-a,j);g.onTween&&g.onTween(i);g.__eventDispatcher.dispatchEvent("tween",i);b==g.duration&&g.stop()},25);return this},stop:function(){window.clearInterval(this._itvID);this._isTweenning=false;this.onEnd&&this.onEnd();this.__eventDispatcher.dispatchEvent("end");return this},onTween:function(a){},onEnd:function(){}});Ui.OpacityRenderer=function(){this.__canShow=true;this.__canHidden=true;this.__node=null;this.__tween=new Ui.TweenStrategy(0,0,0.6,Ui.Transition.strongEaseOut);this.__state="";this.__lastState="";this.__value=0;this.__node=null;this.__eventDispatcher=new Core.Events.EventDispatcher(this);this.__initTweenEvent()}.$implements(Ui.IRenderer).$define({setCanShow:function(a){this.__canShow=!!a},setCanHidden:function(a){this.__canHidden=!!a},show:function(b){var a=this.__tween;a.stop();Core.Dom.setStyle(b,"opacity",this.__value);b.style.display="";this.__node=b;this.__state="show";this.__eventDispatcher.dispatchEvent("beforeShow");if(this.__canShow){a.startValue=this.__value;a.endValue=1;a.start()}return this},hidden:function(b){var a=this.__tween;a.stop();this.__node=b;this.__state="hidden";this.__eventDispatcher.dispatchEvent("beforeHidden");if(this.__canHidden){a.startValue=this.__value;a.endValue=0;a.start()}return this},addEventListener:function(a,b){this.__eventDispatcher.addEventListener(a,b);return this},removeEventListener:function(a,b){this.__eventDispatcher.removeEventListener(a,b);return this},__initTweenEvent:function(){var a=this;this.__tween.addEventListener("tween",function(b){a.__value=b;Core.Dom.setStyle(a.__node,"opacity",b)});this.__tween.addEventListener("end",function(){a.__node&&a.__node.style.filter&&(a.__node.style.filter="");if(a.__state!==""&&a.__state!==a.__lastState){a.__lastState=a.__state;a.__eventDispatcher.dispatchEvent(a.__state)}a.__state==="hidden"&&(a.__node.style.display="none")})}});Ui.BorderDragger=function(){this.__drag=null;this.__isBindEvent=false;this.__border=null;this.__dragNode=null;this.__isCreated=false;this.__tweenX=new Ui.TweenStrategy(0,0,0.5,Ui.Transition.strongEaseOut);this.__tweenY=new Ui.TweenStrategy(0,0,0.5,Ui.Transition.strongEaseOut);this.__eventDispatcher=new Core.Events.EventDispatcher(this)}.$implements(Ui.IDragger).$define({addEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.addEventListener(a,b)}else{this.__drag.addEventListener(a,b)}return this},removeEventListener:function(a,b){if(a.toLowerCase()==="afterdrag"){this.__eventDispatcher.removeEventListener(a,b)}else{this.__drag.removeEventListener(a,b)}return this},setDrag:function(b,a,c){if(!this.__isCreated){this.__createBorder(a);this.__initTweenEvent(a)}this.__drag=new Ui.Drag(b,this.__border,c);this.__dragNode=a;this.__initDragEvent();return this},setLock:function(a){this.__drag.isLock=!!a;return this},setArea:function(a){this.__drag.lockArea=a;return this},destroy:function(){this.__drag.destroy()},__createBorder:function(b){this.__border=$C("div");var a=this.__border.style;a.border="2px dashed #BCC4D0";a.position="absolute";a.display="none";a.backgroundColor="transparent";a.MozUserSelect="none";document.body.appendChild(this.__border);this.__isCreated=true},__initDragEvent:function(){if(this.__isBindEvent){return}var d=this,f=this.__border.style,b=this.__dragNode.style,c=this.__tweenX,a=this.__tweenY;this.__drag.addEventListener("beforeDrag",function(){f.zIndex=b.zIndex+1;f.position=b.position;f.width=d.__dragNode.offsetWidth-4+"px";f.height=d.__dragNode.offsetHeight-4+"px";f.left=parseInt(b.left)+"px";f.top=parseInt(b.top)+"px";f.display=""});this.__drag.addEventListener("afterDrag",function(){if($IE6){b.left=parseInt(f.left)+"px";b.top=parseInt(f.top)+"px";f.display="none";d.__eventDispatcher.dispatchEvent("afterDrag")}else{c.startValue=parseInt(b.left);c.endValue=parseInt(f.left);a.startValue=parseInt(b.top);a.endValue=parseInt(f.top);c.start();a.start()}});this.__isBindEvent=true},__initTweenEvent:function(c){var a=c.style,d=this.__border.style,b=this;this.__tweenX.addEventListener("tween",function(f){a.left=f+"px"});this.__tweenY.addEventListener("tween",function(f){a.top=f+"px"});this.__tweenX.addEventListener("end",function(){d.display="none";b.__eventDispatcher.dispatchEvent("afterDrag")})}});var winDialog={};var DialogTemplate={};(function(){var c={alert:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示标题</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div id="#{content}" class="CP_layercon1">','<div class="CP_prompt">','<img id="#{icon}" class="SG_icon SG_icon201" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="50" height="50" align="absmiddle"/>','<table class="CP_w_ttl"><tr><td id="#{text}"></td></tr></table>','<div id="#{subText}" class="CP_w_cnt SG_txtb"></div>','<p class="CP_w_btns_Mid"><a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnOk}"> </cite></a></p>',"</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),newAlert:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div class="CP_layercon2 pop_v">','<div class="v_prompt">','<img id="#{icon}" class="SG_icon SG_icon148" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="20" height="20" align="absmiddle" />','<div id="#{text}" class="v_cnt SG_txtb"></div>','<div id="#{subText}"></div>','<p class="v_btns">','<a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#"><cite id="#{btnOk}">确定</cite></a>',"</p>","</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),confirm:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示标题</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div id="#{content}" class="CP_layercon1">','<div class="CP_prompt">','<img id="#{icon}" class="SG_icon SG_icon201" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="50" height="50" align="absmiddle"/>','<table class="CP_w_ttl"><tr><td id="#{text}"></td></tr></table>','<div id="#{subText}" class="CP_w_cnt SG_txtb"></div>','<p class="CP_w_btns">','<a  id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnOk}"></cite></a>','<a style="margin-left:5px;" id="#{linkCancel}" class="SG_aBtn SG_aBtnB" href="#" onclick="return false;"><cite id="#{btnCancel}"> <span id="#{cancel}"></span> </cite></a></p>',"</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),newConfirm:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid"><div class="bLyTop"><strong id="#{titleName}">提示</strong><cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite></div></th>','<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid">','<div class="CP_layercon2 pop_v">','<div class="v_prompt">','<img id="#{icon}" class="SG_icon SG_icon148" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" width="20" height="20" align="absmiddle" />','<div id="#{text}" class="v_cnt SG_txtb"></div>','<div id="#{subText}"></div>','<p class="v_btns">','<a id="#{linkOk}" class="SG_aBtn SG_aBtnB" href="#"><cite id="#{btnOk}">确定</cite></a>&nbsp;&nbsp;','<a id="#{linkCancel}" class="SG_aBtn SG_aBtnB SG_aBtn_g" href="#"><cite id="#{btnCancel}">取消</cite></a>',"</p>","</div>","</div>","</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),customs:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid">','<div class="bLyTop">','<strong id="#{titleName}">提示标题</strong>','<cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite>',"</div>","</th>",'<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid" id="#{content}">',"</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join("")};var b={"01":{"class":"SG_icon SG_icon201",alt:"警告"},"02":{"class":"SG_icon SG_icon202",alt:"失败"},"03":{"class":"SG_icon SG_icon203",alt:"成功"},"04":{"class":"SG_icon SG_icon204",alt:"询问"},"05":{"class":"SG_icon SG_bigLoading",alt:"正在加载"},"06":{"class":"SG_icon SG_icon148",alt:"警告"}};var d={};var a=new Ui.ModuleDialog(c,b,{renderer:Ui.OpacityRenderer,dragger:Ui.BorderDragger,isAdamant:$IE6});winDialog.create=winDialog.createCustomsDialog=function(g,f){if(f&&typeof f==="string"){d[f]=a.create(g);return d[f]}else{return a.create(g)}};winDialog.alert=function(i,f,g){if(g&&typeof g==="string"){d[g]=a.alert(i,f);return d[g]}else{return a.alert(i,f)}};winDialog.newAlert=function(i,f,g){if(g&&typeof g==="string"){d[g]=a.newAlert(i,f);return d[g]}else{return a.newAlert(i,f)}};winDialog.confirm=function(i,f,g){if(g&&typeof g==="string"){d[g]=a.confirm(i,f);return d[g]}else{return a.confirm(i,f)}};winDialog.newConfirm=function(i,f,g){if(g&&typeof g==="string"){d[g]=a.newConfirm(i,f);return d[g]}else{return a.newConfirm(i,f)}};winDialog.getDialog=function(f){if(f&&typeof f==="string"){return d[f]}};DialogTemplate=c})();Lib.Login.LoginPost=Core.Class.create();Lib.Login.LoginPost.prototype={url:"http://i.sso.sina.com.cn/js/ssologin.js",callback:null,initialize:function(c,a,b){window.sinaSSOConfig=new function(){if(b){this.from=b}this.pageCharset="utf-8";this.noActiveTime=14400;this.setDomain=true;this.entry="boke";this.customInit=function(){};this.customLoginCallBack=c;this.customLogoutCallBack=function(d){};this.useIframe=true}},login:function(f,b,c){var d=this;if(typeof sinaSSOController=="undefined"||!sinaSSOController){trace("no sso");Utils.Io.JsLoad.request(this.url,{onComplete:function(){a()},onException:function(){},timeout:30000,isRemove:false})}else{trace("has sso");sinaSSOController.init();if(typeof sinaSSOController.setLoginType=="function"){sinaSSOController.setLoginType(2)}if(typeof sinaSSOController.getServerTime=="function"){sinaSSOController.getServerTime(f)}trace("init ok");a()}function a(){if(typeof c=="undefined"){sinaSSOController.login(f,b)}else{sinaSSOController.login(f,b,c)}}},parse:function(a){this.callback.call(a)}};Core.System.getScrollPos=function(c){c=c||document;var a=c.documentElement;var b=c.body;return[Math.max(a.scrollTop,b.scrollTop),Math.max(a.scrollLeft,b.scrollLeft),Math.max(a.scrollWidth,b.scrollWidth),Math.max(a.scrollHeight,b.scrollHeight)]};Core.Dom.getXY=function(b){if((b.parentNode==null||b.offsetParent==null||Core.Dom.getStyle(b,"display")=="none")&&b!=document.body){return false}var a=null;var g=[];var c;var d=b.ownerDocument;c=b.getBoundingClientRect();var f=Core.System.getScrollPos(b.ownerDocument);return[c.left+f[1],c.top+f[0]];a=b.parentNode;while(a.tagName&&!/^body|html$/i.test(a.tagName)){if(Core.Dom.getStyle(a,"display").search(/^inline|table-row.*$/i)){g[0]-=a.scrollLeft;g[1]-=a.scrollTop}a=a.parentNode}return g};if(!$IE){Core.Dom.getXY=function(b){if((b.parentNode==null||b.offsetParent==null||Core.Dom.getStyle(b,"display")=="none")&&b!=document.body){return false}var a=null;var g=[];var c;var d=b.ownerDocument;g=[b.offsetLeft,b.offsetTop];a=b.offsetParent;var f=Core.Dom.getStyle(b,"position")=="absolute";if(a!=b){while(a){g[0]+=a.offsetLeft;g[1]+=a.offsetTop;if($SAFARI&&!f&&Core.Dom.getStyle(a,"position")=="absolute"){f=true}a=a.offsetParent}}if($SAFARI&&f){g[0]-=b.ownerDocument.body.offsetLeft;g[1]-=b.ownerDocument.body.offsetTop}a=b.parentNode;while(a.tagName&&!/^body|html$/i.test(a.tagName)){if(Core.Dom.getStyle(a,"display").search(/^inline|table-row.*$/i)){g[0]-=a.scrollLeft;g[1]-=a.scrollTop}a=a.parentNode}return g}}(function(){var i;var c=parseInt(Math.random()*100);var j=[];var b=-1;var g="";var f="#userPosition {padding: 0;margin: 0;border: 0;position: absolute;z-index: 999;}				#sinaNote {position: absolute;z-index: 999999;width: auto;overflow: hidden;padding: 0;margin: 0;				border: 1px solid #CCCCCC;background: #ffffff;text-align:left;}				#sinaNote li {font-size: 12px;list-style: none;margin: 0 1px;height: 20px;padding: 0 5px;clear: both;				line-height: 20px;cursor: pointer;color: #999999;}				#sinaNote li.note {text-align: left;color: #999999;}";var d=window;var a={overfcolor:"#999",overbgcolor:"#e8f4fc",outfcolor:"#000000",outbgcolor:"",menuStatus:{"sina.com":true,"sina.cn":true,"vip.sina.com":true,"qq.com":true,"163.com":true,"126.com":true,"hotmail.com":true,"yahoo.com.cn":true,"gmail.com":true}};a.createNode=function(){var o=d.document;var p=o.createElement("div");p.innerHTML='<ul id="sinaNote" style="display:none;"></ul>';var n=o.createElement("style");n.setAttribute("type","text/css");try{if($IE){n.styleSheet.cssText=f}else{n.innerHTML=f}}catch(m){trace(m.message)}var l=o.createElement("div");l.appendChild(p);l.appendChild(n);o.body.appendChild(l)};a.arrowKey=function(l){if(l==38){if(b<=0){b=j.length}b--;a.selectLi(b)}if(l==40){if(b>=j.length-1){b=-1}b++;a.selectLi(b)}};a.showList=function(y){g="";var C=Core.Events.getEvent().keyCode;if(C==38||C==40){a.arrowKey(C);return false}if(!$E("sinaNote")){a.createNode()}var o=$E(y).value;var n={};var t=o.indexOf("@");var A="";var s="";if(t>-1){A=o.substr(t+1);s=o.substr(0,t)}j=[];b=0;j[j.length]="sinaNote_MenuItem_Title_"+c;for(var E in this.menuStatus){this.menuStatus[E]=true;if(A!=""&&A!=E.substr(0,A.length)){this.menuStatus[E]=false}else{j[j.length]="sinaNote_MenuItem_"+E+"_"+c}}var v='<li class="note">请选择登录类型</li>';v+='<li id="sinaNote_MenuItem_Title_'+c+'">'+o+"</li>";var B;for(var p in this.menuStatus){if(this.menuStatus[p]==true){if(s==""){B=o+"@"+p}else{B=s+"@"+p}v+='<li id="sinaNote_MenuItem_'+p+"_"+c+'" title="'+B+'">'+B+"</li>"}}$E("sinaNote").innerHTML=v;for(var x=0;x<o.length;x++){if(o.charCodeAt(x)<160){$E("sinaNote").style.display="";this.selectList(y)}else{this.hideList()}}var l=$E(y);var m=$E("sinaNote");var r=0;var u=0;var q;if(d!=window){q=Core.Dom.getXY(window.frameElement);r=q[0];u=q[1]}var z=l.offsetWidth;if(z<200){z=200}m.style.width=z-2+"px";var D=Core.Dom.getXY(l);m.style.left=(D[0]-($IE?2:-1)+r)+"px";m.style.top=(D[1]+l.offsetHeight-($IE?2:-1)+u)+"px"};a.selectList=function(n){var l=$E("sinaNote").getElementsByTagName("li");for(var m=1;m<l.length;m++){l[1].style.backgroundColor=a.overbgcolor;l[1].style.color=a.outfcolor;l[m].onmousedown=function(){var o=this.innerHTML;if(o.indexOf("非新浪邮箱")>-1){var p=o.split("@");$E(n).value=p[0]}else{$E(n).value=this.innerHTML}if(Core.Events.getEvent()!=null){Core.Events.stopEvent()}};l[m].onmouseover=function(){if(m!=1){l[1].style.backgroundColor=a.outbgcolor;l[1].style.color=a.overfcolor}this.style.backgroundColor=a.overbgcolor;this.style.color=a.outfcolor};l[m].onmouseout=function(){this.style.backgroundColor=a.outbgcolor;this.style.color=a.overfcolor;l[1].style.backgroundColor=a.overbgcolor;l[1].style.color=a.outfcolor}}};a.selectLi=function(l){var n;$E("sinaNote_MenuItem_Title_"+c).style.backgroundColor=a.outbgcolor;$E("sinaNote_MenuItem_Title_"+c).style.color=a.overfcolor;for(var m=0;m<j.length;m++){n=$E(j[m]);n.style.backgroundColor=a.outbgcolor;n.style.color=a.overfcolor}$E(j[l]).style.backgroundColor=a.overbgcolor;$E(j[l]).style.color=a.outfcolor;g=$E(j[l]).innerHTML};a.hideList=function(){if(!$E("sinaNote")){a.createNode()}$E("sinaNote").style.display="none"};a.init=function(p,n,l,o){o=o||window;if(o.document.body==null){setTimeout(Core.Function.bind3(function(){this.init(p,n,l,o)},this),100)}for(var m in n){this[m]=n[m]}Core.Events.addEvent(document,a.hideList,"click");Core.Events.addEvent(p,a.hideList,"blur");Core.Events.addEvent(p,Core.Function.bind3(a.showList,this,[p]),"keyup");Core.Events.addEvent(p,function(t){var s=Core.Events.getEvent().keyCode;var r;if(s==13||s==9){if(g!=""){var q=g;if(q.indexOf("非新浪邮箱")>-1){var u=q.split("@");p.value=u[0]+"@";r=false}else{p.value=g;r=true}}if(r){if(l!=null){setTimeout(function(){l.focus()},0)}}else{if(p){p.focus()}}}},"keydown");if(o){d=o}};Lib.passcardOBJ=a})();Lib.Login.Ui=Core.Class.create();var msnRefreshTimer=0;function msnrefreshWindow(){var setCookie=Utils.Cookie.setCookie;var getCookie=Utils.Cookie.getCookie;clearTimeout(msnRefreshTimer);var reg_token=getCookie("reg_token");if(reg_token){trace("token find out...");setCookie("reg_token","","","/",".blog.sina.com.cn")}else{trace("no token...");msnRefreshTimer=setTimeout(msnrefreshWindow,1000);return}var cookieArr;var cid;var code;var c_cid=getCookie("c_uid");var CBcookie=getCookie("msnLinkCB");var altReg=getCookie("AlT");setCookie("msnLoginComeFrom",window.location.href,1,"/",".blog.sina.com.cn");if(CBcookie){cookieArr=CBcookie.split("_");cid=cookieArr[0];code=cookieArr[1]}if(c_cid!=cid){return}switch(code){case"noCid":break;case"loginError":break;case"unlink":deleteCookie("msnLinkCB");funcNoAccount(reg_token);break;case"done":deleteCookie("msnLinkCB");setCookie("loginFromMsn","msn",24,"/",".blog.sina.com.cn");funcSuccess(altReg,reg_token);break;case"pass":break}function funcSuccess(arg,reg_tk){trace("has Account");if(arg){trace("alt:"+arg);var iframe=$C("iframe");iframe.setAttribute("height",0);iframe.setAttribute("width",0);document.body.appendChild(iframe);iframe.src="https://login.sina.com.cn/sso/login.php?entry=blogmsn&service=blogmsn&alt="+encodeURIComponent(arg)+"&savestate=7&returntype=TEXT";(function(){var me=arguments.callee;if(!me.count){me.count=0}if(me.count++>10){trace("放弃获取SUP");iframe.parentNode.removeChild(iframe);return}trace("尝试获取SUP, count:"+me.count);if(getCookie("SUP")){trace("获取到 SUP"+getCookie("SUP"));window.location.reload();return}setTimeout(me,1000)})()}else{window.location.reload()}}function funcNoAccount(){trace("noAccount");window.location.href="http://blog.sina.com.cn/blog_rebuild/msn/interface/connect_user_confirm.php"}function deleteCookie(name){var Then=new Date();Then.setTime(Then.getTime()-1);document.cookie=name+"=_pass;path=/;domain=.blog.sina.com.cn;expires="+Then.toGMTString()}function jsonDecode(str){if(!str||str==""){return null}try{return window.eval("("+str+")")}catch(e){return null}}}Lib.Login.Ui.prototype={dialog:null,isInit:false,request:null,callback:null,initialize:function(){},login:function(c,a,b){this.callback=c||null;this.clearDomain=a||false;this.from=b||null;this.initDom();this.initEvent();this.dialog.show();this.dialog.setAreaLocked(true);this.reloadName();this.onShow();this.focus();if(scope.$pageid==="blogMove"){$E("login_move_tip").style.display=""}if($IE6){this.initAD()}Lib.passcardOBJ.init($E("login_name_d"),{overfcolor:"#999",overbgcolor:"#e8f4fc",outfcolor:"#000000",outbgcolor:""},$E("login_pass_d"))},reloadName:function(){var b=Lib.Login.info();var c=b.ln;if(c){$E("login_name_d").value=c}var a=Utils.Cookie.getCookie("ALF");if(a!=""&&$E("login_save")){$E("login_save").checked=true;$E("login_save_tips").style.display="none"}a=Utils.Cookie.getCookie("LiRe");if(a!=""&&$E("login_save")){$E("login_save").checked=true;$E("login_save_tips").style.display="none"}},initDom:function(){var a=this;this.dialog=winDialog.createCustomsDialog({tpl:a.tpl});this.dialog.addEventListener("hidden",function(){this.destroy()});this.dialog.setContent(this.struc);this.dialog.setTitle("登录新浪博客");this.dialog.setMiddle()},initEvent:function(){var b=this.parse.bind2(this);this.request=new Lib.Login.LoginPost(b,this.clearDomain,this.from);Core.Events.addEvent("login_button",this.doLogin.bind2(this));Core.Events.addEvent("login_name_d",function(d){var c=d.keyCode;if(c==13){this.doLogin()}}.bind2(this),"keydown");Core.Events.addEvent("login_pass_d",function(d){var c=d.keyCode;if(c==13){this.doLogin()}}.bind2(this),"keydown");var a=1;Core.Events.addEvent("login_save",function(){if($E("login_save").checked){$E("login_save_tips").style.display=""}else{$E("login_save_tips").style.display="none"}if(a){var c="http://control.blog.sina.com.cn/blog_rebuild/riaapi/padblog/padInfo.php?ck_login=A00001&rnd="+Math.random();Utils.Io.JsLoad.request(c,{onComplete:function(){},onException:function(){}});a=null}})},doLogin:function(){Core.Events.stopEvent();var c=$E("login_name_d").value;var a=$E("login_pass_d").value;c=Core.String.trim(c);a=a;if(c==""){this.error("请输入登录名");return false}if(a==""){this.error("请输入密码");return false}if(typeof sinaSSOController!="undefined"&&typeof sinaSSOController.loginExtraQuery!="undefined"){if(typeof sinaSSOController.loginExtraQuery.door!="undefined"){var b=$E("login_vcode").value;sinaSSOController.loginExtraQuery.door=b||1}}if($E("login_save").checked){v7sendLog("48_01_38_1");this.request.login(c,a,60)}else{v7sendLog("48_01_38_0");this.request.login(c,a)}return false},parse:function(c){if(c.result){Lib.checkAuthor();if($E("login_save").checked){Utils.Cookie.setCookie("LiRe",true,2400,"/",".blog.sina.com.cn")}else{Utils.Cookie.setCookie("LiRe","",2400,"/",".blog.sina.com.cn")}var b=new Date(),l=b.getFullYear(),f=b.getMonth(),i=b.getDate();var a=new Date(l,f,i,24).getTime();Utils.Cookie.setCookie("onceloggedonblog",a,720,"/",".blog.sina.com.cn");var j=this;function g(){if(this.callback){try{$tray.renderLogin()}catch(d){}this.callback.call()}else{window.location=window.location.toString().replace(/#.*/,"")}}var n=false;Utils.Io.JsLoad.request("http://login.sina.com.cn/bindmail/checkmailuser.php?entry=blog&name="+encodeURIComponent($E("login_name_d").value)+"&utf82gbk=1&callback=scope.$bindEmailAlert",{noreturn:true,timeout:5000,onException:function(){if(!n){g.call(j)}}});scope.$bindEmailAlert=function(m){n=true;if((m.ret!="y"&&m.errcode!="not_verify")||Utils.Cookie.getCookie("sbr_noTBE")==1){g.call(j)}else{var d=winDialog.createCustomsDialog({content:['<div id="#{entityID} style="width:358px;height:144px" class="CP_layercon2 unilayer">','<div id="#{contentID}" class="CP_prompt">','<img height="50" align="absmiddle" width="50" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" class="SG_icon SG_icon201">','<table class="CP_w_ttl"><tbody><tr><td>经检测您的帐号存在一定的安全隐患！<br>建议绑定邮箱</td></tr></tbody></table>','<p class="CP_w_btns_Mid"><a href="javascript:;" class="SG_aBtn SG_aBtnB" id="#{bindit}" target="_blank"><cite> 绑定 </cite></a>&nbsp;&nbsp;<a href="javascript:;" class="SG_aBtn SG_aBtnB" id="#{nobind}"><cite> 暂不绑定 </cite></a></p>',"</div>",'<div class="unilayerB SG_j_linedot1">','<p class="SG_txtb"><input type="checkbox" id="#{noalertbind}"><label for="#{noalertbind}">一周内不提醒</label></p>',"</div>","</div>"].join(""),shadow:1},"bindEmail");d.setMiddle();d.show();d.nodes.btnClose.onclick=function(){g.call(j);d.hidden()};d.nodes.nobind.onclick=function(){setTimeout(function(){g.call(j);d.hidden()},100)};d.nodes.bindit.href="http://login.sina.com.cn/bindmail/bindmail.php?entry=blog";d.nodes.bindit.onclick=function(){g.call(j)};d.nodes.noalertbind.onclick=function(){if(this.checked){Utils.Cookie.setCookie("sbr_noTBE","1",24*7,"/",".blog.sina.com.cn")}else{Utils.Cookie.setCookie("sbr_noTBE","",0,"/",".blog.sina.com.cn")}}}};this.dialog.hidden()}else{if(c.errno==="4049"){sinaSSOController.loginExtraQuery={door:0};$E("login_ckimg").style.display="";$E("login_vcode").value="";$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0";Core.Events.addEvent($E("reloadCode"),function(){$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0";$E("login_vcode").value="";$E("login_div_error").innerHTML=""});this.error("");return}if(c.errno==="2070"){Core.Events.fireEvent($E("reloadCode"),"click");this.error(c.reason);return}if(c.errno=="4047"){this.error(c.reason);return}else{if(c.errno=="4057"){this.error(c.reason);return}else{if(c.errno=="4040"){this.error(c.reason);return}}}this.error("登录名或密码错误");$E("checkImg").src="http://login.sina.com.cn/cgi/pin.php?r="+Core.Math.getUniqueId()+"&s=0";$E("login_vcode").value=""}},friendlyTip:function(f){var g=f;var c=$E("login_name_d");var b=c.value;var j=this;if(!/[\u0391-\uFFE5]+/.test(b)&&!/^\d+$/.test(b)&&!/^@/.test(b)){var i="你的登录名可能是 ";var a='<a href="#" class="underline" onclick="$_RENAME(/@.*/, \'{1}\');return false">{0}{1}</a>';var l=["@sina.com","@sina.cn"];var d="";if(/@sina\.cn$/.test(b)){d=a.format("{0}",l[0])}else{if(/@sina\.com$/.test(b)){d=a.format("{0}",l[1])}else{d=a.format("{0}",l[0])+" 或 "+a.format("{0}",l[1])}}g=(i+d).format(b.replace(/@.*/,""))}return g},rename:(function(){window.$_RENAME=function(b,a){var c=$E("login_name_d");c.value=c.value.replace(b,"")+a;$E("login_pass_d").focus();$E("login_div_error").innerHTML=""};return window.$_RENAME})(),focus:function(){var a=$E("login_name_d");if(a.value==""){a.focus()}else{$E("login_pass_d").focus()}},initAD:function(){$E("login_ad").src="http://blog.sina.com.cn/lm/iframe/71/2008/0731/21.html"},onShow:function(){},error:function(a){$E("login_div_error").innerHTML=a;$E("login_pass_d").value="";this.focus()},tpl:['<table id="#{panel}" class="CP_w">','<thead id="#{titleBar}">',"<tr>",'<th class="tLeft"><span></span></th>','<th class="tMid">','<div class="bLyTop">','<strong id="#{titleName}">提示标题</strong>','<cite><a id="#{btnClose}" href="#" onclick="return false;" class="CP_w_shut" title="关闭">关闭</a></cite>',"</div>","</th>",'<th class="tRight"><span></span></th>',"</tr>","</thead>","<tfoot>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid"><span></span></td>','<td class="tRight"><span></span></td>',"</tr>","</tfoot>","<tbody>","<tr>",'<td class="tLeft"><span></span></td>','<td class="tMid" id="#{content}">',"</td>",'<td class="tRight"><span></span></td>',"</tr>","</tbody>","</table>"].join(""),struc:'		<div class="CP_layercon2 passLoginItem">			<div>				<div id="login_move_tip" style="display:none;margin-bottom:12px">可以使用新浪微博、邮箱、通行证的帐号进行登录</div>				<div class="boxA">登录名：					<input tabIndex="201" type="text" class="fm1" style="width:215px;" name="login_name" id="login_name_d" tabIndex=1/>  <a style="font-size: 12px;" href="http://login.sina.com.cn/signup/signupmail.php?entry=blog&srcuid='+scope.$uid+'&src=blogicp" target="_blank">立即注册</a>				</div>				<div class="boxA">密　码：					<input tabIndex="202" type="password" class="fm1" style="width:215px;" name="login_pass" maxlength="16" id="login_pass_d" tabIndex=2/>  <a style="font-size: 12px;" href="http://login.sina.com.cn/getpass.html" target="_blank">找回密码</a>				</div>				<div id="login_ckimg" class="boxA" style="display:none"> <p class="p_img">验证码：                  	<input type="text" id="login_vcode" name="login_vcode" class="fm1" size="10" maxlength="5" />                  	<img width="100" align="absmiddle" id="checkImg" src="http://login.sina.com.cn/cgi/pin.php?r='+Core.Math.getUniqueId()+'&s=0" /> <a href="javascript:;" onclick="return false;" style="font-size: 12px;"><span id="reloadCode">换一换</span></a></p> 			    </div>				<div class="ErrTips" id="login_div_error"></div>				<div class="boxB"><p><input tabIndex="203" type="checkbox" value="" id="login_save" checked="checked" /><label for="login_save"> 记住登录状态</label></p><p id="login_save_tips" style="color:#999;display:none;">建议在网吧/公用电脑上取消该选项</p><p style="margin-top: 8px;"><a id="login_button" class="SG_aBtn SG_aBtnB SG_aBtn_sub" href="javascript:;" tabIndex=204><cite>登录<input type="text"/></cite></a> </p></div>			</div>			<div class="connect_msn" id="connect_msn" style="position:relative;">				<span>使用 MSN 帐号登录博客</span>				<a href="#" onclick="Lib.checkAuthor();v7sendLog(\'48_01_36\'); window.open(\'https://login.live.com/oauth20_authorize.srf?client_id=0000000040046F08&redirect_uri=http%3A%2F%2Fcontrol.blog.sina.com.cn%2Fblog_rebuild%2Fmsn%2FmsnLoginCallBack.php&response_type=code&scope=wl.basic%20wl.signin%20wl.offline_access%20wl.share%20wl.emails\',\'neww\',\'left='+(screen.width-440)/2+",top="+(screen.height-400)/2+',height=400,width=440\');msnrefreshWindow();" style="background:transparent url(http://simg.sinajs.cn/blog7style/images/msn_login01.gif) no-repeat left top; width:70px; height:22px; line-height:22px; display:inline-block; text-align:left; text-indent:2em; text-decoration:none; color:white; font-weight:bold; font-size:14px;">登录</a>			</div>			<a href="http://blog.sina.com.cn/s/blog_4b0f52990100miil.html" target="_blank"style="left:308px;position:relative;top:-24px;">如何登录？</a>			<div class="CP_lg_ad SG_j_linedot1">				<iframe id="login_ad" src="http://blog.sina.com.cn/lm/iframe/71/2008/0731/21.html" frameborder="0" scrolling="no" height="25" width="auto"></iframe>			</div>		</div>'};$registJob("blog7thCount",function(){Lib.checkAuthor();var a="新浪博客七周年视频  博客七周年 感谢有你";var f="http://www.sinaimg.cn/blog/qing/image/luoyimei/video.jpg";var t="http://blog.sina.com.cn/blog_7years/blogvideo.html";var n="#新浪博客七周年#新浪博客七周年视频——《感谢有你》！感谢所有生活在新浪博客的博主们！:http://blog.sina.com.cn/blog_7years/blogvideo.html";var j="#新浪博客七周年#新浪博客七周年视频——《感谢有你》！感谢所有生活在新浪博客的博主们！http://video.sina.com.cn/v/b/84691108-2264489285.html";if($E("share_db")){$E("share_db").href="javascript:void((function(){var%20u='http://shuo.douban.com/!service/share?image=&href="+encodeURIComponent(t)+"&name="+encodeURIComponent(a)+"';window.open(u,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330');return%200;})());"}if($E("share_kx")){$E("share_kx").href="javascript:void(kaixin=window.open('http://www.kaixin001.com/~repaste/share.php?&rurl="+escape(t)+"&rtitle="+escape(a)+"&rcontent="+escape(n)+"','kaixin'));kaixin.focus();"}var r="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=2264489285&ralateUid=2264489285"+(scope.$ralateUid?"&ralateUid="+scope.$ralateUid:"")+"',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();scope.weiboLog();})(screen,document,encodeURIComponent,'','','"+f+"','"+j+"','"+t+"','utf-8'));";if($E("share_weibo")){$E("share_weibo").href=r}scope.weiboLog=function(){v7sendLog("50_01_07")};if($E("share_rr")){$E("share_rr").href="javascript:void(function(){var renren=window.open('http://share.renren.com/share/buttonshare.do?link="+encodeURIComponent(t)+"&title="+a+"&content="+encodeURIComponent(n)+"');}())"}var q=$E("userLoginDiv");var d=$E("userLogin");if(q){if($isLogin){var i='你好，<a target="_blank" href="http://blog.sina.com.cn/u/'+$UID+'" class="nikename">'+$nick.substring(0,6)+'</a><a href="http://login.sina.com.cn/cgi/login/logout.php">退出</a>';q.innerHTML=i}if(d){d.onclick=function(){new Lib.Login.Ui().login(function(){location.reload()});return}}}var s=$E("myThx");var c=$E("didThx");var o=$E("thxCount");var l=0;var p=Utils.Cookie.getCookie("blog7Thx");if(p){c.style.display="";s.style.display="none"}function m(y){var x;y=""+y;if(y.length<8){x=8-y.length}var u="";for(var v=0;v<x;v++){u+="0"}return u+y}function g(){Utils.Io.JsLoad.request("http://control.blog.sina.com.cn/blog_7years/videoNum.php",{onComplete:function(u){if(u.code=="A00006"){o.innerHTML=m(u.data.message);l=u.data.message;Utils.Cookie.setCookie("blog7Thx","true")}else{}},GET:{type:1,n:Math.random()}})}g();if(s){s.onclick=function(u){if(p){return}Core.Events.stopDefaultEvent(u);v7sendLog("50_01_11");Utils.Io.JsLoad.request("http://control.blog.sina.com.cn/blog_7years/videoNum.php",{onComplete:function(v){if(v.code=="A00006"){s.style.display="none";c.style.display="";o.innerHTML=m(parseInt(v.data.message)+parseInt(l))}else{var x=winDialog.alert(v.data.message,{funcOk:function(){},textOk:"确定",title:"提示",icon:"01"})}},GET:{n:Math.random()}})}}var b=setInterval(g,5000)});$registJob("loginStatus",function(){Lib.checkAuthor();var b=Utils.Cookie.getCookie;var d=Utils.Cookie.setCookie;var a=b("_s_loginStatus");var f=b("_s_loginuid");if($isLogin){if(f===$UID){return}}else{if(!a||(a===f)){return}}d("_s_loginuid",$UID||a,(24-new Date().getHours()),"","blog.sina.com.cn");var c="http://control.blog.sina.com.cn/blog_rebuild/riaapi/padblog/padInfo.php?rnd="+Math.random();Utils.Io.JsLoad.request(c,{onComplete:function(){},onException:function(){}})});Utils.Io.loadCss=function(d,b){if(d==null){return false}b=b||window;var a=b.document;d.id=d.id||"";var c;if(d.url){c=a.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",d.url)}else{if(d.text){c=a.createElement("style");c.setAttribute("type","text/css");if($IE){c.styleSheet.cssText=d.text}else{c.innerHTML=d.text}}}c.setAttribute("id",d.id);a.getElementsByTagName("head")[0].appendChild(c)};Lib.register=function(a,f){var d=a.split(".");var g={},c,b=Lib;while(c=d.shift()){if(d.length){if(b[c]===undefined){b[c]={}}b=b[c]}else{if(b[c]===undefined){b[c]=f(Lib)}}}};Lib.register("util.loadScript",function(){var b=!0,d=!1,a={};var c=function(f,g){Utils.Io.JsLoad.request(f,{isRemove:d,noreturn:b,onComplete:function(n){a[f].isLoading=d;var l=a[f].cb;for(var m=0,j=l.length;m<j;m++){l[m](n)}a[f].cb=null}})};return function(i,g){var j=a[i];var f=j&&j.cb;if(!j){f=[g];j={isLoading:b,cb:f};a[i]=j;c(i,j)}else{if(j.isLoading){f.push(g)}else{g()}}}});Lib.register("sendSuda",function(b){var a="http://www.sinaimg.cn/unipro/pub/suda_s_v851c.js";return function(c){b.util.loadScript(a,c)}});$registJob("suda",function(){var c=scope&&scope.$pageid;var j=window.location.href;var b=j.indexOf("tj=1")>-1;var i=c&&(c==="articletj"||c==="index"||c==="indexM"||c==="editor"||b);function a(m,p,o,n,l){if(b){v7sendLog(l)}switch(m){case"index":case"indexM":v7sendLog(p);break;case"editor":v7sendLog(o);break;case"articletj":v7sendLog(n);break}}if(i){var d=encodeURIComponent(j);var g=encodeURIComponent(document.referrer)}if(typeof _S_pSt=="function"){if(i){v7sendLog("42_01_03_"+new Date().getTime()+"_"+d+"_"+g)}return}if(i){if(!$isLogin){var f="42_01_01_"+new Date().getTime()+"_"+d+"_"+g}else{var f="42_01_01_"+$UID+"_"+new Date().getTime()+"_"+d+"_"+g}a(c,"42_01_08","42_01_14",f,"42_01_05")}Lib.sendSuda(function(){try{_S_pSt("")}catch(m){}if(i){if(!$isLogin){var l="42_01_02_"+new Date().getTime()+"_"+d+"_"+g}else{var l="42_01_02_"+$UID+"_"+new Date().getTime()+"_"+d+"_"+g}a(c,"42_01_09","42_01_15",l,"42_01_06")}})});function main(){var a=new Jobs();a.add("blog7thCount");a.add("suda");a.add("loginStatus");a.start()};